(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[0],{"3Kre":function(e,t,n){"use strict";n.r(t),n.d(t,"factory",function(){return P}),n.d(t,"registerAnalytics",function(){return B}),n.d(t,"resetGlobalVars",function(){return R}),n.d(t,"settings",function(){return L});var r,i,o,a=n("wj3C"),s=n.n(a),u=(n("fSjL"),n("mrSG")),c=n("zVF4"),l=n("S+S0"),d="measurementId",h="firebase_id",f="origin",p="https://www.googletagmanager.com/gtag/js";function m(e,t,n,i,o){var a=i||{};o&&o.global||(a=Object(u["__assign"])(Object(u["__assign"])({},i),{send_to:t})),e(r.EVENT,n,a||{})}function g(e,t,n,i){i&&i.global?e(r.SET,{screen_name:n}):e(r.CONFIG,t,{update:!0,screen_name:n})}function y(e,t,n,i){i&&i.global?e(r.SET,{user_id:n}):e(r.CONFIG,t,{update:!0,user_id:n})}function v(e,t,n,i){if(i&&i.global){for(var o={},a=0,s=Object.keys(n);a<s.length;a++){var u=s[a];o["user_properties."+u]=n[u]}e(r.SET,o)}else e(r.CONFIG,t,{update:!0,user_properties:n})}function w(e,t){window["ga-disable-"+e]=!t}function b(e,t,n){return Object(u["__awaiter"])(this,void 0,void 0,function(){var i,o;return Object(u["__generator"])(this,function(a){switch(a.label){case 0:return[4,t.getId()];case 1:return i=a.sent(),n("js",new Date),n(r.CONFIG,e.options[d],(o={},o[h]=i,o[f]="firebase",o.update=!0,o)),[2]}})})}function T(e){var t=document.createElement("script");t.src=p+"?l="+e,t.async=!0,document.head.appendChild(t)}function S(e){var t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}function E(e,t){return function(n,i,o){if(n===r.EVENT){var a=[];if(o&&o["send_to"]){var s=o["send_to"];Array.isArray(s)||(s=[s]);for(var u=0,c=s;u<c.length;u++){var l=c[u],d=t[l];if(!d){a=[];break}a.push(d)}}if(0===a.length)for(var h=0,f=Object.values(t);h<f.length;h++){var p=f[h];a.push(p)}Promise.all(a).then(function(){return e(r.EVENT,i,o||{})}).catch(function(e){return console.error(e)})}else if(n===r.CONFIG){var m=t[i]||Promise.resolve();m.then(function(){e(r.CONFIG,i,o)}).catch(function(e){return console.error(e)})}else e(r.SET,i)}}function C(e,t,n){var r=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];window[t].push(arguments)};return window[n]&&"function"===typeof window[n]&&(r=window[n]),window[n]=E(r,e),{gtagCore:r,wrappedGtag:window[n]}}function O(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(p))return r}return null}(function(e){e["EVENT"]="event",e["SET"]="set",e["CONFIG"]="config"})(r||(r={})),function(e){e["ADD_PAYMENT_INFO"]="add_payment_info",e["ADD_TO_CART"]="add_to_cart",e["ADD_TO_WISHLIST"]="add_to_wishlist",e["BEGIN_CHECKOUT"]="begin_checkout",e["CHECKOUT_PROGRESS"]="checkout_progress",e["EXCEPTION"]="exception",e["GENERATE_LEAD"]="generate_lead",e["LOGIN"]="login",e["PAGE_VIEW"]="page_view",e["PURCHASE"]="purchase",e["REFUND"]="refund",e["REMOVE_FROM_CART"]="remove_from_cart",e["SCREEN_VIEW"]="screen_view",e["SEARCH"]="search",e["SELECT_CONTENT"]="select_content",e["SET_CHECKOUT_OPTION"]="set_checkout_option",e["SHARE"]="share",e["SIGN_UP"]="sign_up",e["TIMING_COMPLETE"]="timing_complete",e["VIEW_ITEM"]="view_item",e["VIEW_ITEM_LIST"]="view_item_list",e["VIEW_PROMOTION"]="view_promotion",e["VIEW_SEARCH_RESULTS"]="view_search_results"}(i||(i={}));var _,I,k=(o={},o["no-ga-id"]='"'+d+'" field is empty in Firebase config. Firebase Analytics requires this field to contain a valid measurement ID.',o["already-exists"]="A Firebase Analytics instance with the measurement ID ${id}  already exists. Only one Firebase Analytics instance can be created for each measurement ID.",o["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",o["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate",o),D=new c["ErrorFactory"]("analytics","Analytics",k),A={},F="dataLayer",M="gtag",N=!1;function R(e,t){void 0===e&&(e=!1),void 0===t&&(t={}),N=e,A=t,F="dataLayer",M="gtag"}function L(e){if(N)throw D.create("already-initialized");e.dataLayerName&&(F=e.dataLayerName),e.gtagName&&(M=e.gtagName)}function P(e,t){var n=e.options[d];if(!n)throw D.create("no-ga-id");if(null!=A[n])throw D.create("already-exists",{id:n});if(!N){O()||T(F),S(F);var r=C(A,F,M),i=r.wrappedGtag,o=r.gtagCore;I=i,_=o,N=!0}A[n]=b(e,t,_);var a={app:e,logEvent:function(e,t,r){return m(I,n,e,t,r)},setCurrentScreen:function(e,t){return g(I,n,e,t)},setUserId:function(e,t){return y(I,n,e,t)},setUserProperties:function(e,t){return v(I,n,e,t)},setAnalyticsCollectionEnabled:function(e){return w(n,e)}};return a}var x="analytics";function B(e){function t(e){try{var t=e.getProvider(x).getImmediate();return{logEvent:t.logEvent}}catch(e){throw D.create("interop-component-reg-failed",{reason:e})}}e.INTERNAL.registerComponent(new l["Component"](x,function(e){var t=e.getProvider("app").getImmediate(),n=e.getProvider("installations").getImmediate();return P(t,n)},"PUBLIC").setServiceProps({settings:L,EventName:i})),e.INTERNAL.registerComponent(new l["Component"]("analytics-internal",t,"PRIVATE"))}B(s.a)},"4JlD":function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"===typeof e?o(a(e),function(a){var s=encodeURIComponent(r(a))+n;return i(e[a])?o(e[a],function(e){return s+encodeURIComponent(r(e))}).join(t):s+encodeURIComponent(r(e[a]))}).join(t):s?encodeURIComponent(r(s))+n+encodeURIComponent(r(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},"6Joi":function(e,t,n){"use strict";(function(e){function r(e){return e&&"object"===typeof e&&"default"in e?e["default"]:e}Object.defineProperty(t,"__esModule",{value:!0});var i,o=r(n("wj3C")),a=n("mrSG"),s=n("q/0M"),u=n("zVF4"),c=n("S+S0"),l=n("x7I3"),d=o.SDK_VERSION,h=new s.Logger("@firebase/firestore");function f(){return h.logLevel===s.LogLevel.DEBUG?i.DEBUG:h.logLevel===s.LogLevel.SILENT?i.SILENT:i.ERROR}function p(e){switch(e){case i.DEBUG:h.logLevel=s.LogLevel.DEBUG;break;case i.ERROR:h.logLevel=s.LogLevel.ERROR;break;case i.SILENT:h.logLevel=s.LogLevel.SILENT;break;default:h.error("Firestore ("+d+"): Invalid value passed to `setLogLevel`")}}function m(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(h.logLevel<=s.LogLevel.DEBUG){var i=n.map(y);h.debug.apply(h,a.__spreadArrays(["Firestore ("+d+") ["+e+"]: "+t],i))}}function g(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(h.logLevel<=s.LogLevel.ERROR){var r=t.map(y);h.error.apply(h,a.__spreadArrays(["Firestore ("+d+"): "+e],r))}}function y(e){if("string"===typeof e)return e;var t=b.getPlatform();try{return t.formatJSON(e)}catch(t){return e}}function v(e){var t="FIRESTORE ("+d+") INTERNAL ASSERTION FAILED: "+e;throw g(t),new Error(t)}function w(e,t){e||v(t)}(function(e){e[e["DEBUG"]=0]="DEBUG",e[e["ERROR"]=1]="ERROR",e[e["SILENT"]=2]="SILENT"})(i||(i={}));var b=function(){function e(){}return e.setPlatform=function(t){e.platform&&v("Platform already defined"),e.platform=t},e.getPlatform=function(){return e.platform||v("Platform not set"),e.platform},e}();function T(){return b.getPlatform().emptyByteString}var S={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},E=function(e){function t(t,n){var r=e.call(this,n)||this;return r.code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return a.__extends(t,e),t}(Error);function C(e,t){function n(){var e="This constructor is private.";throw t&&(e+=" ",e+=t),new E(S.INVALID_ARGUMENT,e)}for(var r in n.prototype=e.prototype,e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function _(e,t){return void 0!==e?e:t}function I(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Number(n);isNaN(r)||t(r,e[n])}}function k(e){var t=[];return D(e,function(e,n){return t.push(n)}),t}function D(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function A(e){for(var t in w(null!=e&&"object"===typeof e,"isEmpty() expects object parameter."),e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function F(e){w(e&&"object"===typeof e,"shallowCopy() expects object parameter.");var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function M(e,t){if(0!==t.length)throw new E(S.INVALID_ARGUMENT,"Function "+e+"() does not support arguments, but was called with "+te(t.length,"argument")+".")}function N(e,t,n){if(t.length!==n)throw new E(S.INVALID_ARGUMENT,"Function "+e+"() requires "+te(n,"argument")+", but was called with "+te(t.length,"argument")+".")}function R(e,t,n){if(t.length<n)throw new E(S.INVALID_ARGUMENT,"Function "+e+"() requires at least "+te(n,"argument")+", but was called with "+te(t.length,"argument")+".")}function L(e,t,n,r){if(t.length<n||t.length>r)throw new E(S.INVALID_ARGUMENT,"Function "+e+"() requires between "+n+" and "+r+" arguments, but was called with "+te(t.length,"argument")+".")}function P(e,t,n,r){if(!(t instanceof Array)||t.length<r)throw new E(S.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" argument to be an array with at least "+te(r,"element")+".")}function x(e,t,n,r){z(e,t,ee(n)+" argument",r)}function B(e,t,n,r){void 0!==r&&x(e,t,n,r)}function q(e,t,n,r){z(e,t,n+" option",r)}function U(e,t,n,r){void 0!==r&&q(e,t,n,r)}function V(e,t,n,r,i){if(!(r instanceof Array))throw new E(S.INVALID_ARGUMENT,"Function "+e+"() requires its "+t+" option to be an array, but it was: "+H(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new E(S.INVALID_ARGUMENT,"Function "+e+"() requires all "+t+" elements to be "+n+", but the value at index "+o+" was: "+H(r[o]))}function j(e,t,n,r,i){void 0!==r&&V(e,t,n,r,i)}function W(e,t,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(H(u))}var c=H(r);throw new E(S.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+e+'() for option "'+n+'". Acceptable values: '+o.join(", "))}function K(e,t,n,r,i){void 0!==r&&W(e,t,n,r,i)}function G(e,t,n,r){if(!t.some(function(e){return e===r}))throw new E(S.INVALID_ARGUMENT,"Invalid value "+H(r)+" provided to function "+e+"() for its "+ee(n)+" argument. Acceptable values: "+t.join(", "))}function z(e,t,n,r){var i=!1;if(i="object"===t?Q(r):"non-empty string"===t?"string"===typeof r&&""!==r:typeof r===t,!i){var o=H(r);throw new E(S.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" to be of type "+t+", but it was: "+o)}}function Q(e){return"object"===typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function H(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"===typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"===typeof e||"boolean"===typeof e)return""+e;if("object"===typeof e){if(e instanceof Array)return"an array";var t=Y(e);return t?"a custom "+t+" object":"an object"}return"function"===typeof e?"a function":v("Unknown wrong type: "+typeof e)}function Y(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/,n=t.exec(e.constructor.toString());if(n&&n.length>1)return n[1]}return null}function J(e,t,n){if(void 0===n)throw new E(S.INVALID_ARGUMENT,"Function "+e+"() requires a valid "+ee(t)+" argument, but it was undefined.")}function X(e,t,n){D(t,function(t,r){if(n.indexOf(t)<0)throw new E(S.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+e+"(). Available options: "+n.join(", "))})}function $(e,t,n,r){var i=H(r);return new E(S.INVALID_ARGUMENT,"Function "+e+"() requires its "+ee(n)+" argument to be a "+t+", but it was: "+i)}function Z(e,t,n){if(n<=0)throw new E(S.INVALID_ARGUMENT,'Function "'+e+'()" requires its '+ee(t)+" argument to be a positive number, but it was: "+n+".")}function ee(e){switch(e){case 1:return"first";case 2:return"second";case 3:return"third";default:return e+"th"}}function te(e,t){return e+" "+t+(1===e?"":"s")}var ne=function(){function e(){}return e.newId=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",n=0;n<20;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return w(20===t.length,"Invalid auto ID: "+t),t},e}();function re(e,t){return e<t?-1:e>t?1:0}function ie(e,t){return null!==e&&void 0!==e?!(!t||!e.isEqual(t)):e===t}function oe(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].isEqual(t[n]))return!1;return!0}function ae(e){return e+"\0"}function se(){if("undefined"===typeof Uint8Array)throw new E(S.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function ue(){if(!b.getPlatform().base64Available)throw new E(S.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var ce,le=function(){function e(e){ue(),this._binaryString=e}return e.fromBase64String=function(t){N("Blob.fromBase64String",arguments,1),x("Blob.fromBase64String","string",1,t),ue();try{var n=b.getPlatform().atob(t);return new e(n)}catch(e){throw new E(S.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},e.fromUint8Array=function(t){if(N("Blob.fromUint8Array",arguments,1),se(),!(t instanceof Uint8Array))throw $("Blob.fromUint8Array","Uint8Array",1,t);var n=Array.prototype.map.call(t,function(e){return String.fromCharCode(e)}).join("");return new e(n)},e.prototype.toBase64=function(){return N("Blob.toBase64",arguments,0),ue(),b.getPlatform().btoa(this._binaryString)},e.prototype.toUint8Array=function(){N("Blob.toUint8Array",arguments,0),se();for(var e=new Uint8Array(this._binaryString.length),t=0;t<this._binaryString.length;t++)e[t]=this._binaryString.charCodeAt(t);return e},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this._binaryString===e._binaryString},e.prototype._compareTo=function(e){return re(this._binaryString,e._binaryString)},e}(),de=C(le,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),he=function(){function e(e,t,n,r,i){this.databaseId=e,this.persistenceKey=t,this.host=n,this.ssl=r,this.forceLongPolling=i}return e}(),fe="(default)",pe=function(){function e(e,t){this.projectId=e,this.database=t||fe}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return this.database===fe},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e.prototype.compareTo=function(e){return re(this.projectId,e.projectId)||re(this.database,e.database)},e}(),me=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.setPreviousValue(e)},this.writeNewSequenceNumber=function(e){return t.writeSequenceNumber(e)})}return e.prototype.setPreviousValue=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e},e.INVALID=-1,e}(),ge="__name__",ye=function(){function e(e,t,n){void 0===t?t=0:t>e.length&&v("offset "+t+" out of range "+e.length),void 0===n?n=e.length-t:n>e.length-t&&v("length "+n+" out of range "+(e.length-t)),this.segments=e,this.offset=t,this.len=n}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(e){n.push(e)}):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return e=void 0===e?1:e,w(this.length>=e,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+e,this.length-e)},e.prototype.popLast=function(){return w(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return w(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(e){return w(e<this.length,"Index out of range"),this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),ve=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(e){if(e.indexOf("//")>=0)throw new E(S.INVALID_ARGUMENT,"Invalid path ("+e+"). Paths must not contain // in them.");var n=e.split("/").filter(function(e){return e.length>0});return new t(n)},t.EMPTY_PATH=new t([]),t}(ye),we=/^[_a-zA-Z][_a-zA-Z0-9]*$/,be=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.isValidIdentifier=function(e){return we.test(e)},t.prototype.canonicalString=function(){return this.toArray().map(function(e){return e=e.replace("\\","\\\\").replace("`","\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e}).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&this.get(0)===ge},t.keyField=function(){return new t([ge])},t.fromServerFormat=function(e){var n=[],r="",i=0,o=function(){if(0===r.length)throw new E(S.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;while(i<e.length){var s=e[i];if("\\"===s){if(i+1===e.length)throw new E(S.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new E(S.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new E(S.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)},t.EMPTY_PATH=new t([]),t}(ye),Te=function(){function e(t){this.path=t,w(e.isDocumentKey(t),"Invalid DocumentKey with an odd number of segments: "+t.toArray().join("/"))}return e.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===ve.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return ve.comparator(e.path,t.path)},e.isDocumentKey=function(e){return e.length%2===0},e.fromSegments=function(t){return new e(new ve(t.slice()))},e.fromPathString=function(t){return new e(ve.fromString(t))},e.EMPTY=new e(new ve([])),e}(),Se=function(){function e(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return e}();(function(e){e["All"]="all",e["ListenStreamIdle"]="listen_stream_idle",e["ListenStreamConnectionBackoff"]="listen_stream_connection_backoff",e["WriteStreamIdle"]="write_stream_idle",e["WriteStreamConnectionBackoff"]="write_stream_connection_backoff",e["OnlineStateTimeout"]="online_state_timeout",e["ClientMetadataRefresh"]="client_metadata_refresh",e["LruGarbageCollection"]="lru_garbage_collection",e["RetryTransaction"]="retry_transaction"})(ce||(ce={}));var Ee=function(){function e(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Se,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch(function(e){})}return e.createAndSchedule=function(t,n,r,i,o){var a=Date.now()+r,s=new e(t,n,a,i,o);return s.start(r),s},e.prototype.start=function(e){var t=this;this.timerHandle=setTimeout(function(){return t.handleDelayElapsed()},e)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new E(S.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}(),Ce=function(){function e(){this.tail=Promise.resolve(),this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.timerIdsToSkip=[]}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this._isShuttingDown},enumerable:!0,configurable:!0}),e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueueAndForgetEvenAfterShutdown=function(e){this.verifyNotFailed(),this.enqueueInternal(e)},e.prototype.enqueueEvenAfterShutdown=function(e){return this.verifyNotFailed(),this.enqueueInternal(e)},e.prototype.enqueueAndInitiateShutdown=function(e){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return this.verifyNotFailed(),this._isShuttingDown?[3,2]:(this._isShuttingDown=!0,[4,this.enqueueEvenAfterShutdown(e)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.enqueue=function(e){return this.verifyNotFailed(),this._isShuttingDown?new Promise(function(e){}):this.enqueueInternal(e)},e.prototype.enqueueInternal=function(e){var t=this,n=this.tail.then(function(){return t.operationInProgress=!0,e().catch(function(e){t.failure=e,t.operationInProgress=!1;var n=e.stack||e.message||"";throw g("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout(function(){throw e},0),e}).then(function(e){return t.operationInProgress=!1,e})});return this.tail=n,n},e.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.verifyNotFailed(),w(t>=0,"Attempted to schedule an operation with a negative delay of "+t),this.timerIdsToSkip.indexOf(e)>-1&&(t=0);var i=Ee.createAndSchedule(this,e,t,n,function(e){return r.removeDelayedOperation(e)});return this.delayedOperations.push(i),i},e.prototype.verifyNotFailed=function(){this.failure&&v("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},e.prototype.verifyOperationInProgress=function(){w(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},e.prototype.drain=function(){return this.enqueueEvenAfterShutdown(function(){return Promise.resolve()})},e.prototype.containsDelayedOperation=function(e){for(var t=0,n=this.delayedOperations;t<n.length;t++){var r=n[t];if(r.timerId===e)return!0}return!1},e.prototype.runDelayedOperationsEarly=function(e){var t=this;return this.drain().then(function(){w(e===ce.All||t.containsDelayedOperation(e),"Attempted to drain to missing operation "+e),t.delayedOperations.sort(function(e,t){return e.targetTimeMs-t.targetTimeMs});for(var n=0,r=t.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),e!==ce.All&&i.timerId===e)break}return t.drain()})},e.prototype.skipDelaysForTimerId=function(e){this.timerIdsToSkip.push(e)},e.prototype.removeDelayedOperation=function(e){var t=this.delayedOperations.indexOf(e);w(t>=0,"Delayed operation not found."),this.delayedOperations.splice(t,1)},e}(),Oe="\x01",_e="\x01",Ie="\x10",ke="\x11";function De(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Fe(t)),t=Ae(e.get(n),t);return Fe(t)}function Ae(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+=Oe+Ie;break;case Oe:n+=Oe+ke;break;default:n+=o}}return n}function Fe(e){return e+Oe+_e}function Me(e){var t=e.length;if(w(t>=2,"Invalid path "+e),2===t)return w(e.charAt(0)===Oe&&e.charAt(1)===_e,"Non-empty path "+e+" had length 2"),ve.EMPTY_PATH;for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf(Oe,o);(a<0||a>n)&&v('Invalid encoded resource path: "'+e+'"');var s=e.charAt(a+1);switch(s){case _e:var u=e.substring(o,a),c=void 0;0===i.length?c=u:(i+=u,c=i,i=""),r.push(c);break;case Ie:i+=e.substring(o,a),i+="\0";break;case ke:i+=e.substring(o,a+1);break;default:v('Invalid encoded resource path: "'+e+'"')}o=a+2}return new ve(r)}var Ne=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new E(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new E(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new E(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new E(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3),r=1e6*(t-1e3*n);return new e(n,r)},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e}(),Re=function(){function e(e){this.timestamp=e}return e.fromMicroseconds=function(t){var n=Math.floor(t/1e6),r=t%1e6*1e3;return new e(new Ne(n,r))},e.fromTimestamp=function(t){return new e(t)},e.forDeletedDoc=function(){return e.MIN},e.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e.MIN=new e(new Ne(0,0)),e}(),Le=function(){function e(e,t){this.comparator=e,this.root=t||xe.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,xe.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,xe.BLACK,null,null))},e.prototype.get=function(e){var t=this.root;while(!t.isEmpty()){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){var t=0,n=this.root;while(!n.isEmpty()){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal(function(t,n){return e(t,n),!1})},e.prototype.toString=function(){var e=[];return this.inorderTraversal(function(t,n){return e.push(t+":"+n),!1}),"{"+e.join(", ")+"}"},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(){return new Pe(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(e){return new Pe(this.root,e,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new Pe(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(e){return new Pe(this.root,e,this.comparator,!0)},e}(),Pe=function(){function e(e,t,n,r){this.isReverse=r,this.nodeStack=[];var i=1;while(!e.isEmpty())if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){w(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse){e=e.left;while(!e.isEmpty())this.nodeStack.push(e),e=e.right}else{e=e.right;while(!e.isEmpty())this.nodeStack.push(e),e=e.left}return t},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),xe=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw v("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw v("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check();if(e!==this.right.check())throw v("Black depths differ");return e+(this.isRed()?0:1)},e.EMPTY=null,e.RED=!0,e.BLACK=!1,e}(),Be=function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw v("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw v("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw v("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw v("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw v("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new xe(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}();xe.EMPTY=new Be;var qe=function(){function e(e){this.comparator=e,this.data=new Le(this.comparator)}return e.fromMapKeys=function(t){var n=new e(t.comparator);return t.forEach(function(e){n=n.add(e)}),n},e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal(function(t,n){return e(t),!1})},e.prototype.forEachInRange=function(e,t){var n=this.data.getIteratorFrom(e[0]);while(n.hasNext()){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}},e.prototype.forEachWhile=function(e,t){var n;n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();while(n.hasNext()){var r=n.getNext(),i=e(r.key);if(!i)return}},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.getIterator=function(){return new Ue(this.data.getIterator())},e.prototype.getIteratorFrom=function(e){return new Ue(this.data.getIteratorFrom(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return e.forEach(function(e){t=t.add(e)}),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;var n=this.data.getIterator(),r=t.data.getIterator();while(n.hasNext()){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},e.prototype.toArray=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},e.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),Ue=function(){function e(e){this.iter=e}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),Ve=new Le(Te.comparator);function je(){return Ve}function We(){return je()}var Ke=new Le(Te.comparator);function Ge(){return Ke}var ze=new Le(Te.comparator);function Qe(){return ze}var He=new qe(Te.comparator);function Ye(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=He,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Je=new qe(re);function Xe(){return Je}var $e=-1,Ze=function(){function e(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r,w(r.length>0,"Cannot create an empty mutation batch")}return e.prototype.applyToRemoteDocument=function(e,t,n){t&&w(t.key.isEqual(e),"applyToRemoteDocument: key "+e+" should match maybeDoc key\n        "+t.key);var r=n.mutationResults;w(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(e)){var a=r[i];t=o.applyToRemoteDocument(t,a)}}return t},e.prototype.applyToLocalView=function(e,t){t&&w(t.key.isEqual(e),"applyToLocalDocument: key "+e+" should match maybeDoc key\n        "+t.key);for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(e)&&(t=i.applyToLocalView(t,t,this.localWriteTime))}for(var o=t,a=0,s=this.mutations;a<s.length;a++){i=s[a];i.key.isEqual(e)&&(t=i.applyToLocalView(t,o,this.localWriteTime))}return t},e.prototype.applyToLocalDocumentSet=function(e){var t=this,n=e;return this.mutations.forEach(function(r){var i=t.applyToLocalView(r.key,e.get(r.key));i&&(n=n.insert(r.key,i))}),n},e.prototype.keys=function(){return this.mutations.reduce(function(e,t){return e.add(t.key)},Ye())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&oe(this.mutations,e.mutations)&&oe(this.baseMutations,e.baseMutations)},e}(),et=function(){function e(e,t,n,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return e.from=function(t,n,r,i){w(t.mutations.length===r.length,"Mutations sent "+t.mutations.length+" must equal results received "+r.length);for(var o=Qe(),a=t.mutations,s=0;s<a.length;s++)o=o.insert(a[s].key,r[s].version);return new e(t,n,r,i,o)},e}(),tt=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)},function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)})}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&v("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}})},e.prototype.toPromise=function(){var e=this;return new Promise(function(t,n){e.next(t,n)})},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.reject(n)},e.resolve=function(t){return new e(function(e,n){e(t)})},e.reject=function(t){return new e(function(e,n){n(t)})},e.waitFor=function(t){return new e(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(e){return n(e)})}),o=!0,i===r&&e()})},e.or=function(t){for(var n=e.resolve(!1),r=function(t){n=n.next(function(n){return n?e.resolve(n):t()})},i=0,o=t;i<o.length;i++){var a=o[i];r(a)}return n},e.forEach=function(e,t){var n=this,r=[];return e.forEach(function(e,i){r.push(t.call(n,e,i))}),this.waitFor(r)},e}(),nt="SimpleDb",rt=3,it=function(){function t(e){this.db=e;var n=t.getIOSVersion(u.getUA());12.2===n&&g("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.openOrCreate=function(e,n,r){return w(t.isAvailable(),"IndexedDB not supported in current environment."),m(nt,"Opening database:",e),new tt(function(i,o){var a=window.indexedDB.open(e,n);a.onsuccess=function(e){var n=e.target.result;i(new t(n))},a.onblocked=function(){o(new E(S.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=function(e){var t=e.target.error;"VersionError"===t.name?o(new E(S.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o(t)},a.onupgradeneeded=function(t){m(nt,'Database "'+e+'" requires upgrade from version:',t.oldVersion);var n=t.target.result;r.createOrUpgrade(n,a.transaction,t.oldVersion,yn).next(function(){m(nt,"Database upgrade to version "+yn+" complete")})}}).toPromise()},t.delete=function(e){return m(nt,"Removing database:",e),ut(window.indexedDB.deleteDatabase(e)).toPromise()},t.isAvailable=function(){if("undefined"===typeof window||null==window.indexedDB)return!1;if(t.isMockPersistence())return!0;if(void 0===window.navigator)return!1;var e=u.getUA(),n=t.getIOSVersion(e),r=0<n&&n<10,i=t.getAndroidVersion(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.isMockPersistence=function(){return"undefined"!==typeof e&&"YES"===Object({NODE_ENV:"production"}).USE_MOCK_PERSISTENCE},t.getStore=function(e,t){return e.store(t)},t.getIOSVersion=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.getAndroidVersion=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.setVersionChangeListener=function(e){this.db.onversionchange=function(t){return e(t)}},t.prototype.runTransaction=function(e,t,n){return a.__awaiter(this,void 0,void 0,function(){var r,i,o,s,u,c;return a.__generator(this,function(l){switch(l.label){case 0:r=e.startsWith("readonly"),i=e.endsWith("idempotent"),o=0,s=function(){var e,s,c,l;return a.__generator(this,function(a){switch(a.label){case 0:++o,e=at.open(u.db,r?"readonly":"readwrite",t),a.label=1;case 1:return a.trys.push([1,3,,4]),s=n(e).catch(function(t){return e.abort(t),tt.reject(t)}).toPromise(),s.catch(function(){}),[4,e.completionPromise];case 2:return a.sent(),[2,{value:s}];case 3:return c=a.sent(),l=i&&"FirebaseError"!==c.name&&o<rt,m(nt,"Transaction failed with error: %s. Retrying: %s.",c.message,l),l?[3,4]:[2,{value:Promise.reject(c)}];case 4:return[2]}})},u=this,l.label=1;case 1:return[5,s()];case 2:return c=l.sent(),"object"===typeof c?[2,c.value]:[3,1];case 3:return[2]}})})},t.prototype.close=function(){this.db.close()},t}(),ot=function(){function e(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.dbCursor=e},enumerable:!0,configurable:!0}),e.prototype.done=function(){this.shouldStop=!0},e.prototype.skip=function(e){this.nextKey=e},e.prototype.delete=function(){return ut(this.dbCursor.delete())},e}(),at=function(){function e(e){var t=this;this.transaction=e,this.aborted=!1,this.completionDeferred=new Se,this.transaction.oncomplete=function(){t.completionDeferred.resolve()},this.transaction.onabort=function(){e.error?t.completionDeferred.reject(e.error):t.completionDeferred.resolve()},this.transaction.onerror=function(e){var n=lt(e.target.error);t.completionDeferred.reject(n)}}return e.open=function(t,n,r){return new e(t.transaction(r,n))},Object.defineProperty(e.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),e.prototype.abort=function(e){e&&this.completionDeferred.reject(e),this.aborted||(m(nt,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return w(!!t,"Object store not part of transaction: "+e),new st(t)},e}(),st=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(m(nt,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(m(nt,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),ut(n)},e.prototype.add=function(e){m(nt,"ADD",this.store.name,e,e);var t=this.store.add(e);return ut(t)},e.prototype.get=function(e){var t=this,n=this.store.get(e);return ut(n).next(function(n){return void 0===n&&(n=null),m(nt,"GET",t.store.name,e,n),n})},e.prototype.delete=function(e){m(nt,"DELETE",this.store.name,e);var t=this.store.delete(e);return ut(t)},e.prototype.count=function(){m(nt,"COUNT",this.store.name);var e=this.store.count();return ut(e)},e.prototype.loadAll=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.iterateCursor(n,function(e,t){r.push(t)}).next(function(){return r})},e.prototype.deleteAll=function(e,t){m(nt,"DELETE ALL",this.store.name);var n=this.options(e,t);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,function(e,t,n){return n.delete()})},e.prototype.iterate=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.iterateCursor(r,t)},e.prototype.iterateSerial=function(e){var t=this.cursor({});return new tt(function(n,r){t.onerror=function(e){var t=lt(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next(function(e){e?r.continue():n()}):n()}})},e.prototype.iterateCursor=function(e,t){var n=[];return new tt(function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new ot(i),a=t(i.primaryKey,i.value,o);if(a instanceof tt){var s=a.catch(function(e){return o.done(),tt.reject(e)});n.push(s)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}}).next(function(){return tt.waitFor(n)})},e.prototype.options=function(e,t){var n=void 0;return void 0!==e&&("string"===typeof e?n=e:(w(void 0===t,"3rd argument must not be defined if 2nd is a range."),t=e)),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.keysOnly?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function ut(e){return new tt(function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=lt(e.target.error);n(t)}})}var ct=!1;function lt(e){var t=it.getIOSVersion(u.getUA());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new E("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return ct||(ct=!0,setTimeout(function(){throw r},0)),r}}return e}var dt=function(){function e(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}return e.forUser=function(t,n,r,i){w(""!==t.uid,"UserID must not be an empty string.");var o=t.isAuthenticated()?t.uid:"";return new e(o,n,r,i)},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return gt(e).iterate({index:Cn.userMutationsIndex,range:n},function(e,n,r){t=!1,r.done()}).next(function(){return t})},e.prototype.acknowledgeBatch=function(e,t,n){return this.getMutationQueueMetadata(e).next(function(t){return t.lastStreamToken=mt(n),vt(e).put(t)})},e.prototype.getLastStreamToken=function(e){return this.getMutationQueueMetadata(e).next(function(e){return e.lastStreamToken})},e.prototype.setLastStreamToken=function(e,t){return this.getMutationQueueMetadata(e).next(function(n){return n.lastStreamToken=mt(t),vt(e).put(n)})},e.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=yt(e),a=gt(e);return a.add({}).next(function(s){w("number"===typeof s,"Auto-generated key is not a number");for(var u=new Ze(s,t,n,r),c=i.serializer.toDbMutationBatch(i.userId,u),l=[],d=new qe(function(e,t){return re(e.canonicalString(),t.canonicalString())}),h=0,f=r;h<f.length;h++){var p=f[h],m=In.key(i.userId,p.key.path,s);d=d.add(p.key.path.popLast()),l.push(a.put(c)),l.push(o.put(m,In.PLACEHOLDER))}return d.forEach(function(t){l.push(i.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(function(){i.documentKeysByBatchId[s]=u.keys()}),tt.waitFor(l).next(function(){return u})})},e.prototype.lookupMutationBatch=function(e,t){var n=this;return gt(e).get(t).next(function(e){return e?(w(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),n.serializer.fromDbMutationBatch(e)):null})},e.prototype.lookupMutationKeys=function(e,t){var n=this;return this.documentKeysByBatchId[t]?tt.resolve(this.documentKeysByBatchId[t]):this.lookupMutationBatch(e,t).next(function(e){if(e){var r=e.keys();return n.documentKeysByBatchId[t]=r,r}return null})},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return gt(e).iterate({index:Cn.userMutationsIndex,range:i},function(e,t,i){t.userId===n.userId&&(w(t.batchId>=r,"Should have found mutation after "+r),o=n.serializer.fromDbMutationBatch(t)),i.done()}).next(function(){return o})},e.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=$e;return gt(e).iterate({index:Cn.userMutationsIndex,range:t,reverse:!0},function(e,t,r){n=t.batchId,r.done()}).next(function(){return n})},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,$e],[this.userId,Number.POSITIVE_INFINITY]);return gt(e).loadAll(Cn.userMutationsIndex,n).next(function(e){return e.map(function(e){return t.serializer.fromDbMutationBatch(e)})})},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=In.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return yt(e).iterate({range:i},function(r,i,a){var s=r[0],u=r[1],c=r[2],l=Me(u);if(s===n.userId&&t.path.isEqual(l))return gt(e).get(c).next(function(e){if(!e)throw v("Dangling document-mutation reference found: "+r+" which points to "+c);w(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+c),o.push(n.serializer.fromDbMutationBatch(e))});a.done()}).next(function(){return o})},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new qe(re),i=[];return t.forEach(function(t){var o=In.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=yt(e).iterate({range:a},function(e,i,o){var a=e[0],s=e[1],u=e[2],c=Me(s);a===n.userId&&t.path.isEqual(c)?r=r.add(u):o.done()});i.push(s)}),tt.waitFor(i).next(function(){return n.lookupMutationBatches(e,r)})},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this;w(!t.isDocumentQuery(),"Document queries shouldn't go down this path"),w(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=t.path,i=r.length+1,o=In.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new qe(re);return yt(e).iterate({range:a},function(e,t,o){var a=e[0],u=e[1],c=e[2],l=Me(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()}).next(function(){return n.lookupMutationBatches(e,s)})},e.prototype.lookupMutationBatches=function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(gt(e).get(t).next(function(e){if(null===e)throw v("Dangling document-mutation reference found, which points to "+t);w(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),r.push(n.serializer.fromDbMutationBatch(e))}))}),tt.waitFor(i).next(function(){return r})},e.prototype.removeMutationBatch=function(e,t){var n=this;return pt(e.simpleDbTransaction,this.userId,t).next(function(r){return e.addOnCommittedListener(function(){n.removeCachedMutationKeys(t.batchId)}),tt.forEach(r,function(t){return n.referenceDelegate.removeMutationReference(e,t)})})},e.prototype.removeCachedMutationKeys=function(e){delete this.documentKeysByBatchId[e]},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next(function(n){if(!n)return tt.resolve();var r=IDBKeyRange.lowerBound(In.prefixForUser(t.userId)),i=[];return yt(e).iterate({range:r},function(e,n,r){var o=e[0];if(o===t.userId){var a=Me(e[1]);i.push(a)}else r.done()}).next(function(){w(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map(function(e){return e.canonicalString()}))})})},e.prototype.containsKey=function(e,t){return ht(e,this.userId,t)},e.prototype.getMutationQueueMetadata=function(e){var t=this;return vt(e).get(this.userId).next(function(e){return e||new En(t.userId,$e,"")})},e}();function ht(e,t,n){var r=In.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return yt(e).iterate({range:o,keysOnly:!0},function(e,n,r){var o=e[0],s=e[1];e[2];o===t&&s===i&&(a=!0),r.done()}).next(function(){return a})}function ft(e,t){var n=!1;return vt(e).iterateSerial(function(r){return ht(e,r,t).next(function(e){return e&&(n=!0),tt.resolve(!e)})}).next(function(){return n})}function pt(e,t,n){var r=e.store(Cn.store),i=e.store(In.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.iterate({range:a},function(e,t,n){return s++,n.delete()});o.push(u.next(function(){w(1===s,"Dangling document-mutation reference found: Missing batch "+n.batchId)}));for(var c=[],l=0,d=n.mutations;l<d.length;l++){var h=d[l],f=In.key(t,h.key.path,n.batchId);o.push(i.delete(f)),c.push(h.key)}return tt.waitFor(o).next(function(){return c})}function mt(e){return e instanceof Uint8Array?(w(it.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence."),e.toString()):e}function gt(e){return Tr.getStore(e,Cn.store)}function yt(e){return Tr.getStore(e,In.store)}function vt(e){return Tr.getStore(e,En.store)}var wt,bt=1;(function(e){e[e["QueryCache"]=0]="QueryCache",e[e["SyncEngine"]=1]="SyncEngine"})(wt||(wt={}));var Tt=function(){function e(e,t){this.generatorId=e,w((e&bt)===e,"Generator ID "+e+" contains more than "+bt+" reserved bits"),this.seek(void 0!==t?t:this.generatorId)}return e.prototype.next=function(){var e=this.nextId;return this.nextId+=1<<bt,e},e.prototype.after=function(e){return this.seek(e+(1<<bt)),this.next()},e.prototype.seek=function(e){w((e&bt)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=e},e.forTargetCache=function(){var t=new e(wt.QueryCache,2);return t},e.forSyncEngine=function(){return new e(wt.SyncEngine)},e}(),St=function(){function e(e,t){this.referenceDelegate=e,this.serializer=t,this.targetIdGenerator=Tt.forTargetCache()}return e.prototype.allocateTargetId=function(e){var t=this;return this.retrieveMetadata(e).next(function(n){return n.highestTargetId=t.targetIdGenerator.after(n.highestTargetId),t.saveMetadata(e,n).next(function(){return n.highestTargetId})})},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.retrieveMetadata(e).next(function(e){return Re.fromTimestamp(new Ne(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))})},e.prototype.getHighestSequenceNumber=function(e){return _t(e.simpleDbTransaction)},e.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.retrieveMetadata(e).next(function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.saveMetadata(e,i)})},e.prototype.addTargetData=function(e,t){var n=this;return this.saveTargetData(e,t).next(function(){return n.retrieveMetadata(e).next(function(r){return r.targetCount+=1,n.updateMetadataFromTargetData(t,r),n.saveMetadata(e,r)})})},e.prototype.updateTargetData=function(e,t){return this.saveTargetData(e,t)},e.prototype.removeTargetData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return Et(e).delete(t.targetId)}).next(function(){return n.retrieveMetadata(e)}).next(function(t){return w(t.targetCount>0,"Removing from an empty target cache"),t.targetCount-=1,n.saveMetadata(e,t)})},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return Et(e).iterate(function(a,s){var u=r.serializer.fromDbTarget(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(e,u)))}).next(function(){return tt.waitFor(o)}).next(function(){return i})},e.prototype.forEachTarget=function(e,t){var n=this;return Et(e).iterate(function(e,r){var i=n.serializer.fromDbTarget(r);t(i)})},e.prototype.retrieveMetadata=function(e){return Ot(e.simpleDbTransaction)},e.prototype.saveMetadata=function(e,t){return Ct(e).put(Pn.key,t)},e.prototype.saveTargetData=function(e,t){return Et(e).put(this.serializer.toDbTarget(t))},e.prototype.updateMetadataFromTargetData=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.getTargetCount=function(e){return this.retrieveMetadata(e).next(function(e){return e.targetCount})},e.prototype.getTargetData=function(e,t){var n=this,r=t.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Et(e).iterate({range:i,index:Rn.queryTargetsIndexName},function(e,r,i){var a=n.serializer.fromDbTarget(r);t.isEqual(a.target)&&(o=a,i.done())}).next(function(){return o})},e.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=It(e);return t.forEach(function(t){var a=De(t.path);i.push(o.put(new Ln(n,a))),i.push(r.referenceDelegate.addReference(e,t))}),tt.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=It(e);return tt.forEach(t,function(t){var o=De(t.path);return tt.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,t)])})},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=It(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=It(e),i=Ye();return r.iterate({range:n,keysOnly:!0},function(e,t,n){var r=Me(e[1]),o=new Te(r);i=i.add(o)}).next(function(){return i})},e.prototype.containsKey=function(e,t){var n=De(t.path),r=IDBKeyRange.bound([n],[ae(n)],!1,!0),i=0;return It(e).iterate({index:Ln.documentTargetsIndex,keysOnly:!0,range:r},function(e,t,n){var r=e[0];e[1];0!==r&&(i++,n.done())}).next(function(){return i>0})},e.prototype.getTargetDataForTarget=function(e,t){var n=this;return Et(e).get(t).next(function(e){return e?n.serializer.fromDbTarget(e):null})},e}();function Et(e){return Tr.getStore(e,Rn.store)}function Ct(e){return Tr.getStore(e,Pn.store)}function Ot(e){var t=it.getStore(e,Pn.store);return t.get(Pn.key).next(function(e){return w(null!==e,"Missing metadata row."),e})}function _t(e){return Ot(e).next(function(e){return e.highestListenSequenceNumber})}function It(e){return Tr.getStore(e,Ln.store)}var kt,Dt=function(){function e(e){this.fields=e}return e.fromSet=function(t){return new e(t)},e.fromArray=function(t){var n=new qe(be.comparator);return t.forEach(function(e){return n=n.add(e)}),new e(n)},e.prototype.covers=function(e){var t=!1;return this.fields.forEach(function(n){n.isPrefixOf(e)&&(t=!0)}),t},e.prototype.isEqual=function(e){return this.fields.isEqual(e.fields)},e}(),At=function(){function e(e,t){this.field=e,this.transform=t}return e.prototype.isEqual=function(e){return this.field.isEqual(e.field)&&this.transform.isEqual(e.transform)},e}(),Ft=function(){function e(e,t){this.version=e,this.transformResults=t}return e}();(function(e){e[e["Set"]=0]="Set",e[e["Patch"]=1]="Patch",e[e["Transform"]=2]="Transform",e[e["Delete"]=3]="Delete"})(kt||(kt={}));var Mt,Nt,Rt=function(){function e(e,t){this.updateTime=e,this.exists=t,w(void 0===e||void 0===t,'Precondition can specify "exists" or "updateTime" but not both')}return e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),e.prototype.isValidFor=function(e){return void 0!==this.updateTime?e instanceof on&&e.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===e instanceof on:(w(this.isNone,"Precondition should be empty"),!0)},e.prototype.isEqual=function(e){return ie(this.updateTime,e.updateTime)&&this.exists===e.exists},e.NONE=new e,e}(),Lt=function(){function e(){}return e.prototype.verifyKeyMatches=function(e){null!=e&&w(e.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},e.getPostMutationVersion=function(e){return e instanceof on?e.version:Re.MIN},e}(),Pt=function(e){function t(t,n,r){var i=e.call(this)||this;return i.key=t,i.value=n,i.precondition=r,i.type=kt.Set,i}return a.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){this.verifyKeyMatches(e),w(null==t.transformResults,"Transform results received by SetMutation.");var n=t.version;return new on(this.key,n,{hasCommittedMutations:!0},this.value)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=Lt.getPostMutationVersion(e);return new on(this.key,r,{hasLocalMutations:!0},this.value)},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.value.isEqual(e.value)&&this.precondition.isEqual(e.precondition)},t}(Lt),xt=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.key=t,o.data=n,o.fieldMask=r,o.precondition=i,o.type=kt.Patch,o}return a.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),w(null==t.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(e))return new sn(this.key,t.version);var n=this.patchDocument(e);return new on(this.key,t.version,{hasCommittedMutations:!0},n)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=Lt.getPostMutationVersion(e),i=this.patchDocument(e);return new on(this.key,r,{hasLocalMutations:!0},i)},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.fieldMask.isEqual(e.fieldMask)&&this.precondition.isEqual(e.precondition)},t.prototype.patchDocument=function(e){var t;return t=e instanceof on?e.data():tn.EMPTY,this.patchObject(t)},t.prototype.patchObject=function(e){var t=this;return this.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e=null!==r?e.set(n,r):e.delete(n)}}),e},t}(Lt),Bt=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.fieldTransforms=n,r.type=kt.Transform,r.precondition=Rt.exists(!0),r}return a.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),w(null!=t.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(e))return new sn(this.key,t.version);var n=this.requireDocument(e),r=this.serverTransformResults(e,t.transformResults),i=t.version,o=this.transformObject(n.data(),r);return new on(this.key,i,{hasCommittedMutations:!0},o)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=this.requireDocument(e),i=this.localTransformResults(n,e,t),o=this.transformObject(r.data(),i);return new on(this.key,r.version,{hasLocalMutations:!0},o)},t.prototype.extractBaseValue=function(e){for(var t=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=e instanceof on?e.field(i.field):void 0,a=i.transform.computeBaseValue(o||null);null!=a&&(t=null==t?tn.EMPTY.set(i.field,a):t.set(i.field,a))}return t},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&oe(this.fieldTransforms,e.fieldTransforms)&&this.precondition.isEqual(e.precondition)},t.prototype.requireDocument=function(e){return w(e instanceof on,"Unknown MaybeDocument type "+e),w(e.key.isEqual(this.key),"Can only transform a document with the same key"),e},t.prototype.serverTransformResults=function(e,t){var n=[];w(this.fieldTransforms.length===t.length,"server transform result count ("+t.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<t.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;e instanceof on&&(a=e.field(i.field)),n.push(o.applyToRemoteDocument(a,t[r]))}return n},t.prototype.localTransformResults=function(e,t,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var a=o[i],s=a.transform,u=null;t instanceof on&&(u=t.field(a.field)),null===u&&n instanceof on&&(u=n.field(a.field)),r.push(s.applyToLocalView(u,e))}return r},t.prototype.transformObject=function(e,t){w(t.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n],i=r.field;e=e.set(i,t[n])}return e},t}(Lt),qt=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.precondition=n,r.type=kt.Delete,r}return a.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){return this.verifyKeyMatches(e),w(null==t.transformResults,"Transform results received by DeleteMutation."),new an(this.key,t.version,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){return this.verifyKeyMatches(e),this.precondition.isValidFor(e)?(e&&w(e.key.isEqual(this.key),"Can only apply mutation to document with same key"),new an(this.key,Re.forDeletedDoc())):e},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.precondition.isEqual(e.precondition)},t}(Lt);(function(e){e[e["NullValue"]=0]="NullValue",e[e["BooleanValue"]=1]="BooleanValue",e[e["NumberValue"]=2]="NumberValue",e[e["TimestampValue"]=3]="TimestampValue",e[e["StringValue"]=4]="StringValue",e[e["BlobValue"]=5]="BlobValue",e[e["RefValue"]=6]="RefValue",e[e["GeoPointValue"]=7]="GeoPointValue",e[e["ArrayValue"]=8]="ArrayValue",e[e["ObjectValue"]=9]="ObjectValue"})(Mt||(Mt={})),function(e){e[e["Default"]=0]="Default",e[e["Estimate"]=1]="Estimate",e[e["Previous"]=2]="Previous"}(Nt||(Nt={}));var Ut=function(){function e(e,t){this.serverTimestampBehavior=e,this.timestampsInSnapshots=t}return e.fromSnapshotOptions=function(t,n){switch(t.serverTimestamps){case"estimate":return new e(Nt.Estimate,n);case"previous":return new e(Nt.Previous,n);case"none":case void 0:return new e(Nt.Default,n);default:return v("fromSnapshotOptions() called with invalid options.")}},e}(),Vt=function(){function e(){}return e.prototype.toString=function(){var e=this.value();return null===e?"null":e.toString()},e.prototype.defaultCompareTo=function(e){w(this.typeOrder!==e.typeOrder,"Default compareTo should not be used for values of same type.");var t=re(this.typeOrder,e.typeOrder);return t},e}(),jt=function(e){function t(){var t=e.call(this)||this;return t.typeOrder=Mt.NullValue,t.internalValue=null,t}return a.__extends(t,e),t.prototype.value=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t},t.prototype.compareTo=function(e){return e instanceof t?0:this.defaultCompareTo(e)},t.INSTANCE=new t,t}(Vt),Wt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Mt.BooleanValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?re(this,e):this.defaultCompareTo(e)},t.of=function(e){return e?t.TRUE:t.FALSE},t.TRUE=new t(!0),t.FALSE=new t(!1),t}(Vt),Kt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Mt.NumberValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.compareTo=function(e){return e instanceof t?Gt(this.internalValue,e.internalValue):this.defaultCompareTo(e)},t}(Vt);function Gt(e,t){return e<t?-1:e>t?1:e===t?0:isNaN(e)?isNaN(t)?0:-1:1}function zt(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}var Qt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.isEqual=function(e){return e instanceof t&&zt(this.internalValue,e.internalValue)},t}(Kt),Ht=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.isEqual=function(e){return e instanceof t&&zt(this.internalValue,e.internalValue)},t.NAN=new t(NaN),t.POSITIVE_INFINITY=new t(1/0),t.NEGATIVE_INFINITY=new t(-1/0),t}(Kt),Yt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Mt.StringValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?re(this.internalValue,e.internalValue):this.defaultCompareTo(e)},t}(Vt),Jt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Mt.TimestampValue,n}return a.__extends(t,e),t.prototype.value=function(e){return!e||e.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):e instanceof Xt?-1:this.defaultCompareTo(e)},t}(Vt),Xt=function(e){function t(t,n){var r=e.call(this)||this;return r.localWriteTime=t,r.previousValue=n,r.typeOrder=Mt.TimestampValue,r}return a.__extends(t,e),t.prototype.value=function(e){return e&&e.serverTimestampBehavior===Nt.Estimate?new Jt(this.localWriteTime).value(e):e&&e.serverTimestampBehavior===Nt.Previous&&this.previousValue?this.previousValue.value(e):null},t.prototype.isEqual=function(e){return e instanceof t&&this.localWriteTime.isEqual(e.localWriteTime)},t.prototype.compareTo=function(e){return e instanceof t?this.localWriteTime._compareTo(e.localWriteTime):e instanceof Jt?1:this.defaultCompareTo(e)},t.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},t}(Vt),$t=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Mt.BlobValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(Vt),Zt=function(e){function t(t,n){var r=e.call(this)||this;return r.databaseId=t,r.key=n,r.typeOrder=Mt.RefValue,r}return a.__extends(t,e),t.prototype.value=function(e){return this.key},t.prototype.isEqual=function(e){return e instanceof t&&(this.key.isEqual(e.key)&&this.databaseId.isEqual(e.databaseId))},t.prototype.compareTo=function(e){if(e instanceof t){var n=this.databaseId.compareTo(e.databaseId);return 0!==n?n:Te.comparator(this.key,e.key)}return this.defaultCompareTo(e)},t}(Vt),en=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Mt.GeoPointValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(Vt),tn=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Mt.ObjectValue,n}return a.__extends(t,e),t.prototype.value=function(e){var t={};return this.internalValue.inorderTraversal(function(n,r){t[n]=r.value(e)}),t},t.prototype.forEach=function(e){this.internalValue.inorderTraversal(e)},t.prototype.isEqual=function(e){if(e instanceof t){var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();while(n.hasNext()&&r.hasNext()){var i=n.getNext(),o=r.getNext();if(i.key!==o.key||!i.value.isEqual(o.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},t.prototype.compareTo=function(e){if(e instanceof t){var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();while(n.hasNext()&&r.hasNext()){var i=n.getNext(),o=r.getNext(),a=re(i.key,o.key)||i.value.compareTo(o.value);if(a)return a}return re(n.hasNext(),r.hasNext())}return this.defaultCompareTo(e)},t.prototype.set=function(e,n){if(w(!e.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===e.length)return this.setChild(e.firstSegment(),n);var r=this.child(e.firstSegment());r instanceof t||(r=t.EMPTY);var i=r.set(e.popFirst(),n);return this.setChild(e.firstSegment(),i)},t.prototype.delete=function(e){if(w(!e.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===e.length)return new t(this.internalValue.remove(e.firstSegment()));var n=this.child(e.firstSegment());if(n instanceof t){var r=n.delete(e.popFirst());return new t(this.internalValue.insert(e.firstSegment(),r))}return this},t.prototype.contains=function(e){return null!==this.field(e)},t.prototype.field=function(e){w(!e.isEmpty(),"Can't get field of empty path");var n=this;return e.forEach(function(e){n=n instanceof t?n.internalValue.get(e):null}),n},t.prototype.fieldMask=function(){var e=new qe(be.comparator);return this.internalValue.forEach(function(n,r){var i=new be([n]);if(r instanceof t){var o=r.fieldMask(),a=o.fields;a.isEmpty()?e=e.add(i):a.forEach(function(t){e=e.add(i.child(t))})}else e=e.add(i)}),Dt.fromSet(e)},t.prototype.toString=function(){return this.internalValue.toString()},t.prototype.child=function(e){return this.internalValue.get(e)||void 0},t.prototype.setChild=function(e,n){return new t(this.internalValue.insert(e,n))},t.EMPTY=new t(new Le(re)),t}(Vt),nn=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Mt.ArrayValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue.map(function(t){return t.value(e)})},t.prototype.contains=function(e){for(var t=0,n=this.internalValue;t<n.length;t++){var r=n[t];if(r.isEqual(e))return!0}return!1},t.prototype.forEach=function(e){this.internalValue.forEach(e)},t.prototype.isEqual=function(e){if(e instanceof t){if(this.internalValue.length!==e.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(e.internalValue[n]))return!1;return!0}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=Math.min(this.internalValue.length,e.internalValue.length),r=0;r<n;r++){var i=this.internalValue[r].compareTo(e.internalValue[r]);if(i)return i}return re(this.internalValue.length,e.internalValue.length)}return this.defaultCompareTo(e)},t.prototype.toString=function(){var e=this.internalValue.map(function(e){return e.toString()});return"["+e.join(",")+"]"},t}(Vt),rn=function(){function e(e,t){this.key=e,this.version=t}return e.compareByKey=function(e,t){return Te.comparator(e.key,t.key)},e}(),on=function(e){function t(t,n,r,i,o,a){var s=e.call(this,t,n)||this;return s.objectValue=i,s.proto=o,s.converter=a,w(void 0!==s.objectValue||void 0!==s.proto&&void 0!==s.converter,"If objectValue is not defined, proto and converter need to be set."),s.hasLocalMutations=!!r.hasLocalMutations,s.hasCommittedMutations=!!r.hasCommittedMutations,s}return a.__extends(t,e),t.prototype.field=function(e){if(this.objectValue)return this.objectValue.field(e);this.fieldValueCache||(this.fieldValueCache=new Map);var t=e.canonicalString(),n=this.fieldValueCache.get(t);if(void 0===n){var r=this.getProtoField(e);n=void 0===r?null:this.converter(r),this.fieldValueCache.set(t,n)}return n},t.prototype.data=function(){var e=this;if(!this.objectValue){var t=tn.EMPTY;D(this.proto.fields||{},function(n,r){t=t.set(new be([n]),e.converter(r))}),this.objectValue=t,this.fieldValueCache=void 0}return this.objectValue},t.prototype.value=function(){return this.data().value()},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.hasLocalMutations===e.hasLocalMutations&&this.hasCommittedMutations===e.hasCommittedMutations&&this.data().isEqual(e.data())},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.prototype.getProtoField=function(e){w(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var t=this.proto.fields?this.proto.fields[e.firstSegment()]:void 0,n=1;n<e.length;++n){if(!t||!t.mapValue||!t.mapValue.fields)return;t=t.mapValue.fields[e.get(n)]}return t},t.compareByField=function(e,t,n){var r=t.field(e),i=n.field(e);return null!==r&&null!==i?r.compareTo(i):v("Trying to compare documents on fields that don't exist")},t}(rn),an=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return a.__extends(t,e),t.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.hasCommittedMutations===this.hasCommittedMutations&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(rn),sn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(rn),un=function(){function e(e){this.mapKeyFn=e,this.inner={}}return e.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(a.isEqual(e))return s}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){D(this.inner,function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];e(a,s)}})},e.prototype.isEmpty=function(){return A(this.inner)},e}(),cn=function(){function e(){this.changes=new un(function(e){return e.toString()}),this.changesApplied=!1}return Object.defineProperty(e.prototype,"readTime",{get:function(){return w(void 0!==this._readTime,"Read time is not set. All removeEntry() calls must include a readTime if `trackRemovals` is used."),this._readTime},set:function(e){w(void 0===this._readTime||this._readTime.isEqual(e),"All changes in a RemoteDocumentChangeBuffer must have the same read time"),this._readTime=e},enumerable:!0,configurable:!0}),e.prototype.addEntry=function(e,t){this.assertNotApplied(),this.readTime=t,this.changes.set(e.key,e)},e.prototype.removeEntry=function(e,t){this.assertNotApplied(),t&&(this.readTime=t),this.changes.set(e,null)},e.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?tt.resolve(n):this.getFromCache(e,t)},e.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},e.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},e.prototype.assertNotApplied=function(){w(!this.changesApplied,"Changes have already been applied.")},e}(),ln=function(){function e(e,t){this.serializer=e,this.indexManager=t}return e.prototype.addEntry=function(e,t,n){var r=hn(e);return r.put(fn(t),n)},e.prototype.removeEntry=function(e,t){var n=hn(e),r=fn(t);return n.delete(r)},e.prototype.updateMetadata=function(e,t){var n=this;return this.getMetadata(e).next(function(r){return r.byteSize+=t,n.setMetadata(e,r)})},e.prototype.getEntry=function(e,t){var n=this;return hn(e).get(fn(t)).next(function(e){return n.maybeDecodeDocument(e)})},e.prototype.getSizedEntry=function(e,t){var n=this;return hn(e).get(fn(t)).next(function(e){var t=n.maybeDecodeDocument(e);return t?{maybeDocument:t,size:pn(e)}:null})},e.prototype.getEntries=function(e,t){var n=this,r=We();return this.forEachDbEntry(e,t,function(e,t){var i=n.maybeDecodeDocument(t);r=r.insert(e,i)}).next(function(){return r})},e.prototype.getSizedEntries=function(e,t){var n=this,r=We(),i=new Le(Te.comparator);return this.forEachDbEntry(e,t,function(e,t){var o=n.maybeDecodeDocument(t);o?(r=r.insert(e,o),i=i.insert(e,pn(t))):(r=r.insert(e,null),i=i.insert(e,0))}).next(function(){return{maybeDocuments:r,sizeMap:i}})},e.prototype.forEachDbEntry=function(e,t,n){if(t.isEmpty())return tt.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return hn(e).iterate({range:r},function(e,t,r){var a=Te.fromSegments(e);while(o&&Te.comparator(o,a)<0)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.skip(o.path.toArray()):r.done()}).next(function(){while(o)n(o,null),o=i.hasNext()?i.getNext():null})},e.prototype.getDocumentsMatchingQuery=function(e,t,n){var r=this;w(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var i=Ge(),o=t.path.length+1,a={};if(n.isEqual(Re.MIN)){var s=t.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=t.path.toArray(),c=this.serializer.toDbTimestampKey(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=Fn.collectionReadTimeIndex}return hn(e).iterate(a,function(e,n,a){if(e.length===o){var s=r.serializer.fromDbRemoteDocument(n);t.path.isPrefixOf(s.key.path)?s instanceof on&&t.matches(s)&&(i=i.insert(s.key,s)):a.done()}}).next(function(){return i})},e.prototype.getNewDocumentChanges=function(e,t){var n=this,r=je(),i=this.serializer.toDbTimestampKey(t),o=hn(e),a=IDBKeyRange.lowerBound(i,!0);return o.iterate({index:Fn.readTimeIndex,range:a},function(e,t){var o=n.serializer.fromDbRemoteDocument(t);r=r.insert(o.key,o),i=t.readTime}).next(function(){return{changedDocs:r,readTime:n.serializer.fromDbTimestampKey(i)}})},e.prototype.getLastDocumentChange=function(e){var t,n=this,r=hn(e),i=Re.MIN;return r.iterate({index:Fn.readTimeIndex,reverse:!0},function(e,r,o){t=n.serializer.fromDbRemoteDocument(r),r.readTime&&(i=n.serializer.fromDbTimestampKey(r.readTime)),o.done()}).next(function(){return{changedDoc:t,readTime:i}})},e.prototype.newChangeBuffer=function(t){return new e.RemoteDocumentChangeBuffer(this,!!t&&t.trackRemovals)},e.prototype.getSize=function(e){return this.getMetadata(e).next(function(e){return e.byteSize})},e.prototype.getMetadata=function(e){return dn(e).get(Mn.key).next(function(e){return w(!!e,"Missing document cache metadata"),e})},e.prototype.setMetadata=function(e,t){return dn(e).put(Mn.key,t)},e.prototype.maybeDecodeDocument=function(e){if(e){var t=this.serializer.fromDbRemoteDocument(e);return t instanceof an&&t.version.isEqual(Re.forDeletedDoc())?null:t}return null},e.RemoteDocumentChangeBuffer=function(e){function t(t,n){var r=e.call(this)||this;return r.documentCache=t,r.trackRemovals=n,r.documentSizes=new un(function(e){return e.toString()}),r}return a.__extends(t,e),t.prototype.applyChanges=function(e){var t=this,n=[],r=0,i=new qe(function(e,t){return re(e.canonicalString(),t.canonicalString())});return this.changes.forEach(function(o,a){var s=t.documentSizes.get(o);if(w(void 0!==s,"Cannot modify a document that wasn't read (for "+o+")"),a){w(!t.readTime.isEqual(Re.MIN),"Cannot add a document with a read time of zero");var u=t.documentCache.serializer.toDbRemoteDocument(a,t.readTime);i=i.add(o.path.popLast());var c=pn(u);r+=c-s,n.push(t.documentCache.addEntry(e,o,u))}else if(r-=s,t.trackRemovals){var l=t.documentCache.serializer.toDbRemoteDocument(new an(o,Re.forDeletedDoc()),t.readTime);n.push(t.documentCache.addEntry(e,o,l))}else n.push(t.documentCache.removeEntry(e,o))}),i.forEach(function(r){n.push(t.documentCache.indexManager.addToCollectionParentIndex(e,r))}),n.push(this.documentCache.updateMetadata(e,r)),tt.waitFor(n)},t.prototype.getFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntry(e,t).next(function(e){return null===e?(n.documentSizes.set(t,0),null):(n.documentSizes.set(t,e.size),e.maybeDocument)})},t.prototype.getAllFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntries(e,t).next(function(e){var t=e.maybeDocuments,r=e.sizeMap;return r.forEach(function(e,t){n.documentSizes.set(e,t)}),t})},t}(cn),e}();function dn(e){return Tr.getStore(e,Mn.store)}function hn(e){return Tr.getStore(e,Fn.store)}function fn(e){return e.path.toArray()}function pn(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw v("Unknown remote document type");t=e.noDocument}return JSON.stringify(t).length}var mn=function(){function e(){this.collectionParentIndex=new gn}return e.prototype.addToCollectionParentIndex=function(e,t){return this.collectionParentIndex.add(t),tt.resolve()},e.prototype.getCollectionParents=function(e,t){return tt.resolve(this.collectionParentIndex.getEntries(t))},e}(),gn=function(){function e(){this.index={}}return e.prototype.add=function(e){w(e.length%2===1,"Expected a collection path.");var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new qe(ve.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},e.prototype.has=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)},e.prototype.getEntries=function(e){var t=this.index[e]||new qe(ve.comparator);return t.toArray()},e}(),yn=9,vn=function(){function e(e){this.serializer=e}return e.prototype.createOrUpgrade=function(e,t,n,r){var i=this;w(n<r&&n>=0&&r<=yn,"Unexpected schema upgrade from v"+n+" to v{toVersion}.");var o=new at(t);n<1&&r>=1&&(Sn(e),On(e),Bn(e),kn(e));var a=tt.resolve();return n<3&&r>=3&&(0!==n&&(qn(e),Bn(e)),a=a.next(function(){return Vn(o)})),n<4&&r>=4&&(0!==n&&(a=a.next(function(){return _n(e,o)})),a=a.next(function(){Kn(e)})),n<5&&r>=5&&(a=a.next(function(){return i.removeAcknowledgedMutations(o)})),n<6&&r>=6&&(a=a.next(function(){return Nn(e),i.addDocumentGlobal(o)})),n<7&&r>=7&&(a=a.next(function(){return i.ensureSequenceNumbers(o)})),n<8&&r>=8&&(a=a.next(function(){return i.createCollectionParentIndex(e,o)})),n<9&&r>=9&&(a=a.next(function(){Un(e),jn(t)})),a},e.prototype.addDocumentGlobal=function(e){var t=0;return e.store(Fn.store).iterate(function(e,n){t+=pn(n)}).next(function(){var n=new Mn(t);return e.store(Mn.store).put(Mn.key,n)})},e.prototype.removeAcknowledgedMutations=function(e){var t=this,n=e.store(En.store),r=e.store(Cn.store);return n.loadAll().next(function(n){return tt.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,$e],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(Cn.userMutationsIndex,i).next(function(r){return tt.forEach(r,function(r){w(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=t.serializer.fromDbMutationBatch(r);return pt(e,n.userId,i).next(function(){})})})})})},e.prototype.ensureSequenceNumbers=function(e){var t=e.store(Ln.store),n=e.store(Fn.store);return _t(e).next(function(e){var r=function(n){return t.put(new Ln(0,De(n),e))},i=[];return n.iterate(function(e,n){var o=new ve(e),a=wn(o);i.push(t.get(a).next(function(e){return e?tt.resolve():r(o)}))}).next(function(){return tt.waitFor(i)})})},e.prototype.createCollectionParentIndex=function(e,t){e.createObjectStore(xn.store,{keyPath:xn.keyPath});var n=t.store(xn.store),r=new gn,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:De(i)})}};return t.store(Fn.store).iterate({keysOnly:!0},function(e,t){var n=new ve(e);return i(n.popLast())}).next(function(){return t.store(In.store).iterate({keysOnly:!0},function(e,t){e[0];var n=e[1],r=(e[2],Me(n));return i(r.popLast())})})},e}();function wn(e){return[0,De(e)]}var bn=function(){function e(e,t){this.seconds=e,this.nanoseconds=t}return e}(),Tn=function(){function e(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}return e.store="owner",e.key="owner",e}();function Sn(e){e.createObjectStore(Tn.store)}var En=function(){function e(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}return e.store="mutationQueues",e.keyPath="userId",e}(),Cn=function(){function e(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}return e.store="mutations",e.keyPath="batchId",e.userMutationsIndex="userMutationsIndex",e.userMutationsKeyPath=["userId","batchId"],e}();function On(e){e.createObjectStore(En.store,{keyPath:En.keyPath});var t=e.createObjectStore(Cn.store,{keyPath:Cn.keyPath,autoIncrement:!0});t.createIndex(Cn.userMutationsIndex,Cn.userMutationsKeyPath,{unique:!0}),e.createObjectStore(In.store)}function _n(e,t){var n=t.store(Cn.store);return n.loadAll().next(function(n){e.deleteObjectStore(Cn.store);var r=e.createObjectStore(Cn.store,{keyPath:Cn.keyPath,autoIncrement:!0});r.createIndex(Cn.userMutationsIndex,Cn.userMutationsKeyPath,{unique:!0});var i=t.store(Cn.store),o=n.map(function(e){return i.put(e)});return tt.waitFor(o)})}var In=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,De(t)]},e.key=function(e,t,n){return[e,De(t),n]},e.store="documentMutations",e.PLACEHOLDER=new e,e}();function kn(e){e.createObjectStore(Fn.store)}var Dn=function(){function e(e,t){this.path=e,this.readTime=t}return e}(),An=function(){function e(e,t){this.path=e,this.version=t}return e}(),Fn=function(){function e(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o}return e.store="remoteDocuments",e.readTimeIndex="readTimeIndex",e.readTimeIndexPath="readTime",e.collectionReadTimeIndex="collectionReadTimeIndex",e.collectionReadTimeIndexPath=["parentPath","readTime"],e}(),Mn=function(){function e(e){this.byteSize=e}return e.store="remoteDocumentGlobal",e.key="remoteDocumentGlobalKey",e}();function Nn(e){e.createObjectStore(Mn.store)}var Rn=function(){function e(e,t,n,r,i,o,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a}return e.store="targets",e.keyPath="targetId",e.queryTargetsIndexName="queryTargetsIndex",e.queryTargetsKeyPath=["canonicalId","targetId"],e}(),Ln=function(){function e(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n,w(0===e===(void 0!==n),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return e.store="targetDocuments",e.keyPath=["targetId","path"],e.documentTargetsIndex="documentTargetsIndex",e.documentTargetsKeyPath=["path","targetId"],e}(),Pn=function(){function e(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return e.key="targetGlobalKey",e.store="targetGlobal",e}(),xn=function(){function e(e,t){this.collectionId=e,this.parent=t}return e.store="collectionParents",e.keyPath=["collectionId","parent"],e}();function Bn(e){var t=e.createObjectStore(Ln.store,{keyPath:Ln.keyPath});t.createIndex(Ln.documentTargetsIndex,Ln.documentTargetsKeyPath,{unique:!0});var n=e.createObjectStore(Rn.store,{keyPath:Rn.keyPath});n.createIndex(Rn.queryTargetsIndexName,Rn.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Pn.store)}function qn(e){e.deleteObjectStore(Ln.store),e.deleteObjectStore(Rn.store),e.deleteObjectStore(Pn.store)}function Un(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}function Vn(e){var t=e.store(Pn.store),n=new Pn(0,0,Re.MIN.toTimestamp(),0);return t.put(Pn.key,n)}function jn(e){var t=e.objectStore(Fn.store);t.createIndex(Fn.readTimeIndex,Fn.readTimeIndexPath,{unique:!1}),t.createIndex(Fn.collectionReadTimeIndex,Fn.collectionReadTimeIndexPath,{unique:!1})}var Wn=function(){function e(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r}return e.store="clientMetadata",e.keyPath="clientId",e}();function Kn(e){e.createObjectStore(Wn.store,{keyPath:Wn.keyPath})}var Gn,zn=[En.store,Cn.store,In.store,Fn.store,Rn.store,Tn.store,Pn.store,Ln.store],Qn=zn,Hn=a.__spreadArrays(Qn,[Wn.store]),Yn=a.__spreadArrays(Hn,[Mn.store]),Jn=a.__spreadArrays(Yn,[xn.store]),Xn=Jn,$n=function(){function e(){this.collectionParentsCache=new gn}return e.prototype.addToCollectionParentIndex=function(e,t){var n=this;if(w(t.length%2===1,"Expected a collection path."),!this.collectionParentsCache.has(t)){var r=t.lastSegment(),i=t.popLast();return e.addOnCommittedListener(function(){n.collectionParentsCache.add(t)}),Zn(e).put({collectionId:r,parent:De(i)})}return tt.resolve()},e.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[ae(t),""],!1,!0);return Zn(e).loadAll(r).next(function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(Me(o.parent))}return n})},e}();function Zn(e){return Tr.getStore(e,xn.store)}(function(e){e[e["Listen"]=0]="Listen",e[e["ExistenceFilterMismatch"]=1]="ExistenceFilterMismatch",e[e["LimboResolution"]=2]="LimboResolution"})(Gn||(Gn={}));var er=function(){function e(e,t,n,r,i,o,a){void 0===i&&(i=Re.MIN),void 0===o&&(o=Re.MIN),void 0===a&&(a=T()),this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return e.prototype.withSequenceNumber=function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.withLastLimboFreeSnapshotVersion=function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},e.prototype.isEqual=function(e){return this.targetId===e.targetId&&this.purpose===e.purpose&&this.sequenceNumber===e.sequenceNumber&&this.snapshotVersion.isEqual(e.snapshotVersion)&&this.lastLimboFreeSnapshotVersion.isEqual(e.lastLimboFreeSnapshotVersion)&&this.resumeToken===e.resumeToken&&this.target.isEqual(e.target)},e}(),tr=function(){function e(e){this.remoteSerializer=e}return e.prototype.fromDbRemoteDocument=function(e){if(e.document)return this.remoteSerializer.fromDocument(e.document,!!e.hasCommittedMutations);if(e.noDocument){var t=Te.fromSegments(e.noDocument.path),n=this.fromDbTimestamp(e.noDocument.readTime);return new an(t,n,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){t=Te.fromSegments(e.unknownDocument.path),n=this.fromDbTimestamp(e.unknownDocument.version);return new sn(t,n)}return v("Unexpected DbRemoteDocument")},e.prototype.toDbRemoteDocument=function(e,t){var n=this.toDbTimestampKey(t),r=e.key.path.popLast().toArray();if(e instanceof on){var i=e.proto?e.proto:this.remoteSerializer.toDocument(e),o=e.hasCommittedMutations;return new Fn(null,null,i,o,n,r)}if(e instanceof an){var a=e.key.path.toArray(),s=this.toDbTimestamp(e.version);o=e.hasCommittedMutations;return new Fn(null,new Dn(a,s),null,o,n,r)}if(e instanceof sn){a=e.key.path.toArray();var u=this.toDbTimestamp(e.version);return new Fn(new An(a,u),null,null,!0,n,r)}return v("Unexpected MaybeDocument")},e.prototype.toDbTimestampKey=function(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]},e.prototype.fromDbTimestampKey=function(e){var t=new Ne(e[0],e[1]);return Re.fromTimestamp(t)},e.prototype.toDbTimestamp=function(e){var t=e.toTimestamp();return new bn(t.seconds,t.nanoseconds)},e.prototype.fromDbTimestamp=function(e){var t=new Ne(e.seconds,e.nanoseconds);return Re.fromTimestamp(t)},e.prototype.toDbMutationBatch=function(e,t){var n=this,r=t.baseMutations.map(function(e){return n.remoteSerializer.toMutation(e)}),i=t.mutations.map(function(e){return n.remoteSerializer.toMutation(e)});return new Cn(e,t.batchId,t.localWriteTime.toMillis(),r,i)},e.prototype.fromDbMutationBatch=function(e){var t=this,n=(e.baseMutations||[]).map(function(e){return t.remoteSerializer.fromMutation(e)}),r=e.mutations.map(function(e){return t.remoteSerializer.fromMutation(e)}),i=Ne.fromMillis(e.localWriteTimeMs);return new Ze(e.batchId,i,n,r)},e.prototype.toDbResourcePaths=function(e){var t=[];return e.forEach(function(e){t.push(De(e.path))}),t},e.prototype.fromDbResourcePaths=function(e){for(var t=Ye(),n=0,r=e;n<r.length;n++){var i=r[n];t=t.add(new Te(Me(i)))}return t},e.prototype.fromDbTarget=function(e){var t,n=this.fromDbTimestamp(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?this.fromDbTimestamp(e.lastLimboFreeSnapshotVersion):Re.MIN,i=e.resumeToken;return t=nr(e.query)?this.remoteSerializer.fromDocumentsTarget(e.query):this.remoteSerializer.fromQueryTarget(e.query),new er(t,e.targetId,Gn.Listen,e.lastListenSequenceNumber,n,r,i)},e.prototype.toDbTarget=function(e){w(Gn.Listen===e.purpose,"Only queries with purpose "+Gn.Listen+" may be stored, got "+e.purpose);var t,n,r=this.toDbTimestamp(e.snapshotVersion),i=this.toDbTimestamp(e.lastLimboFreeSnapshotVersion);return t=e.target.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(e.target):this.remoteSerializer.toQueryTarget(e.target),e.resumeToken instanceof Uint8Array?(w(it.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence ."),n=e.resumeToken.toString()):n=e.resumeToken,new Rn(e.targetId,e.target.canonicalId(),r,n,e.sequenceNumber,i,t)},e}();function nr(e){return void 0!==e.documents}function rr(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=re(n,i);return 0===a?re(r,o):a}var ir=function(){function e(e){this.maxElements=e,this.buffer=new qe(rr),this.previousIndex=0}return e.prototype.nextIndex=function(){return++this.previousIndex},e.prototype.addElement=function(e){var t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();rr(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),e}(),or={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ar=function(){function e(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e.COLLECTION_DISABLED=-1,e.MINIMUM_CACHE_SIZE_BYTES=1048576,e.DEFAULT_CACHE_SIZE_BYTES=41943040,e.DEFAULT_COLLECTION_PERCENTILE=10,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,e.DEFAULT=new e(e.DEFAULT_CACHE_SIZE_BYTES,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),e.DISABLED=new e(e.COLLECTION_DISABLED,0,0),e}(),sr=6e4,ur=3e5,cr=function(){function e(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.hasRun=!1,this.gcTask=null}return e.prototype.start=function(){w(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==ar.COLLECTION_DISABLED&&this.scheduleGC()},e.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(e.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),e.prototype.scheduleGC=function(){var e=this;w(null===this.gcTask,"Cannot schedule GC while a task is pending");var t=this.hasRun?ur:sr;m("LruGarbageCollector","Garbage collection scheduled in "+t+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(ce.LruGarbageCollection,t,function(){return e.gcTask=null,e.hasRun=!0,e.localStore.collectGarbage(e.garbageCollector).then(function(){return e.scheduleGC()}).catch(Er)})},e}(),lr=function(){function e(e,t){this.delegate=e,this.params=t}return e.prototype.calculateTargetCount=function(e,t){return this.delegate.getSequenceNumberCount(e).next(function(e){return Math.floor(t/100*e)})},e.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return tt.resolve(me.INVALID);var r=new ir(t);return this.delegate.forEachTarget(e,function(e){return r.addElement(e.sequenceNumber)}).next(function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(e,function(e){return r.addElement(e)})}).next(function(){return r.maxValue})},e.prototype.removeTargets=function(e,t,n){return this.delegate.removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){return this.delegate.removeOrphanedDocuments(e,t)},e.prototype.collect=function(e,t){var n=this;return this.params.cacheSizeCollectionThreshold===ar.COLLECTION_DISABLED?(m("LruGarbageCollector","Garbage collection skipped; disabled"),tt.resolve(or)):this.getCacheSize(e).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(m("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),or):n.runGarbageCollection(e,t)})},e.prototype.getCacheSize=function(e){return this.delegate.getCacheSize(e)},e.prototype.runGarbageCollection=function(e,t){var n,r,o,a,s,u,c,l=this,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(t){return t>l.params.maximumSequenceNumbersToCollect?(m("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+t),r=l.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),l.nthSequenceNumber(e,r)}).next(function(r){return n=r,s=Date.now(),l.removeTargets(e,n,t)}).next(function(t){return o=t,u=Date.now(),l.removeOrphanedDocuments(e,n)}).next(function(e){if(c=Date.now(),f()<=i.DEBUG){var t="LRU Garbage Collection\n\tCounted targets in "+(a-d)+"ms\n\tDetermined least recently used "+r+" in "+(s-a)+"ms\n\tRemoved "+o+" targets in "+(u-s)+"ms\n\tRemoved "+e+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-d)+"ms";m("LruGarbageCollector",t)}return tt.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:e})})},e}(),dr=function(){function e(){this.onCommittedListeners=[]}return e.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},e.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(e){return e()})},e}(),hr="IndexedDbPersistence",fr=18e5,pr=5e3,mr=4e3,gr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",yr="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",vr="This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.",wr="firestore_zombie",br=function(e){function t(t,n){var r=e.call(this)||this;return r.simpleDbTransaction=t,r.currentSequenceNumber=n,r}return a.__extends(t,e),t}(dr),Tr=function(){function e(t,n,r,i,o,a,s,u){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.queue=a,this.sequenceNumberSyncer=u,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(e){return Promise.resolve()},this.referenceDelegate=new _r(this,o),this.dbName=n+e.MAIN_DATABASE,this.serializer=new tr(s),this.document=i.document,this.targetCache=new St(this.referenceDelegate,this.serializer),this.indexManager=new $n,this.remoteDocumentCache=new ln(this.serializer,this.indexManager),!i.window||!i.window.localStorage)throw new E(S.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=i.window,this.webStorage=this.window.localStorage}return e.getStore=function(e,t){if(e instanceof br)return it.getStore(e.simpleDbTransaction,t);throw v("IndexedDbPersistence must use instances of IndexedDbTransaction")},e.createIndexedDbPersistence=function(t){return a.__awaiter(this,void 0,void 0,function(){var n;return a.__generator(this,function(r){switch(r.label){case 0:if(!e.isAvailable())throw new E(S.UNIMPLEMENTED,vr);return n=new e(t.allowTabSynchronization,t.persistenceKey,t.clientId,t.platform,t.lruParams,t.queue,t.serializer,t.sequenceNumberSyncer),[4,n.start()];case 1:return r.sent(),[2,n]}})})},e.prototype.start=function(){var e=this;return w(!this.started,"IndexedDbPersistence double-started!"),w(null!==this.window,"Expected 'window' to be defined"),it.openOrCreate(this.dbName,yn,new vn(this.serializer)).then(function(t){return e.simpleDb=t,e.updateClientMetadataAndTryBecomePrimary()}).then(function(){return e.attachVisibilityHandler(),e.attachWindowUnloadHook(),e.scheduleClientMetadataAndPrimaryLeaseRefreshes(),e.simpleDb.runTransaction("readonly-idempotent",[Pn.store],function(e){return _t(e)})}).then(function(t){e.listenSequence=new me(t,e.sequenceNumberSyncer)}).then(function(){e._started=!0}).catch(function(t){return e.simpleDb&&e.simpleDb.close(),Promise.reject(t)})},e.prototype.setPrimaryStateListener=function(e){var t=this;return this.primaryStateListener=function(n){return a.__awaiter(t,void 0,void 0,function(){return a.__generator(this,function(t){return this.started?[2,e(n)]:[2]})})},e(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(e){var t=this;this.simpleDb.setVersionChangeListener(function(n){return a.__awaiter(t,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return null!==n.newVersion?[3,2]:[4,e()];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},e.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.queue.enqueueAndForget(function(){return a.__awaiter(t,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})}))},e.prototype.updateClientMetadataAndTryBecomePrimary=function(){var e=this;return this.simpleDb.runTransaction("readwrite-idempotent",Xn,function(t){var n=Or(t);return n.put(new Wn(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next(function(){if(e.isPrimary)return e.verifyPrimaryLease(t).next(function(t){t||(e.isPrimary=!1,e.queue.enqueueAndForget(function(){return e.primaryStateListener(!1)}))})}).next(function(){return e.canActAsPrimary(t)}).next(function(n){return e.isPrimary&&!n?e.releasePrimaryLeaseIfHeld(t).next(function(){return!1}):!!n&&e.acquireOrExtendPrimaryLease(t).next(function(){return!0})})}).catch(function(t){if(!e.allowTabSynchronization)throw t;return m(hr,"Releasing owner lease after error during lease refresh",t),!1}).then(function(t){e.isPrimary!==t&&e.queue.enqueueAndForget(function(){return e.primaryStateListener(t)}),e.isPrimary=t})},e.prototype.verifyPrimaryLease=function(e){var t=this,n=Cr(e);return n.get(Tn.key).next(function(e){return tt.resolve(t.isLocalClient(e))})},e.prototype.removeClientMetadata=function(e){var t=Or(e);return t.delete(this.clientId)},e.prototype.maybeGarbageCollectMultiClientState=function(){return a.__awaiter(this,void 0,void 0,function(){var t,n=this;return a.__generator(this,function(r){switch(r.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,fr)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary-idempotent",function(t){var r=e.getStore(t,Wn.store);return r.loadAll().next(function(e){var t=n.filterActiveClients(e,fr),i=e.filter(function(e){return-1===t.indexOf(e)});return tt.forEach(i,function(e){return r.delete(e.clientId)}).next(function(){return i})})})]);case 1:t=r.sent(),t.forEach(function(e){n.window.localStorage.removeItem(n.zombiedClientLocalStorageKey(e.clientId))}),r.label=2;case 2:return[2]}})})},e.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var e=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(ce.ClientMetadataRefresh,mr,function(){return e.updateClientMetadataAndTryBecomePrimary().then(function(){return e.maybeGarbageCollectMultiClientState()}).then(function(){return e.scheduleClientMetadataAndPrimaryLeaseRefreshes()})})},e.prototype.isLocalClient=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.canActAsPrimary=function(e){var t=this,n=Cr(e);return n.get(Tn.key).next(function(n){var r=null!==n&&t.isWithinAge(n.leaseTimestampMs,pr)&&!t.isClientZombied(n.ownerId);if(r){if(t.isLocalClient(n)&&t.networkEnabled)return!0;if(!t.isLocalClient(n)){if(!n.allowTabSynchronization)throw new E(S.FAILED_PRECONDITION,yr);return!1}}return!(!t.networkEnabled||!t.inForeground)||Or(e).loadAll().next(function(e){var n=t.filterActiveClients(e,pr).find(function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1});return void 0===n})}).next(function(e){return t.isPrimary!==e&&m(hr,"Client "+(e?"is":"is not")+" eligible for a primary lease."),e})},e.prototype.shutdown=function(){return a.__awaiter(this,void 0,void 0,function(){var e=this;return a.__generator(this,function(t){switch(t.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite-idempotent",[Tn.store,Wn.store],function(t){return e.releasePrimaryLeaseIfHeld(t).next(function(){return e.removeClientMetadata(t)})})];case 1:return t.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}})})},e.prototype.filterActiveClients=function(e,t){var n=this;return e.filter(function(e){return n.isWithinAge(e.updateTimeMs,t)&&!n.isClientZombied(e.clientId)})},e.prototype.getActiveClients=function(){var e=this;return this.simpleDb.runTransaction("readonly-idempotent",[Wn.store],function(t){return Or(t).loadAll().next(function(t){return e.filterActiveClients(t,fr).map(function(e){return e.clientId})})})},e.clearPersistence=function(t){return a.__awaiter(this,void 0,void 0,function(){var n;return a.__generator(this,function(r){switch(r.label){case 0:return e.isAvailable()?(n=t+e.MAIN_DATABASE,[4,it.delete(n)]):[2,Promise.resolve()];case 1:return r.sent(),[2]}})})},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getMutationQueue=function(e){return w(this.started,"Cannot initialize MutationQueue before persistence is started."),dt.forUser(e,this.serializer,this.indexManager,this.referenceDelegate)},e.prototype.getTargetCache=function(){return w(this.started,"Cannot initialize TargetCache before persistence is started."),this.targetCache},e.prototype.getRemoteDocumentCache=function(){return w(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},e.prototype.getIndexManager=function(){return w(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},e.prototype.runTransaction=function(e,t,n){var r=this;m(hr,"Starting transaction:",e);var i,o=t.endsWith("idempotent"),a=t.startsWith("readonly"),s=a?o?"readonly-idempotent":"readonly":o?"readwrite-idempotent":"readwrite";return this.simpleDb.runTransaction(s,Xn,function(o){return i=new br(o,r.listenSequence.next()),"readwrite-primary"===t||"readwrite-primary-idempotent"===t?r.verifyPrimaryLease(o).next(function(e){return!!e||r.canActAsPrimary(o)}).next(function(t){if(!t)throw g("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.queue.enqueueAndForget(function(){return r.primaryStateListener(!1)}),new E(S.FAILED_PRECONDITION,gr);return n(i)}).next(function(e){return r.acquireOrExtendPrimaryLease(o).next(function(){return e})}):r.verifyAllowTabSynchronization(o).next(function(){return n(i)})}).then(function(e){return i.raiseOnCommittedEvent(),e})},e.prototype.verifyAllowTabSynchronization=function(e){var t=this,n=Cr(e);return n.get(Tn.key).next(function(e){var n=null!==e&&t.isWithinAge(e.leaseTimestampMs,pr)&&!t.isClientZombied(e.ownerId);if(n&&!t.isLocalClient(e)&&!e.allowTabSynchronization)throw new E(S.FAILED_PRECONDITION,yr)})},e.prototype.acquireOrExtendPrimaryLease=function(e){var t=new Tn(this.clientId,this.allowTabSynchronization,Date.now());return Cr(e).put(Tn.key,t)},e.isAvailable=function(){return it.isAvailable()},e.buildStoragePrefix=function(e){var t=e.databaseId.projectId;return e.databaseId.isDefaultDatabase||(t+="."+e.databaseId.database),"firestore/"+e.persistenceKey+"/"+t+"/"},e.prototype.releasePrimaryLeaseIfHeld=function(e){var t=this,n=Cr(e);return n.get(Tn.key).next(function(e){return t.isLocalClient(e)?(m(hr,"Releasing primary lease."),n.delete(Tn.key)):tt.resolve()})},e.prototype.isWithinAge=function(e,t){var n=Date.now(),r=n-t,i=n;return!(e<r)&&(!(e>i)||(g("Detected an update time that is in the future: "+e+" > "+i),!1))},e.prototype.attachVisibilityHandler=function(){var e=this;null!==this.document&&"function"===typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){e.queue.enqueueAndForget(function(){return e.inForeground="visible"===e.document.visibilityState,e.updateClientMetadataAndTryBecomePrimary()})},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},e.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(w(null!==this.document&&"function"===typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},e.prototype.attachWindowUnloadHook=function(){var e=this;"function"===typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){e.markClientZombied(),e.queue.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.windowUnloadHandler))},e.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(w("function"===typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},e.prototype.isClientZombied=function(e){try{var t=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(e));return m(hr,"Client '"+e+"' "+(t?"is":"is not")+" zombied in LocalStorage"),t}catch(e){return g(hr,"Failed to get zombied client id.",e),!1}},e.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(e){g("Failed to set zombie client id.",e)}},e.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(e){}},e.prototype.zombiedClientLocalStorageKey=function(e){return wr+"_"+this.persistenceKey+"_"+e},e.MAIN_DATABASE="main",e}();function Sr(e){return e.code===S.FAILED_PRECONDITION&&e.message===gr}function Er(e){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){if(!Sr(e))throw e;return m(hr,"Unexpectedly lost primary lease"),[2]})})}function Cr(e){return e.store(Tn.store)}function Or(e){return e.store(Wn.store)}var _r=function(){function e(e,t){this.db=e,this.inMemoryPins=null,this.garbageCollector=new lr(this,t)}return e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocmentCount(e),n=this.db.getTargetCache().getTargetCount(e);return n.next(function(e){return t.next(function(t){return e+t})})},e.prototype.orphanedDocmentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,function(e){t++}).next(function(){return t})},e.prototype.forEachTarget=function(e,t){return this.db.getTargetCache().forEachTarget(e,t)},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){return this.forEachOrphanedDocument(e,function(e,n){return t(n)})},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return Dr(e,t)},e.prototype.removeReference=function(e,t){return Dr(e,t)},e.prototype.removeTargets=function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)},e.prototype.removeMutationReference=function(e,t){return Dr(e,t)},e.prototype.isPinned=function(e,t){return this.inMemoryPins.containsKey(t)?tt.resolve(!0):ft(e,t)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache(),i=r.newChangeBuffer(),o=[],a=0,s=this.forEachOrphanedDocument(e,function(r,s){if(s<=t){var u=n.isPinned(e,r).next(function(t){if(!t)return a++,i.getEntry(e,r).next(function(){return i.removeEntry(r),It(e).delete(Ir(r))})});o.push(u)}});return s.next(function(){return tt.waitFor(o)}).next(function(){return i.apply(e)}).next(function(){return a})},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)},e.prototype.updateLimboDocument=function(e,t){return Dr(e,t)},e.prototype.forEachOrphanedDocument=function(e,t){var n,r=It(e),i=me.INVALID;return r.iterate({index:Ln.documentTargetsIndex},function(e,r){var o=e[0],a=(e[1],r.path),s=r.sequenceNumber;0===o?(i!==me.INVALID&&t(new Te(Me(n)),i),i=s,n=a):i=me.INVALID}).next(function(){i!==me.INVALID&&t(new Te(Me(n)),i)})},e.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},e}();function Ir(e){return[0,De(e.path)]}function kr(e,t){return new Ln(0,De(e.path),t)}function Dr(e,t){return It(e).put(kr(t,e.currentSequenceNumber))}var Ar=Number,Fr=Ar.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),Mr=Ar.MAX_SAFE_INTEGER||Math.pow(2,53)-1,Nr=Ar.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e};function Rr(e){return null===e||void 0===e}function Lr(e){return Nr(e)&&e<=Mr&&e>=Fr}var Pr,xr=function(){function e(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.memoizedCanonicalId=null}return e.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var e=this.path.canonicalString();null!==this.collectionGroup&&(e+="|cg:"+this.collectionGroup),e+="|f:";for(var t=0,n=this.filters;t<n.length;t++){var r=n[t];e+=r.canonicalId(),e+=","}e+="|ob:";for(var i=0,o=this.orderBy;i<o.length;i++){var a=o[i];e+=a.canonicalId(),e+=","}Rr(this.limit)||(e+="|l:",e+=this.limit),this.startAt&&(e+="|lb:",e+=this.startAt.canonicalId()),this.endAt&&(e+="|ub:",e+=this.endAt.canonicalId()),this.memoizedCanonicalId=e}return this.memoizedCanonicalId},e.prototype.toString=function(){var e=this.path.canonicalString();return null!==this.collectionGroup&&(e+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(e+=", filters: ["+this.filters.join(", ")+"]"),Rr(this.limit)||(e+=", limit: "+this.limit),this.orderBy.length>0&&(e+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(e+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(e+=", endAt: "+this.endAt.canonicalId()),"Target("+e+")"},e.prototype.isEqual=function(e){if(this.limit!==e.limit)return!1;if(this.orderBy.length!==e.orderBy.length)return!1;for(var t=0;t<this.orderBy.length;t++)if(!this.orderBy[t].isEqual(e.orderBy[t]))return!1;if(this.filters.length!==e.filters.length)return!1;for(t=0;t<this.filters.length;t++)if(!this.filters[t].isEqual(e.filters[t]))return!1;return this.collectionGroup===e.collectionGroup&&(!!this.path.isEqual(e.path)&&(!(null!==this.startAt?!this.startAt.isEqual(e.startAt):null!==e.startAt)&&(null!==this.endAt?this.endAt.isEqual(e.endAt):null===e.endAt)))},e.prototype.isDocumentQuery=function(){return Te.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},e}();(function(e){e["First"]="F",e["Last"]="L"})(Pr||(Pr={}));var Br=function(){function e(e,t,n,r,i,o,a,s){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=Pr.First),void 0===a&&(a=null),void 0===s&&(s=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.memoizedOrderBy=null,this.memoizedTarget=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return e.atPath=function(t){return new e(t)},Object.defineProperty(e.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var e=this.getInequalityFilterField(),t=this.getFirstOrderByField();if(null!==e&&null===t)e.isKeyField()?this.memoizedOrderBy=[Jr]:this.memoizedOrderBy=[new Yr(e),Jr];else{w(null===e||null!==t&&e.isEqual(t),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}if(!n){var a=this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:Qr.ASCENDING;this.memoizedOrderBy.push(a===Qr.ASCENDING?Jr:Xr)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),e.prototype.addFilter=function(t){w(null==this.getInequalityFilterField()||!(t instanceof Vr)||!t.isInequality()||t.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),w(!this.isDocumentQuery(),"No filtering allowed for document query");var n=this.filters.concat([t]);return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),n,this.limit,this.limitType,this.startAt,this.endAt)},e.prototype.addOrderBy=function(t){w(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([t]);return new e(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},e.prototype.withLimitToFirst=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),t,Pr.First,this.startAt,this.endAt)},e.prototype.withLimitToLast=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),t,Pr.Last,this.startAt,this.endAt)},e.prototype.withStartAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,t,this.endAt)},e.prototype.withEndAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,t)},e.prototype.asCollectionQueryAtPath=function(t){return new e(t,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},e.prototype.matchesAllDocuments=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.explicitOrderBy.length||1===this.explicitOrderBy.length&&this.explicitOrderBy[0].field.isKeyField())},e.prototype.canonicalId=function(){return this.toTarget().canonicalId()+"|lt:"+this.limitType},e.prototype.toString=function(){return"Query(target="+this.toTarget().toString()+"; limitType="+this.limitType+")"},e.prototype.isEqual=function(e){return this.toTarget().isEqual(e.toTarget())&&this.limitType===e.limitType},e.prototype.docComparator=function(e,t){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(e,t);if(0!==a)return a;n=n||o.field.isKeyField()}return w(n,"orderBy used that doesn't compare on key field"),0},e.prototype.matches=function(e){return this.matchesPathAndCollectionGroup(e)&&this.matchesOrderBy(e)&&this.matchesFilters(e)&&this.matchesBounds(e)},e.prototype.hasLimitToFirst=function(){return!Rr(this.limit)&&this.limitType===Pr.First},e.prototype.hasLimitToLast=function(){return!Rr(this.limit)&&this.limitType===Pr.Last},e.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},e.prototype.getInequalityFilterField=function(){for(var e=0,t=this.filters;e<t.length;e++){var n=t[e];if(n instanceof Vr&&n.isInequality())return n.field}return null},e.prototype.findFilterOperator=function(e){for(var t=0,n=this.filters;t<n.length;t++){var r=n[t];if(r instanceof Vr&&e.indexOf(r.op)>=0)return r.op}return null},e.prototype.isDocumentQuery=function(){return this.toTarget().isDocumentQuery()},e.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},e.prototype.toTarget=function(){if(!this.memoizedTarget)if(this.limitType===Pr.First)this.memoizedTarget=new xr(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var e=[],t=0,n=this.orderBy;t<n.length;t++){var r=n[t],i=r.dir===Qr.DESCENDING?Qr.ASCENDING:Qr.DESCENDING;e.push(new Yr(r.field,i))}var o=this.endAt?new Hr(this.endAt.position,!this.endAt.before):null,a=this.startAt?new Hr(this.startAt.position,!this.startAt.before):null;this.memoizedTarget=new xr(this.path,this.collectionGroup,e,this.filters,this.limit,o,a)}return this.memoizedTarget},e.prototype.matchesPathAndCollectionGroup=function(e){var t=e.key.path;return null!==this.collectionGroup?e.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(t):Te.isDocumentKey(this.path)?this.path.isEqual(t):this.path.isImmediateParentOf(t)},e.prototype.matchesOrderBy=function(e){for(var t=0,n=this.explicitOrderBy;t<n.length;t++){var r=n[t];if(!r.field.isKeyField()&&null===e.field(r.field))return!1}return!0},e.prototype.matchesFilters=function(e){for(var t=0,n=this.filters;t<n.length;t++){var r=n[t];if(!r.matches(e))return!1}return!0},e.prototype.matchesBounds=function(e){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,e))&&(!this.endAt||!this.endAt.sortsBeforeDocument(this.orderBy,e))},e.prototype.assertValidBound=function(e){w(e.position.length<=this.orderBy.length,"Bound is longer than orderBy")},e}(),qr=function(){function e(){}return e}(),Ur=function(){function e(e){this.name=e}return e.fromString=function(t){switch(t){case"<":return e.LESS_THAN;case"<=":return e.LESS_THAN_OR_EQUAL;case"==":return e.EQUAL;case">=":return e.GREATER_THAN_OR_EQUAL;case">":return e.GREATER_THAN;case"array-contains":return e.ARRAY_CONTAINS;case"in":return e.IN;case"array-contains-any":return e.ARRAY_CONTAINS_ANY;default:return v("Unknown FieldFilter operator: "+t)}},e.prototype.toString=function(){return this.name},e.prototype.isEqual=function(e){return this.name===e.name},e.LESS_THAN=new e("<"),e.LESS_THAN_OR_EQUAL=new e("<="),e.EQUAL=new e("=="),e.GREATER_THAN=new e(">"),e.GREATER_THAN_OR_EQUAL=new e(">="),e.ARRAY_CONTAINS=new e("array-contains"),e.IN=new e("in"),e.ARRAY_CONTAINS_ANY=new e("array-contains-any"),e}(),Vr=function(e){function t(t,n,r){var i=e.call(this)||this;return i.field=t,i.op=n,i.value=r,i}return a.__extends(t,e),t.create=function(e,n,r){if(e.isKeyField())return n===Ur.IN?(w(r instanceof nn,"Comparing on key with IN, but filter value not an ArrayValue"),w(r.internalValue.every(function(e){return e instanceof Zt}),"Comparing on key with IN, but an array value was not a RefValue"),new Wr(e,r)):(w(r instanceof Zt,"Comparing on key, but filter value not a RefValue"),w(n!==Ur.ARRAY_CONTAINS&&n!==Ur.ARRAY_CONTAINS_ANY,"'"+n.toString()+"' queries don't make sense on document keys."),new jr(e,n,r));if(r.isEqual(jt.INSTANCE)){if(n!==Ur.EQUAL)throw new E(S.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new t(e,n,r)}if(r.isEqual(Ht.NAN)){if(n!==Ur.EQUAL)throw new E(S.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new t(e,n,r)}return n===Ur.ARRAY_CONTAINS?new Kr(e,r):n===Ur.IN?(w(r instanceof nn,"IN filter has invalid value: "+r.toString()),new Gr(e,r)):n===Ur.ARRAY_CONTAINS_ANY?(w(r instanceof nn,"ARRAY_CONTAINS_ANY filter has invalid value: "+r.toString()),new zr(e,r)):new t(e,n,r)},t.prototype.matches=function(e){var t=e.field(this.field);return null!==t&&this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},t.prototype.matchesComparison=function(e){switch(this.op){case Ur.LESS_THAN:return e<0;case Ur.LESS_THAN_OR_EQUAL:return e<=0;case Ur.EQUAL:return 0===e;case Ur.GREATER_THAN:return e>0;case Ur.GREATER_THAN_OR_EQUAL:return e>=0;default:return v("Unknown FieldFilter operator: "+this.op)}},t.prototype.isInequality=function(){return[Ur.LESS_THAN,Ur.LESS_THAN_OR_EQUAL,Ur.GREATER_THAN,Ur.GREATER_THAN_OR_EQUAL].indexOf(this.op)>=0},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},t.prototype.isEqual=function(e){return e instanceof t&&(this.op.isEqual(e.op)&&this.field.isEqual(e.field)&&this.value.isEqual(e.value))},t.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},t}(qr),jr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.matches=function(e){var t=this.value,n=Te.comparator(e.key,t.key);return this.matchesComparison(n)},t}(Vr),Wr=function(e){function t(t,n){var r=e.call(this,t,Ur.IN,n)||this;return r.value=n,r}return a.__extends(t,e),t.prototype.matches=function(e){var t=this.value;return t.internalValue.some(function(t){return e.key.isEqual(t.key)})},t}(Vr),Kr=function(e){function t(t,n){return e.call(this,t,Ur.ARRAY_CONTAINS,n)||this}return a.__extends(t,e),t.prototype.matches=function(e){var t=e.field(this.field);return t instanceof nn&&t.contains(this.value)},t}(Vr),Gr=function(e){function t(t,n){var r=e.call(this,t,Ur.IN,n)||this;return r.value=n,r}return a.__extends(t,e),t.prototype.matches=function(e){var t=this.value,n=e.field(this.field);return null!==n&&t.contains(n)},t}(Vr),zr=function(e){function t(t,n){var r=e.call(this,t,Ur.ARRAY_CONTAINS_ANY,n)||this;return r.value=n,r}return a.__extends(t,e),t.prototype.matches=function(e){var t=this,n=e.field(this.field);return n instanceof nn&&n.internalValue.some(function(e){return t.value.contains(e)})},t}(Vr),Qr=function(){function e(e){this.name=e}return e.prototype.toString=function(){return this.name},e.ASCENDING=new e("asc"),e.DESCENDING=new e("desc"),e}(),Hr=function(){function e(e,t){this.position=e,this.before=t}return e.prototype.canonicalId=function(){for(var e=this.before?"b:":"a:",t=0,n=this.position;t<n.length;t++){var r=n[t];e+=r.toString()}return e},e.prototype.sortsBeforeDocument=function(e,t){w(this.position.length<=e.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=e[r],o=this.position[r];if(i.field.isKeyField())w(o instanceof Zt,"Bound has a non-key value where the key path is being used."),n=Te.comparator(o.key,t.key);else{var a=t.field(i.field);w(null!==a,"Field should exist since document matched the orderBy already."),n=o.compareTo(a)}if(i.dir===Qr.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},e.prototype.isEqual=function(e){if(null===e)return!1;if(this.before!==e.before||this.position.length!==e.position.length)return!1;for(var t=0;t<this.position.length;t++){var n=this.position[t],r=e.position[t];if(!n.isEqual(r))return!1}return!0},e}(),Yr=function(){function e(e,t){this.field=e,void 0===t&&(t=Qr.ASCENDING),this.dir=t,this.isKeyOrderBy=e.isKeyField()}return e.prototype.compare=function(e,t){var n=this.isKeyOrderBy?on.compareByKey(e,t):on.compareByField(this.field,e,t);switch(this.dir){case Qr.ASCENDING:return n;case Qr.DESCENDING:return-1*n;default:return v("Unknown direction: "+this.dir)}},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},e.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},e.prototype.isEqual=function(e){return this.dir===e.dir&&this.field.isEqual(e.field)},e}(),Jr=new Yr(be.keyField(),Qr.ASCENDING),Xr=new Yr(be.keyField(),Qr.DESCENDING),$r=function(){function e(){}return e.prototype.setLocalDocumentsView=function(e){this.localDocumentsView=e},e.prototype.getDocumentsMatchingQuery=function(e,t,n,r){var o=this;return w(void 0!==this.localDocumentsView,"setLocalDocumentsView() not called"),t.matchesAllDocuments()?this.executeFullCollectionScan(e,t):n.isEqual(Re.MIN)?this.executeFullCollectionScan(e,t):this.localDocumentsView.getDocuments(e,r).next(function(a){var s=o.applyQuery(t,a);return(t.hasLimitToFirst()||t.hasLimitToLast())&&o.needsRefill(t.limitType,s,r,n)?o.executeFullCollectionScan(e,t):(f()<=i.DEBUG&&m("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),t.toString()),o.localDocumentsView.getDocumentsMatchingQuery(e,t,n).next(function(e){return s.forEach(function(t){e=e.insert(t.key,t)}),e}))})},e.prototype.applyQuery=function(e,t){var n=new qe(function(t,n){return e.docComparator(t,n)});return t.forEach(function(t,r){r instanceof on&&e.matches(r)&&(n=n.add(r))}),n},e.prototype.needsRefill=function(e,t,n,r){if(n.size!==t.size)return!0;var i=e===Pr.First?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},e.prototype.executeFullCollectionScan=function(e,t){return f()<=i.DEBUG&&m("IndexFreeQueryEngine","Using full collection scan to execute query: %s",t.toString()),this.localDocumentsView.getDocumentsMatchingQuery(e,t,Re.MIN)},e}(),Zr=function(){function e(e,t,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.indexManager=n}return e.prototype.getDocument=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(e,t).next(function(r){return n.getDocumentInternal(e,t,r)})},e.prototype.getDocumentInternal=function(e,t,n){return this.remoteDocumentCache.getEntry(e,t).next(function(e){for(var r=0,i=n;r<i.length;r++){var o=i[r];e=o.applyToLocalView(t,e)}return e})},e.prototype.applyLocalMutationsToDocuments=function(e,t,n){var r=We();return t.forEach(function(e,t){for(var i=0,o=n;i<o.length;i++){var a=o[i];t=a.applyToLocalView(e,t)}r=r.insert(e,t)}),r},e.prototype.getDocuments=function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next(function(t){return n.getLocalViewOfDocuments(e,t)})},e.prototype.getLocalViewOfDocuments=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(function(r){var i=n.applyLocalMutationsToDocuments(e,t,r),o=je();return i.forEach(function(e,t){t||(t=new an(e,Re.forDeletedDoc())),o=o.insert(e,t)}),o})},e.prototype.getDocumentsMatchingQuery=function(e,t,n){return t.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(e,t.path):t.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)},e.prototype.getDocumentsMatchingDocumentQuery=function(e,t){return this.getDocument(e,new Te(t)).next(function(e){var t=Ge();return e instanceof on&&(t=t.insert(e.key,e)),t})},e.prototype.getDocumentsMatchingCollectionGroupQuery=function(e,t,n){var r=this;w(t.path.isEmpty(),"Currently we only support collection group queries at the root.");var i=t.collectionGroup,o=Ge();return this.indexManager.getCollectionParents(e,i).next(function(a){return tt.forEach(a,function(a){var s=t.asCollectionQueryAtPath(a.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next(function(e){e.forEach(function(e,t){o=o.insert(e,t)})})}).next(function(){return o})})},e.prototype.getDocumentsMatchingCollectionQuery=function(e,t,n){var r,i,o=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n).next(function(n){return r=n,o.mutationQueue.getAllMutationBatchesAffectingQuery(e,t)}).next(function(t){return i=t,o.addMissingBaseDocuments(e,i,r).next(function(e){r=e;for(var t=0,n=i;t<n.length;t++)for(var o=n[t],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c),d=u.applyToLocalView(l,l,o.localWriteTime);r=d instanceof on?r.insert(c,d):r.remove(c)}})}).next(function(){return r.forEach(function(e,n){t.matches(n)||(r=r.remove(e))}),r})},e.prototype.addMissingBaseDocuments=function(e,t,n){for(var r=Ye(),i=0,o=t;i<o.length;i++)for(var a=o[i],s=0,u=a.mutations;s<u.length;s++){var c=u[s];c instanceof xt&&null===n.get(c.key)&&(r=r.add(c.key))}var l=n;return this.remoteDocumentCache.getEntries(e,r).next(function(e){return e.forEach(function(e,t){null!==t&&t instanceof on&&(l=l.insert(e,t))}),l})},e}(),ei=function(){function e(){this.refsByKey=new qe(ti.compareByKey),this.refsByTarget=new qe(ti.compareByTargetId)}return e.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},e.prototype.addReference=function(e,t){var n=new ti(e,t);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},e.prototype.addReferences=function(e,t){var n=this;e.forEach(function(e){return n.addReference(e,t)})},e.prototype.removeReference=function(e,t){this.removeRef(new ti(e,t))},e.prototype.removeReferences=function(e,t){var n=this;e.forEach(function(e){return n.removeReference(e,t)})},e.prototype.removeReferencesForId=function(e){var t=this,n=Te.EMPTY,r=new ti(n,e),i=new ti(n,e+1),o=[];return this.refsByTarget.forEachInRange([r,i],function(e){t.removeRef(e),o.push(e.key)}),o},e.prototype.removeAllReferences=function(){var e=this;this.refsByKey.forEach(function(t){return e.removeRef(t)})},e.prototype.removeRef=function(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)},e.prototype.referencesForId=function(e){var t=Te.EMPTY,n=new ti(t,e),r=new ti(t,e+1),i=Ye();return this.refsByTarget.forEachInRange([n,r],function(e){i=i.add(e.key)}),i},e.prototype.containsKey=function(e){var t=new ti(e,0),n=this.refsByKey.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},e}(),ti=function(){function e(e,t){this.key=e,this.targetOrBatchId=t}return e.compareByKey=function(e,t){return Te.comparator(e.key,t.key)||re(e.targetOrBatchId,t.targetOrBatchId)},e.compareByTargetId=function(e,t){return re(e.targetOrBatchId,t.targetOrBatchId)||Te.comparator(e.key,t.key)},e}(),ni="LocalStore",ri=function(){function e(e,t,n){this.persistence=e,this.queryEngine=t,this.localViewReferences=new ei,this.targetDataByTarget=new Le(re),this.targetIdByTarget=new un(function(e){return e.canonicalId()}),this.lastDocumentChangeReadTime=Re.MIN,w(e.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=e.getMutationQueue(n),this.remoteDocuments=e.getRemoteDocumentCache(),this.targetCache=e.getTargetCache(),this.localDocuments=new Zr(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager()),this.queryEngine.setLocalDocumentsView(this.localDocuments)}return e.prototype.start=function(){return this.synchronizeLastDocumentChangeReadTime()},e.prototype.handleUserChange=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,n,r,i=this;return a.__generator(this,function(o){switch(o.label){case 0:return t=this.mutationQueue,n=this.localDocuments,[4,this.persistence.runTransaction("Handle user change","readonly-idempotent",function(r){var o;return i.mutationQueue.getAllMutationBatches(r).next(function(a){return o=a,t=i.persistence.getMutationQueue(e),n=new Zr(i.remoteDocuments,t,i.persistence.getIndexManager()),t.getAllMutationBatches(r)}).next(function(e){for(var t=[],i=[],a=Ye(),s=0,u=o;s<u.length;s++){var c=u[s];t.push(c.batchId);for(var l=0,d=c.mutations;l<d.length;l++){var h=d[l];a=a.add(h.key)}}for(var f=0,p=e;f<p.length;f++){c=p[f];i.push(c.batchId);for(var m=0,g=c.mutations;m<g.length;m++){h=g[m];a=a.add(h.key)}}return n.getDocuments(r,a).next(function(e){return{affectedDocuments:e,removedBatchIds:t,addedBatchIds:i}})})})];case 1:return r=o.sent(),this.mutationQueue=t,this.localDocuments=n,this.queryEngine.setLocalDocumentsView(this.localDocuments),[2,r]}})})},e.prototype.localWrite=function(e){var t,n=this,r=Ne.now(),i=e.reduce(function(e,t){return e.add(t.key)},Ye());return this.persistence.runTransaction("Locally write mutations","readwrite-idempotent",function(o){return n.localDocuments.getDocuments(o,i).next(function(i){t=i;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],l=c.extractBaseValue(t.get(c.key));null!=l&&a.push(new xt(c.key,l,l.fieldMask(),Rt.exists(!0)))}return n.mutationQueue.addMutationBatch(o,r,a,e)})}).then(function(e){var n=e.applyToLocalDocumentSet(t);return{batchId:e.batchId,changes:n}})},e.prototype.lookupMutationDocuments=function(e){var t=this;return this.persistence.runTransaction("Lookup mutation documents","readonly-idempotent",function(n){return t.mutationQueue.lookupMutationKeys(n,e).next(function(e){return e?t.localDocuments.getDocuments(n,e):tt.resolve(null)})})},e.prototype.acknowledgeBatch=function(e){var t=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary-idempotent",function(n){var r=e.batch.keys(),i=t.remoteDocuments.newChangeBuffer({trackRemovals:!0});return t.mutationQueue.acknowledgeBatch(n,e.batch,e.streamToken).next(function(){return t.applyWriteToRemoteDocuments(n,e,i)}).next(function(){return i.apply(n)}).next(function(){return t.mutationQueue.performConsistencyCheck(n)}).next(function(){return t.localDocuments.getDocuments(n,r)})})},e.prototype.rejectBatch=function(e){var t=this;return this.persistence.runTransaction("Reject batch","readwrite-primary-idempotent",function(n){var r;return t.mutationQueue.lookupMutationBatch(n,e).next(function(e){return w(null!==e,"Attempt to reject nonexistent batch!"),r=e.keys(),t.mutationQueue.removeMutationBatch(n,e)}).next(function(){return t.mutationQueue.performConsistencyCheck(n)}).next(function(){return t.localDocuments.getDocuments(n,r)})})},e.prototype.getHighestUnacknowledgedBatchId=function(){var e=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly-idempotent",function(t){return e.mutationQueue.getHighestUnacknowledgedBatchId(t)})},e.prototype.getLastStreamToken=function(){var e=this;return this.persistence.runTransaction("Get last stream token","readonly-idempotent",function(t){return e.mutationQueue.getLastStreamToken(t)})},e.prototype.setLastStreamToken=function(e){var t=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary-idempotent",function(n){return t.mutationQueue.setLastStreamToken(n,e)})},e.prototype.getLastRemoteSnapshotVersion=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly-idempotent",function(t){return e.targetCache.getLastRemoteSnapshotVersion(t)})},e.prototype.applyRemoteEvent=function(t){var n=this,r=t.snapshotVersion,i=this.targetDataByTarget;return this.persistence.runTransaction("Apply remote event","readwrite-primary-idempotent",function(o){var a=n.remoteDocuments.newChangeBuffer({trackRemovals:!0});i=n.targetDataByTarget;var s=[];I(t.targetChanges,function(t,a){var u=i.get(t);if(u){s.push(n.targetCache.removeMatchingKeys(o,a.removedDocuments,t).next(function(){return n.targetCache.addMatchingKeys(o,a.addedDocuments,t)}));var c=a.resumeToken;if(c.length>0){var l=u.withResumeToken(c,r).withSequenceNumber(o.currentSequenceNumber);i=i.insert(t,l),e.shouldPersistTargetData(u,l,a)&&s.push(n.targetCache.updateTargetData(o,l))}}});var u=je(),c=Ye();if(t.documentUpdates.forEach(function(e,t){c=c.add(e)}),s.push(a.getEntries(o,c).next(function(e){t.documentUpdates.forEach(function(i,c){var l=e.get(i);c instanceof an&&c.version.isEqual(Re.MIN)?(a.removeEntry(i,r),u=u.insert(i,c)):null==l||c.version.compareTo(l.version)>0||0===c.version.compareTo(l.version)&&l.hasPendingWrites?(w(!Re.MIN.isEqual(r),"Cannot add a document when the remote version is zero"),a.addEntry(c,r),u=u.insert(i,c)):m(ni,"Ignoring outdated watch update for ",i,". Current version:",l.version," Watch version:",c.version),t.resolvedLimboDocuments.has(i)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(o,i))})})),!r.isEqual(Re.MIN)){var l=n.targetCache.getLastRemoteSnapshotVersion(o).next(function(e){return w(r.compareTo(e)>=0,"Watch stream reverted to previous snapshot?? "+r+" < "+e),n.targetCache.setTargetsMetadata(o,o.currentSequenceNumber,r)});s.push(l)}return tt.waitFor(s).next(function(){return a.apply(o)}).next(function(){return n.localDocuments.getLocalViewOfDocuments(o,u)})}).then(function(e){return n.targetDataByTarget=i,e})},e.shouldPersistTargetData=function(e,t,n){if(w(t.resumeToken.length>0,"Attempted to persist target data with no resume token"),0===e.resumeToken.length)return!0;var r=t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds();if(r>=this.RESUME_TOKEN_MAX_AGE_MICROS)return!0;var i=n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size;return i>0},e.prototype.notifyLocalViewChanges=function(e){for(var t=this,n=0,r=e;n<r.length;n++){var i=r[n],o=i.targetId;if(this.localViewReferences.addReferences(i.addedKeys,o),this.localViewReferences.removeReferences(i.removedKeys,o),!i.fromCache){var a=this.targetDataByTarget.get(o);w(null!==a,"Can't set limbo-free snapshot version for unknown target: "+o);var s=a.snapshotVersion,u=a.withLastLimboFreeSnapshotVersion(s);this.targetDataByTarget=this.targetDataByTarget.insert(o,u)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite-idempotent",function(n){return tt.forEach(e,function(e){return tt.forEach(e.removedKeys,function(e){return t.persistence.referenceDelegate.removeReference(n,e)})})})},e.prototype.nextMutationBatch=function(e){var t=this;return this.persistence.runTransaction("Get next mutation batch","readonly-idempotent",function(n){return void 0===e&&(e=$e),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)})},e.prototype.readDocument=function(e){var t=this;return this.persistence.runTransaction("read document","readonly-idempotent",function(n){return t.localDocuments.getDocument(n,e)})},e.prototype.allocateTarget=function(e){var t=this;return this.persistence.runTransaction("Allocate target","readwrite-idempotent",function(n){var r;return t.targetCache.getTargetData(n,e).next(function(i){return i?(r=i,tt.resolve(r)):t.targetCache.allocateTargetId(n).next(function(i){return r=new er(e,i,Gn.Listen,n.currentSequenceNumber),t.targetCache.addTargetData(n,r).next(function(){return r})})})}).then(function(n){return null===t.targetDataByTarget.get(n.targetId)&&(t.targetDataByTarget=t.targetDataByTarget.insert(n.targetId,n),t.targetIdByTarget.set(e,n.targetId)),n})},e.prototype.getTargetData=function(e,t){var n=this.targetIdByTarget.get(t);return void 0!==n?tt.resolve(this.targetDataByTarget.get(n)):this.targetCache.getTargetData(e,t)},e.prototype.releaseTarget=function(e,t){var n=this,r=this.targetDataByTarget.get(e);w(null!==r,"Tried to release nonexistent target: "+e);var i=t?"readwrite-idempotent":"readwrite-primary-idempotent";return this.persistence.runTransaction("Release target",i,function(i){var o=n.localViewReferences.removeReferencesForId(e);return t?tt.resolve():tt.forEach(o,function(e){return n.persistence.referenceDelegate.removeReference(i,e)}).next(function(){n.persistence.referenceDelegate.removeTarget(i,r)})}).then(function(){n.targetDataByTarget=n.targetDataByTarget.remove(e),n.targetIdByTarget.delete(r.target)})},e.prototype.executeQuery=function(e,t){var n=this,r=Re.MIN,i=Ye();return this.persistence.runTransaction("Execute query","readonly-idempotent",function(o){return n.getTargetData(o,e.toTarget()).next(function(e){if(e)return r=e.lastLimboFreeSnapshotVersion,n.targetCache.getMatchingKeysForTargetId(o,e.targetId).next(function(e){i=e})}).next(function(){return n.queryEngine.getDocumentsMatchingQuery(o,e,t?r:Re.MIN,t?i:Ye())}).next(function(e){return{documents:e,remoteKeys:i}})})},e.prototype.remoteDocumentKeys=function(e){var t=this;return this.persistence.runTransaction("Remote document keys","readonly-idempotent",function(n){return t.targetCache.getMatchingKeysForTargetId(n,e)})},e.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},e.prototype.removeCachedMutationBatchMetadata=function(e){this.mutationQueue.removeCachedMutationKeys(e)},e.prototype.setNetworkEnabled=function(e){this.persistence.setNetworkEnabled(e)},e.prototype.applyWriteToRemoteDocuments=function(e,t,n){var r=this,i=t.batch,o=i.keys(),a=tt.resolve();return o.forEach(function(r){a=a.next(function(){return n.getEntry(e,r)}).next(function(e){var o=e,a=t.docVersions.get(r);w(null!==a,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(a)<0)&&(o=i.applyToRemoteDocument(r,o,t),o?n.addEntry(o,t.commitVersion):w(!e,"Mutation batch "+i+" applied to document "+e+" resulted in null"))})}),a.next(function(){return r.mutationQueue.removeMutationBatch(e,i)})},e.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary-idempotent",function(n){return e.collect(n,t.targetDataByTarget)})},e.prototype.getTarget=function(e){var t=this,n=this.targetDataByTarget.get(e);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly-idempotent",function(n){return t.targetCache.getTargetDataForTarget(n,e).next(function(e){return e?e.target:null})})},e.prototype.getNewDocumentChanges=function(){var e=this;return this.persistence.runTransaction("Get new document changes","readonly-idempotent",function(t){return e.remoteDocuments.getNewDocumentChanges(t,e.lastDocumentChangeReadTime)}).then(function(t){var n=t.changedDocs,r=t.readTime;return e.lastDocumentChangeReadTime=r,n})},e.prototype.synchronizeLastDocumentChangeReadTime=function(){return a.__awaiter(this,void 0,void 0,function(){var e,t=this;return a.__generator(this,function(n){return this.remoteDocuments instanceof ln?(e=this.remoteDocuments,[2,this.persistence.runTransaction("Synchronize last document change read time","readonly-idempotent",function(t){return e.getLastDocumentChange(t)}).then(function(e){var n=e.readTime;t.lastDocumentChangeReadTime=n})]):[2]})})},e.RESUME_TOKEN_MAX_AGE_MICROS=3e8,e}(),ii=function(){function e(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=T(),this.batchesByDocumentKey=new qe(ti.compareByKey)}return e.prototype.checkEmpty=function(e){return tt.resolve(0===this.mutationQueue.length)},e.prototype.acknowledgeBatch=function(e,t,n){var r=t.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");w(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return w(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,tt.resolve()},e.prototype.getLastStreamToken=function(e){return tt.resolve(this.lastStreamToken)},e.prototype.setLastStreamToken=function(e,t){return this.lastStreamToken=t,tt.resolve()},e.prototype.addMutationBatch=function(e,t,n,r){w(0!==r.length,"Mutation batches should not be empty");var i=this.nextBatchId;if(this.nextBatchId++,this.mutationQueue.length>0){var o=this.mutationQueue[this.mutationQueue.length-1];w(o.batchId<i,"Mutation batchIDs must be monotonically increasing order")}var a=new Ze(i,t,n,r);this.mutationQueue.push(a);for(var s=0,u=r;s<u.length;s++){var c=u[s];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new ti(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast())}return tt.resolve(a)},e.prototype.lookupMutationBatch=function(e,t){return tt.resolve(this.findMutationBatch(t))},e.prototype.lookupMutationKeys=function(e,t){var n=this.findMutationBatch(t);return w(null!=n,"Failed to find local mutation batch."),tt.resolve(n.keys())},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=t+1,r=this.indexOfBatchId(n),i=r<0?0:r;return tt.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return tt.resolve(0===this.mutationQueue.length?$e:this.nextBatchId-1)},e.prototype.getAllMutationBatches=function(e){return tt.resolve(this.mutationQueue.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new ti(t,0),i=new ti(t,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],function(e){w(t.isEqual(e.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(e.targetOrBatchId);w(null!==r,"Batches in the index must exist in the main table"),o.push(r)}),tt.resolve(o)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new qe(re);return t.forEach(function(e){var t=new ti(e,0),i=new ti(e,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([t,i],function(t){w(e.isEqual(t.key),"For each key, should only iterate over a single key's batches"),r=r.add(t.targetOrBatchId)})}),tt.resolve(this.findMutationBatches(r))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){w(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=t.path,r=n.length+1,i=n;Te.isDocumentKey(i)||(i=i.child(""));var o=new ti(new Te(i),0),a=new qe(re);return this.batchesByDocumentKey.forEachWhile(function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.targetOrBatchId)),!0)},o),tt.resolve(this.findMutationBatches(a))},e.prototype.findMutationBatches=function(e){var t=this,n=[];return e.forEach(function(e){var r=t.findMutationBatch(e);null!==r&&n.push(r)}),n},e.prototype.removeMutationBatch=function(e,t){var n=this,r=this.indexOfExistingBatchId(t.batchId,"removed");w(0===r,"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var i=this.batchesByDocumentKey;return tt.forEach(t.mutations,function(r){var o=new ti(r.key,t.batchId);return i=i.delete(o),n.referenceDelegate.removeMutationReference(e,r.key)}).next(function(){n.batchesByDocumentKey=i})},e.prototype.removeCachedMutationKeys=function(e){},e.prototype.containsKey=function(e,t){var n=new ti(t,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return tt.resolve(t.isEqual(r&&r.key))},e.prototype.performConsistencyCheck=function(e){return 0===this.mutationQueue.length&&w(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),tt.resolve()},e.prototype.indexOfExistingBatchId=function(e,t){var n=this.indexOfBatchId(e);return w(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+t),n},e.prototype.indexOfBatchId=function(e){if(0===this.mutationQueue.length)return 0;var t=this.mutationQueue[0].batchId;return e-t},e.prototype.findMutationBatch=function(e){var t=this.indexOfBatchId(e);if(t<0||t>=this.mutationQueue.length)return null;var n=this.mutationQueue[t];return w(n.batchId===e,"If found batch must match"),n},e}();function oi(){return new Le(Te.comparator)}var ai,si=function(){function e(e,t){this.indexManager=e,this.sizer=t,this.docs=oi(),this.size=0}return e.prototype.addEntry=function(e,t,n){w(!n.isEqual(Re.MIN),"Cannot add a document with a read time of zero");var r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.sizer(t);return this.docs=this.docs.insert(r,{maybeDocument:t,size:a,readTime:n}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())},e.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},e.prototype.getEntry=function(e,t){var n=this.docs.get(t);return tt.resolve(n?n.maybeDocument:null)},e.prototype.getEntries=function(e,t){var n=this,r=We();return t.forEach(function(e){var t=n.docs.get(e);r=r.insert(e,t?t.maybeDocument:null)}),tt.resolve(r)},e.prototype.getDocumentsMatchingQuery=function(e,t,n){w(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=Ge(),i=new Te(t.path.child("")),o=this.docs.getIteratorFrom(i);while(o.hasNext()){var a=o.getNext(),s=a.key,u=a.value,c=u.maybeDocument,l=u.readTime;if(!t.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||c instanceof on&&t.matches(c)&&(r=r.insert(c.key,c))}return tt.resolve(r)},e.prototype.forEachDocumentKey=function(e,t){return tt.forEach(this.docs,function(e){return t(e)})},e.prototype.getNewDocumentChanges=function(e,t){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},e.prototype.newChangeBuffer=function(t){return new e.RemoteDocumentChangeBuffer(this)},e.prototype.getSize=function(e){return tt.resolve(this.size)},e.RemoteDocumentChangeBuffer=function(e){function t(t){var n=e.call(this)||this;return n.documentCache=t,n}return a.__extends(t,e),t.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach(function(r,i){i?n.push(t.documentCache.addEntry(e,i,t.readTime)):t.documentCache.removeEntry(r)}),tt.waitFor(n)},t.prototype.getFromCache=function(e,t){return this.documentCache.getEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.documentCache.getEntries(e,t)},t}(cn),e}(),ui=function(){function e(e){this.persistence=e,this.targets=new un(function(e){return e.canonicalId()}),this.lastRemoteSnapshotVersion=Re.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new ei,this.targetCount=0,this.targetIdGenerator=Tt.forTargetCache()}return e.prototype.forEachTarget=function(e,t){return this.targets.forEach(function(e,n){return t(n)}),tt.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(e){return tt.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(e){return tt.resolve(this.highestSequenceNumber)},e.prototype.allocateTargetId=function(e){var t=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=t,tt.resolve(t)},e.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),tt.resolve()},e.prototype.saveTargetData=function(e){this.targets.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)},e.prototype.addTargetData=function(e,t){return w(!this.targets.has(t.target),"Adding a target that already exists"),this.saveTargetData(t),this.targetCount+=1,tt.resolve()},e.prototype.updateTargetData=function(e,t){return w(this.targets.has(t.target),"Updating a non-existent target"),this.saveTargetData(t),tt.resolve()},e.prototype.removeTargetData=function(e,t){return w(this.targetCount>0,"Removing a target from an empty cache"),w(this.targets.has(t.target),"Removing a non-existent target from the cache"),this.targets.delete(t.target),this.references.removeReferencesForId(t.targetId),this.targetCount-=1,tt.resolve()},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.targets.forEach(function(a,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.targets.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)}),tt.waitFor(o).next(function(){return i})},e.prototype.getTargetCount=function(e){return tt.resolve(this.targetCount)},e.prototype.getTargetData=function(e,t){var n=this.targets.get(t)||null;return tt.resolve(n)},e.prototype.getTargetDataForTarget=function(e,t){return v("Not yet implemented.")},e.prototype.addMatchingKeys=function(e,t,n){this.references.addReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.addReference(e,t))}),tt.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){this.references.removeReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.removeReference(e,t))}),tt.waitFor(i)},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this.references.removeReferencesForId(t),tt.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=this.references.referencesForId(t);return tt.resolve(n)},e.prototype.containsKey=function(e,t){return tt.resolve(this.references.containsKey(t))},e}(),ci="MemoryPersistence",li=function(){function e(e,t){var n=this;this.clientId=e,this.mutationQueues={},this.listenSequence=new me(0),this._started=!1,this._started=!0,this.referenceDelegate=t(this),this.targetCache=new ui(this);var r=function(e){return n.referenceDelegate.documentSize(e)};this.indexManager=new mn,this.remoteDocumentCache=new si(this.indexManager,r)}return e.createLruPersistence=function(t,n,r){var i=function(e){return new fi(e,new tr(n),r)};return new e(t,i)},e.createEagerPersistence=function(t){var n=function(e){return new hi(e)};return new e(t,n)},e.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getActiveClients=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){return[2,[this.clientId]]})})},e.prototype.setPrimaryStateListener=function(e){return e(!0)},e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(e){},e.prototype.getIndexManager=function(){return this.indexManager},e.prototype.getMutationQueue=function(e){var t=this.mutationQueues[e.toKey()];return t||(t=new ii(this.indexManager,this.referenceDelegate),this.mutationQueues[e.toKey()]=t),t},e.prototype.getTargetCache=function(){return this.targetCache},e.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},e.prototype.runTransaction=function(e,t,n){var r=this;m(ci,"Starting transaction:",e);var i=new di(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next(function(e){return r.referenceDelegate.onTransactionCommitted(i).next(function(){return e})}).toPromise().then(function(e){return i.raiseOnCommittedEvent(),e})},e.prototype.mutationQueuesContainKey=function(e,t){return tt.or(k(this.mutationQueues).map(function(n){return function(){return n.containsKey(e,t)}}))},e}(),di=function(e){function t(t){var n=e.call(this)||this;return n.currentSequenceNumber=t,n}return a.__extends(t,e),t}(dr),hi=function(){function e(e){this.persistence=e,this.inMemoryPins=null,this._orphanedDocuments=null}return Object.defineProperty(e.prototype,"orphanedDocuments",{get:function(){if(this._orphanedDocuments)return this._orphanedDocuments;throw v("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return this.orphanedDocuments.delete(t),tt.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedDocuments.add(t),tt.resolve()},e.prototype.removeMutationReference=function(e,t){return this.orphanedDocuments.add(t),tt.resolve()},e.prototype.removeTarget=function(e,t){var n=this,r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(function(e){e.forEach(function(e){return n.orphanedDocuments.add(e)})}).next(function(){return r.removeTargetData(e,t)})},e.prototype.onTransactionStarted=function(){this._orphanedDocuments=new Set},e.prototype.onTransactionCommitted=function(e){var t=this,n=this.persistence.getRemoteDocumentCache(),r=n.newChangeBuffer();return tt.forEach(this.orphanedDocuments,function(n){return t.isReferenced(e,n).next(function(e){e||r.removeEntry(n)})}).next(function(){return t._orphanedDocuments=null,r.apply(e)})},e.prototype.updateLimboDocument=function(e,t){var n=this;return this.isReferenced(e,t).next(function(e){e?n.orphanedDocuments.delete(t):n.orphanedDocuments.add(t)})},e.prototype.documentSize=function(e){return 0},e.prototype.isReferenced=function(e,t){var n=this;return tt.or([function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.mutationQueuesContainKey(e,t)},function(){return tt.resolve(n.inMemoryPins.containsKey(t))}])},e}(),fi=function(){function e(e,t,n){this.persistence=e,this.serializer=t,this.inMemoryPins=null,this.orphanedSequenceNumbers=new un(function(e){return De(e.path)}),this.garbageCollector=new lr(this,n)}return e.prototype.onTransactionStarted=function(){},e.prototype.onTransactionCommitted=function(e){return tt.resolve()},e.prototype.forEachTarget=function(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)},e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocumentCount(e),n=this.persistence.getTargetCache().getTargetCount(e);return n.next(function(e){return t.next(function(t){return e+t})})},e.prototype.orphanedDocumentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,function(e){t++}).next(function(){return t})},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){var n=this;return tt.forEach(this.orphanedSequenceNumbers,function(r,i){return n.isPinned(e,r,i).next(function(e){return e?tt.resolve():t(i)})})},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.removeTargets=function(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer(),a=i.forEachDocumentKey(e,function(i){return n.isPinned(e,i,t).next(function(e){e||(r++,o.removeEntry(i))})});return a.next(function(){return o.apply(e)}).next(function(){return r})},e.prototype.removeMutationReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),tt.resolve()},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)},e.prototype.addReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),tt.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),tt.resolve()},e.prototype.updateLimboDocument=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),tt.resolve()},e.prototype.documentSize=function(e){var t,n=this.serializer.toDbRemoteDocument(e,e.version);if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw v("Unknown remote document type");t=n.noDocument}return JSON.stringify(t).length},e.prototype.isPinned=function(e,t,n){var r=this;return tt.or([function(){return r.persistence.mutationQueuesContainKey(e,t)},function(){return tt.resolve(r.inMemoryPins.containsKey(t))},function(){return r.persistence.getTargetCache().containsKey(e,t)},function(){var e=r.orphanedSequenceNumbers.get(t);return tt.resolve(void 0!==e&&e>n)}])},e.prototype.getCacheSize=function(e){return this.persistence.getRemoteDocumentCache().getSize(e)},e}(),pi="ExponentialBackoff",mi=1e3,gi=1.5,yi=6e4,vi=function(){function e(e,t,n,r,i){void 0===n&&(n=mi),void 0===r&&(r=gi),void 0===i&&(i=yi),this.queue=e,this.timerId=t,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return e.prototype.reset=function(){this.currentBaseMs=0},e.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},e.prototype.backoffAndRun=function(e){var t=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);this.currentBaseMs>0&&m(pi,"Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,function(){return t.lastAttemptTime=Date.now(),e()}),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},e.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},e.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},e}(),wi="PersistentStream";(function(e){e[e["Initial"]=0]="Initial",e[e["Starting"]=1]="Starting",e[e["Open"]=2]="Open",e[e["Error"]=3]="Error",e[e["Backoff"]=4]="Backoff"})(ai||(ai={}));var bi,Ti,Si=6e4,Ei=function(){function e(e,t,n,r,i,o){this.queue=e,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=ai.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new vi(e,t)}return e.prototype.isStarted=function(){return this.state===ai.Starting||this.state===ai.Open||this.state===ai.Backoff},e.prototype.isOpen=function(){return this.state===ai.Open},e.prototype.start=function(){this.state!==ai.Error?(w(this.state===ai.Initial,"Already started"),this.auth()):this.performBackoff()},e.prototype.stop=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return this.isStarted()?[4,this.close(ai.Initial)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.inhibitBackoff=function(){w(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=ai.Initial,this.backoff.reset()},e.prototype.markIdle=function(){var e=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,Si,function(){return e.handleIdleCloseTimer()}))},e.prototype.sendRequest=function(e){this.cancelIdleCheck(),this.stream.send(e)},e.prototype.handleIdleCloseTimer=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){return this.isOpen()?[2,this.close(ai.Initial)]:[2]})})},e.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},e.prototype.close=function(e,t){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(n){switch(n.label){case 0:return w(this.isStarted(),"Only started streams should be closed."),w(e===ai.Error||Rr(t),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,e!==ai.Error?this.backoff.reset():t&&t.code===S.RESOURCE_EXHAUSTED?(g(t.toString()),g("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):t&&t.code===S.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.onClose(t)];case 1:return n.sent(),[2]}})})},e.prototype.tearDown=function(){},e.prototype.auth=function(){var e=this;w(this.state===ai.Initial,"Must be in initial state to auth"),this.state=ai.Starting;var t=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then(function(t){e.closeCount===n&&e.startStream(t)},function(n){t(function(){var t=new E(S.UNKNOWN,"Fetching auth token failed: "+n.message);return e.handleStreamClose(t)})})},e.prototype.startStream=function(e){var t=this;w(this.state===ai.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e),this.stream.onOpen(function(){n(function(){return w(t.state===ai.Starting,"Expected stream to be in state Starting, but was "+t.state),t.state=ai.Open,t.listener.onOpen()})}),this.stream.onClose(function(e){n(function(){return t.handleStreamClose(e)})}),this.stream.onMessage(function(e){n(function(){return t.onMessage(e)})})},e.prototype.performBackoff=function(){var e=this;w(this.state===ai.Error,"Should only perform backoff when in Error state"),this.state=ai.Backoff,this.backoff.backoffAndRun(function(){return a.__awaiter(e,void 0,void 0,function(){return a.__generator(this,function(e){return w(this.state===ai.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=ai.Initial,this.start(),w(this.isStarted(),"PersistentStream should have started"),[2]})})})},e.prototype.handleStreamClose=function(e){return w(this.isStarted(),"Can't handle server close on non-started stream"),m(wi,"close with error: "+e),this.stream=null,this.close(ai.Error,e)},e.prototype.getCloseGuardedDispatcher=function(e){var t=this;return function(n){t.queue.enqueueAndForget(function(){return t.closeCount===e?n():(m(wi,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},e}(),Ci=function(e){function t(t,n,r,i,o){var a=e.call(this,t,ce.ListenStreamConnectionBackoff,ce.ListenStreamIdle,n,r,o)||this;return a.serializer=i,a}return a.__extends(t,e),t.prototype.startRpc=function(e){return this.connection.openStream("Listen",e)},t.prototype.onMessage=function(e){this.backoff.reset();var t=this.serializer.fromWatchChange(e),n=this.serializer.versionFromListenResponse(e);return this.listener.onWatchChange(t,n)},t.prototype.watch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.addTarget=this.serializer.toTarget(e);var n=this.serializer.toListenRequestLabels(e);n&&(t.labels=n),this.sendRequest(t)},t.prototype.unwatch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.removeTarget=e,this.sendRequest(t)},t}(Ei),Oi=function(e){function t(t,n,r,i,o){var a=e.call(this,t,ce.WriteStreamConnectionBackoff,ce.WriteStreamIdle,n,r,o)||this;return a.serializer=i,a.handshakeComplete_=!1,a.lastStreamToken=T(),a}return a.__extends(t,e),Object.defineProperty(t.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.handshakeComplete_=!1,e.prototype.start.call(this)},t.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},t.prototype.startRpc=function(e){return this.connection.openStream("Write",e)},t.prototype.onMessage=function(e){if(w(!!e.streamToken,"Got a write response without a stream token"),this.lastStreamToken=e.streamToken,this.handshakeComplete_){this.backoff.reset();var t=this.serializer.fromWriteResults(e.writeResults,e.commitTime),n=this.serializer.fromVersion(e.commitTime);return this.listener.onMutationResult(n,t)}return w(!e.writeResults||0===e.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},t.prototype.writeHandshake=function(){w(this.isOpen(),"Writing handshake requires an opened stream"),w(!this.handshakeComplete_,"Handshake already completed");var e={};e.database=this.serializer.encodedDatabaseId,this.sendRequest(e)},t.prototype.writeMutations=function(e){var t=this;w(this.isOpen(),"Writing mutations requires an opened stream"),w(this.handshakeComplete_,"Handshake must be complete before writing mutations"),w(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:e.map(function(e){return t.serializer.toMutation(e)})};this.sendRequest(n)},t}(Ei),_i=function(){function e(e,t,n,r){this.queue=e,this.connection=t,this.credentials=n,this.serializer=r}return e.prototype.newPersistentWriteStream=function(e){return new Oi(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.newPersistentWatchStream=function(e){return new Ci(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.commit=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,writes:e.map(function(e){return t.serializer.toMutation(e)})};return this.invokeRPC("Commit",n).then(function(e){return t.serializer.fromWriteResults(e.writeResults,e.commitTime)})},e.prototype.lookup=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,documents:e.map(function(e){return t.serializer.toName(e)})};return this.invokeStreamingRPC("BatchGetDocuments",n).then(function(n){var r=je();n.forEach(function(e){var n=t.serializer.fromMaybeDocument(e);r=r.insert(n.key,n)});var i=[];return e.forEach(function(e){var t=r.get(e);w(!!t,"Missing entity in write response for "+e),i.push(t)}),i})},e.prototype.invokeRPC=function(e,t){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeRPC(e,t,r)}).catch(function(e){throw e.code===S.UNAUTHENTICATED&&n.credentials.invalidateToken(),e})},e.prototype.invokeStreamingRPC=function(e,t){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeStreamingRPC(e,t,r)}).catch(function(e){throw e.code===S.UNAUTHENTICATED&&n.credentials.invalidateToken(),e})},e}(),Ii=function(){function e(e){this.datastore=e,this.readVersions=Qe(),this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,n=this;return a.__generator(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new E(S.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.datastore.lookup(e)];case 1:return t=r.sent(),t.forEach(function(e){e instanceof an||e instanceof on?n.recordVersion(e):v("Document in a transaction was a "+e.constructor.name)}),[2,t]}})})},e.prototype.set=function(e,t){this.write(t.toMutations(e,this.precondition(e))),this.writtenDocs.add(e)},e.prototype.update=function(e,t){try{this.write(t.toMutations(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e)},e.prototype.delete=function(e){this.write([new qt(e,this.precondition(e))]),this.writtenDocs.add(e)},e.prototype.commit=function(){return a.__awaiter(this,void 0,void 0,function(){var e;return a.__generator(this,function(t){switch(t.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;if(e=this.readVersions,this.mutations.forEach(function(t){e=e.remove(t.key)}),!e.isEmpty())throw new E(S.INVALID_ARGUMENT,"Every document read in a transaction must also be written.");return[4,this.datastore.commit(this.mutations)];case 1:return t.sent(),this.committed=!0,[2]}})})},e.prototype.recordVersion=function(e){var t;if(e instanceof on)t=e.version;else{if(!(e instanceof an))throw v("Document in a transaction was a "+e.constructor.name);t=Re.forDeletedDoc()}var n=this.readVersions.get(e.key);if(null!==n){if(!t.isEqual(n))throw new E(S.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(e.key,t)},e.prototype.precondition=function(e){var t=this.readVersions.get(e);return!this.writtenDocs.has(e)&&t?Rt.updateTime(t):Rt.NONE},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e);if(!this.writtenDocs.has(e)&&t){if(t.isEqual(Re.forDeletedDoc()))throw new E(S.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Rt.updateTime(t)}return Rt.exists(!0)},e.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(e)},e.prototype.ensureCommitNotCalled=function(){w(!this.committed,"A transaction object cannot be used after its update callback has been invoked.")},e}();(function(e){e[e["Unknown"]=0]="Unknown",e[e["Online"]=1]="Online",e[e["Offline"]=2]="Offline"})(bi||(bi={})),function(e){e[e["RemoteStore"]=0]="RemoteStore",e[e["SharedClientState"]=1]="SharedClientState"}(Ti||(Ti={}));var ki,Di="OnlineStateTracker",Ai=1,Fi=1e4,Mi=function(){function e(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=bi.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return e.prototype.handleWatchStreamStart=function(){var e=this;0===this.watchStreamFailures&&(this.setAndBroadcast(bi.Unknown),w(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(ce.OnlineStateTimeout,Fi,function(){return e.onlineStateTimer=null,w(e.state===bi.Unknown,"Timer should be canceled if we transitioned to a different state."),e.logClientOfflineWarningIfNecessary("Backend didn't respond within "+Fi/1e3+" seconds."),e.setAndBroadcast(bi.Offline),Promise.resolve()}))},e.prototype.handleWatchStreamFailure=function(e){this.state===bi.Online?(this.setAndBroadcast(bi.Unknown),w(0===this.watchStreamFailures,"watchStreamFailures must be 0"),w(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,this.watchStreamFailures>=Ai&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed "+Ai+" times. Most recent error: "+e.toString()),this.setAndBroadcast(bi.Offline)))},e.prototype.set=function(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,e===bi.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)},e.prototype.setAndBroadcast=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.logClientOfflineWarningIfNecessary=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(g(t),this.shouldWarnClientIsOffline=!1):m(Di,t)},e.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},e}();function Ni(e){switch(e){case S.OK:return v("Treated status OK as error");case S.CANCELLED:case S.UNKNOWN:case S.DEADLINE_EXCEEDED:case S.RESOURCE_EXHAUSTED:case S.INTERNAL:case S.UNAVAILABLE:case S.UNAUTHENTICATED:return!1;case S.INVALID_ARGUMENT:case S.NOT_FOUND:case S.ALREADY_EXISTS:case S.PERMISSION_DENIED:case S.FAILED_PRECONDITION:case S.ABORTED:case S.OUT_OF_RANGE:case S.UNIMPLEMENTED:case S.DATA_LOSS:return!0;default:return v("Unknown status code: "+e)}}function Ri(e){return Ni(e)&&e!==S.ABORTED}function Li(e){var t=ki[e];if(void 0!==t)return Pi(t)}function Pi(e){if(void 0===e)return g("GRPC error has no .code"),S.UNKNOWN;switch(e){case ki.OK:return S.OK;case ki.CANCELLED:return S.CANCELLED;case ki.UNKNOWN:return S.UNKNOWN;case ki.DEADLINE_EXCEEDED:return S.DEADLINE_EXCEEDED;case ki.RESOURCE_EXHAUSTED:return S.RESOURCE_EXHAUSTED;case ki.INTERNAL:return S.INTERNAL;case ki.UNAVAILABLE:return S.UNAVAILABLE;case ki.UNAUTHENTICATED:return S.UNAUTHENTICATED;case ki.INVALID_ARGUMENT:return S.INVALID_ARGUMENT;case ki.NOT_FOUND:return S.NOT_FOUND;case ki.ALREADY_EXISTS:return S.ALREADY_EXISTS;case ki.PERMISSION_DENIED:return S.PERMISSION_DENIED;case ki.FAILED_PRECONDITION:return S.FAILED_PRECONDITION;case ki.ABORTED:return S.ABORTED;case ki.OUT_OF_RANGE:return S.OUT_OF_RANGE;case ki.UNIMPLEMENTED:return S.UNIMPLEMENTED;case ki.DATA_LOSS:return S.DATA_LOSS;default:return v("Unknown status code: "+e)}}function xi(e){if(void 0===e)return ki.OK;switch(e){case S.OK:return ki.OK;case S.CANCELLED:return ki.CANCELLED;case S.UNKNOWN:return ki.UNKNOWN;case S.DEADLINE_EXCEEDED:return ki.DEADLINE_EXCEEDED;case S.RESOURCE_EXHAUSTED:return ki.RESOURCE_EXHAUSTED;case S.INTERNAL:return ki.INTERNAL;case S.UNAVAILABLE:return ki.UNAVAILABLE;case S.UNAUTHENTICATED:return ki.UNAUTHENTICATED;case S.INVALID_ARGUMENT:return ki.INVALID_ARGUMENT;case S.NOT_FOUND:return ki.NOT_FOUND;case S.ALREADY_EXISTS:return ki.ALREADY_EXISTS;case S.PERMISSION_DENIED:return ki.PERMISSION_DENIED;case S.FAILED_PRECONDITION:return ki.FAILED_PRECONDITION;case S.ABORTED:return ki.ABORTED;case S.OUT_OF_RANGE:return ki.OUT_OF_RANGE;case S.UNIMPLEMENTED:return ki.UNIMPLEMENTED;case S.DATA_LOSS:return ki.DATA_LOSS;default:return v("Unknown status code: "+e)}}function Bi(e){var t=e.toLowerCase().replace("_","-");return Object.values(S).indexOf(t)>=0?t:S.UNKNOWN}(function(e){e[e["OK"]=0]="OK",e[e["CANCELLED"]=1]="CANCELLED",e[e["UNKNOWN"]=2]="UNKNOWN",e[e["INVALID_ARGUMENT"]=3]="INVALID_ARGUMENT",e[e["DEADLINE_EXCEEDED"]=4]="DEADLINE_EXCEEDED",e[e["NOT_FOUND"]=5]="NOT_FOUND",e[e["ALREADY_EXISTS"]=6]="ALREADY_EXISTS",e[e["PERMISSION_DENIED"]=7]="PERMISSION_DENIED",e[e["UNAUTHENTICATED"]=16]="UNAUTHENTICATED",e[e["RESOURCE_EXHAUSTED"]=8]="RESOURCE_EXHAUSTED",e[e["FAILED_PRECONDITION"]=9]="FAILED_PRECONDITION",e[e["ABORTED"]=10]="ABORTED",e[e["OUT_OF_RANGE"]=11]="OUT_OF_RANGE",e[e["UNIMPLEMENTED"]=12]="UNIMPLEMENTED",e[e["INTERNAL"]=13]="INTERNAL",e[e["UNAVAILABLE"]=14]="UNAVAILABLE",e[e["DATA_LOSS"]=15]="DATA_LOSS"})(ki||(ki={}));var qi,Ui,Vi=function(){function e(e){this.comparator=e?function(t,n){return e(t,n)||Te.comparator(t.key,n.key)}:function(e,t){return Te.comparator(e.key,t.key)},this.keyedMap=Ge(),this.sortedSet=new Le(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal(function(t,n){return e(t),!1})},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();while(n.hasNext()){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}();(function(e){e[e["Added"]=0]="Added",e[e["Removed"]=1]="Removed",e[e["Modified"]=2]="Modified",e[e["Metadata"]=3]="Metadata"})(qi||(qi={})),function(e){e[e["Local"]=0]="Local",e[e["Synced"]=1]="Synced"}(Ui||(Ui={}));var ji,Wi=function(){function e(){this.changeMap=new Le(Te.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.changeMap.get(t);n?e.type!==qi.Added&&n.type===qi.Metadata?this.changeMap=this.changeMap.insert(t,e):e.type===qi.Metadata&&n.type!==qi.Removed?this.changeMap=this.changeMap.insert(t,{type:n.type,doc:e.doc}):e.type===qi.Modified&&n.type===qi.Modified?this.changeMap=this.changeMap.insert(t,{type:qi.Modified,doc:e.doc}):e.type===qi.Modified&&n.type===qi.Added?this.changeMap=this.changeMap.insert(t,{type:qi.Added,doc:e.doc}):e.type===qi.Removed&&n.type===qi.Added?this.changeMap=this.changeMap.remove(t):e.type===qi.Removed&&n.type===qi.Modified?this.changeMap=this.changeMap.insert(t,{type:qi.Removed,doc:n.doc}):e.type===qi.Added&&n.type===qi.Removed?this.changeMap=this.changeMap.insert(t,{type:qi.Modified,doc:e.doc}):v("unsupported combination of changes: "+JSON.stringify(e)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(t,e)},e.prototype.getChanges=function(){var e=[];return this.changeMap.inorderTraversal(function(t,n){e.push(n)}),e},e}(),Ki=function(){function e(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return e.fromInitialDocuments=function(t,n,r,i){var o=[];return n.forEach(function(e){o.push({type:qi.Added,doc:e})}),new e(t,n,Vi.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){if(this.fromCache!==e.fromCache||this.syncStateChanged!==e.syncStateChanged||!this.mutatedKeys.isEqual(e.mutatedKeys)||!this.query.isEqual(e.query)||!this.docs.isEqual(e.docs)||!this.oldDocs.isEqual(e.oldDocs))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},e}(),Gi=function(){function e(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r,i=(r={},r[t]=zi.createSynthesizedTargetChangeForCurrentChange(t,n),r);return new e(Re.MIN,i,Xe(),je(),Ye())},e}(),zi=function(){function e(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(T(),n,Ye(),Ye(),Ye())},e}(),Qi=function(){function e(e,t,n,r){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=n,this.newDoc=r}return e}(),Hi=function(){function e(e,t){this.targetId=e,this.existenceFilter=t}return e}();(function(e){e[e["NoChange"]=0]="NoChange",e[e["Added"]=1]="Added",e[e["Removed"]=2]="Removed",e[e["Current"]=3]="Current",e[e["Reset"]=4]="Reset"})(ji||(ji={}));var Yi=function(){function e(e,t,n,r){void 0===n&&(n=T()),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}return e}(),Ji=function(){function e(){this.pendingResponses=0,this.documentChanges=eo(),this._resumeToken=T(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),e.prototype.updateResumeToken=function(e){e.length>0&&(this._hasPendingChanges=!0,this._resumeToken=e)},e.prototype.toTargetChange=function(){var e=Ye(),t=Ye(),n=Ye();return this.documentChanges.forEach(function(r,i){switch(i){case qi.Added:e=e.add(r);break;case qi.Modified:t=t.add(r);break;case qi.Removed:n=n.add(r);break;default:v("Encountered invalid change type: "+i)}}),new zi(this._resumeToken,this._current,e,t,n)},e.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=eo()},e.prototype.addDocumentChange=function(e,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,t)},e.prototype.removeDocumentChange=function(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)},e.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},e.prototype.recordTargetResponse=function(){this.pendingResponses-=1},e.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},e}(),Xi="WatchChangeAggregator",$i=function(){function e(e){this.metadataProvider=e,this.targetStates={},this.pendingDocumentUpdates=je(),this.pendingDocumentTargetMapping=Zi(),this.pendingTargetResets=new qe(re)}return e.prototype.handleDocumentChange=function(e){for(var t=0,n=e.updatedTargetIds;t<n.length;t++){var r=n[t];e.newDoc instanceof on?this.addDocumentToTarget(r,e.newDoc):e.newDoc instanceof an&&this.removeDocumentFromTarget(r,e.key,e.newDoc)}for(var i=0,o=e.removedTargetIds;i<o.length;i++){r=o[i];this.removeDocumentFromTarget(r,e.key,e.newDoc)}},e.prototype.handleTargetChange=function(e){var t=this;this.forEachTarget(e,function(n){var r=t.ensureTargetState(n);switch(e.state){case ji.NoChange:t.isActiveTarget(n)&&r.updateResumeToken(e.resumeToken);break;case ji.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(e.resumeToken);break;case ji.Removed:r.recordTargetResponse(),r.isPending||t.removeTarget(n),w(!e.cause,"WatchChangeAggregator does not handle errored targets");break;case ji.Current:t.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(e.resumeToken));break;case ji.Reset:t.isActiveTarget(n)&&(t.resetTarget(n),r.updateResumeToken(e.resumeToken));break;default:v("Unknown target watch change state: "+e.state)}})},e.prototype.forEachTarget=function(e,t){e.targetIds.length>0?e.targetIds.forEach(t):I(this.targetStates,t)},e.prototype.handleExistenceFilter=function(e){var t=e.targetId,n=e.existenceFilter.count,r=this.targetDataForActiveTarget(t);if(r){var i=r.target;if(i.isDocumentQuery())if(0===n){var o=new Te(i.path);this.removeDocumentFromTarget(t,o,new an(o,Re.forDeletedDoc()))}else w(1===n,"Single document existence filter with count: "+n);else{var a=this.getCurrentDocumentCountForTarget(t);a!==n&&(this.resetTarget(t),this.pendingTargetResets=this.pendingTargetResets.add(t))}}},e.prototype.createRemoteEvent=function(e){var t=this,n={};I(this.targetStates,function(r,i){var o=t.targetDataForActiveTarget(r);if(o){if(i.current&&o.target.isDocumentQuery()){var a=new Te(o.target.path);null!==t.pendingDocumentUpdates.get(a)||t.targetContainsDocument(r,a)||t.removeDocumentFromTarget(r,a,new an(a,e))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}});var r=Ye();this.pendingDocumentTargetMapping.forEach(function(e,n){var i=!0;n.forEachWhile(function(e){var n=t.targetDataForActiveTarget(e);return!n||n.purpose===Gn.LimboResolution||(i=!1,!1)}),i&&(r=r.add(e))});var i=new Gi(e,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=je(),this.pendingDocumentTargetMapping=Zi(),this.pendingTargetResets=new qe(re),i},e.prototype.addDocumentToTarget=function(e,t){if(this.isActiveTarget(e)){var n=this.targetContainsDocument(e,t.key)?qi.Modified:qi.Added,r=this.ensureTargetState(e);r.addDocumentChange(t.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(e))}},e.prototype.removeDocumentFromTarget=function(e,t,n){if(this.isActiveTarget(e)){var r=this.ensureTargetState(e);this.targetContainsDocument(e,t)?r.addDocumentChange(t,qi.Removed):r.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(e)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,n))}},e.prototype.removeTarget=function(e){delete this.targetStates[e]},e.prototype.getCurrentDocumentCountForTarget=function(e){var t=this.ensureTargetState(e),n=t.toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size},e.prototype.recordPendingTargetRequest=function(e){var t=this.ensureTargetState(e);t.recordPendingTargetRequest()},e.prototype.ensureTargetState=function(e){return this.targetStates[e]||(this.targetStates[e]=new Ji),this.targetStates[e]},e.prototype.ensureDocumentTargetMapping=function(e){var t=this.pendingDocumentTargetMapping.get(e);return t||(t=new qe(re),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,t)),t},e.prototype.isActiveTarget=function(e){var t=null!==this.targetDataForActiveTarget(e);return t||m(Xi,"Detected inactive target",e),t},e.prototype.targetDataForActiveTarget=function(e){var t=this.targetStates[e];return t&&t.isPending?null:this.metadataProvider.getTargetDataForTarget(e)},e.prototype.resetTarget=function(e){var t=this;w(!this.targetStates[e].isPending,"Should only reset active targets"),this.targetStates[e]=new Ji;var n=this.metadataProvider.getRemoteKeysForTarget(e);n.forEach(function(n){t.removeDocumentFromTarget(e,n,null)})},e.prototype.targetContainsDocument=function(e,t){var n=this.metadataProvider.getRemoteKeysForTarget(e);return n.has(t)},e}();function Zi(){return new Le(Te.comparator)}function eo(){return new Le(Te.comparator)}var to="RemoteStore",no=10,ro=function(){function e(e,t,n,r,i){var o=this;this.localStore=e,this.datastore=t,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=i,this.connectivityMonitor.addCallback(function(e){n.enqueueAndForget(function(){return a.__awaiter(o,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return this.canUseNetwork()?(m(to,"Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})}),this.onlineStateTracker=new Mi(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return e.prototype.start=function(){return this.enableNetwork()},e.prototype.enableNetwork=function(){return a.__awaiter(this,void 0,void 0,function(){var e;return a.__generator(this,function(t){switch(t.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(e=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return e.lastStreamToken=t.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(bi.Unknown),[4,this.fillWritePipeline()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},e.prototype.disableNetwork=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(bi.Offline),[2]}})})},e.prototype.disableNetworkInternal=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return[4,this.writeStream.stop()];case 1:return e.sent(),[4,this.watchStream.stop()];case 2:return e.sent(),this.writePipeline.length>0&&(m(to,"Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}})})},e.prototype.shutdown=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return m(to,"RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(bi.Unknown),[2]}})})},e.prototype.listen=function(e){O(this.listenTargets,e.targetId)||(this.listenTargets[e.targetId]=e,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(e))},e.prototype.unlisten=function(e){w(O(this.listenTargets,e),"unlisten called on target no currently watched: "+e),delete this.listenTargets[e],this.watchStream.isOpen()&&this.sendUnwatchRequest(e),A(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(bi.Unknown))},e.prototype.getTargetDataForTarget=function(e){return this.listenTargets[e]||null},e.prototype.getRemoteKeysForTarget=function(e){return this.syncEngine.getRemoteKeysForTarget(e)},e.prototype.sendWatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e.targetId),this.watchStream.watch(e)},e.prototype.sendUnwatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e),this.watchStream.unwatch(e)},e.prototype.startWatchStream=function(){w(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new $i(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},e.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!A(this.listenTargets)},e.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},e.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},e.prototype.onWatchStreamOpen=function(){return a.__awaiter(this,void 0,void 0,function(){var e=this;return a.__generator(this,function(t){return I(this.listenTargets,function(t,n){e.sendWatchRequest(n)}),[2]})})},e.prototype.onWatchStreamClose=function(e){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){return void 0===e&&w(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(e),this.startWatchStream()):this.onlineStateTracker.set(bi.Unknown),[2]})})},e.prototype.onWatchStreamChange=function(e,t){return a.__awaiter(this,void 0,void 0,function(){var n;return a.__generator(this,function(r){switch(r.label){case 0:return this.onlineStateTracker.set(bi.Online),e instanceof Yi&&e.state===ji.Removed&&e.cause?[2,this.handleTargetError(e)]:(e instanceof Qi?this.watchChangeAggregator.handleDocumentChange(e):e instanceof Hi?this.watchChangeAggregator.handleExistenceFilter(e):(w(e instanceof Yi,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(e)),t.isEqual(Re.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),t.compareTo(n)>=0?[4,this.raiseWatchSnapshot(t)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.raiseWatchSnapshot=function(e){var t=this;w(!e.isEqual(Re.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(e);return I(n.targetChanges,function(n,r){if(r.resumeToken.length>0){var i=t.listenTargets[n];i&&(t.listenTargets[n]=i.withResumeToken(r.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.listenTargets[e];if(n){t.listenTargets[e]=n.withResumeToken(T(),n.snapshotVersion),t.sendUnwatchRequest(e);var r=new er(n.target,e,Gn.ExistenceFilterMismatch,n.sequenceNumber);t.sendWatchRequest(r)}}),this.syncEngine.applyRemoteEvent(n)},e.prototype.handleTargetError=function(e){var t=this;w(!!e.cause,"Handling target error without a cause");var n=e.cause,r=Promise.resolve();return e.targetIds.forEach(function(e){r=r.then(function(){return a.__awaiter(t,void 0,void 0,function(){return a.__generator(this,function(t){return O(this.listenTargets,e)?(delete this.listenTargets[e],this.watchChangeAggregator.removeTarget(e),[2,this.syncEngine.rejectListen(e,n)]):[2]})})})}),r},e.prototype.fillWritePipeline=function(){return a.__awaiter(this,void 0,void 0,function(){var e,t;return a.__generator(this,function(n){switch(n.label){case 0:return this.canAddToWritePipeline()?(e=this.writePipeline.length>0?this.writePipeline[this.writePipeline.length-1].batchId:$e,[4,this.localStore.nextMutationBatch(e)]):[3,4];case 1:return t=n.sent(),null!==t?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(t),[4,this.fillWritePipeline()];case 3:n.sent(),n.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}})})},e.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<no},e.prototype.outstandingWrites=function(){return this.writePipeline.length},e.prototype.addToWritePipeline=function(e){w(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(e),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(e.mutations)},e.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&this.writePipeline.length>0},e.prototype.startWriteStream=function(){w(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},e.prototype.onWriteStreamOpen=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){return this.writeStream.writeHandshake(),[2]})})},e.prototype.onWriteHandshakeComplete=function(){var e=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){for(var t=0,n=e.writePipeline;t<n.length;t++){var r=n[t];e.writeStream.writeMutations(r.mutations)}}).catch(Er)},e.prototype.onMutationResult=function(e,t){var n=this;w(this.writePipeline.length>0,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=et.from(r,e,t,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then(function(){return n.fillWritePipeline()})},e.prototype.onWriteStreamClose=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,n=this;return a.__generator(this,function(r){return void 0===e&&w(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),e&&this.writePipeline.length>0?(t=void 0,t=this.writeStream.handshakeComplete?this.handleWriteError(e):this.handleHandshakeError(e),[2,t.then(function(){n.shouldStartWriteStream()&&n.startWriteStream()})]):[2]})})},e.prototype.handleHandshakeError=function(e){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){return Ni(e.code)?(m(to,"RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=T(),[2,this.localStore.setLastStreamToken(T()).catch(Er)]):[2]})})},e.prototype.handleWriteError=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,n=this;return a.__generator(this,function(r){return Ri(e.code)?(t=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(t.batchId,e).then(function(){return n.fillWritePipeline()})]):[2]})})},e.prototype.createTransaction=function(){return new Ii(this.datastore)},e.prototype.restartNetwork=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(bi.Unknown),[4,this.enableNetwork()];case 2:return e.sent(),[2]}})})},e.prototype.handleCredentialChange=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return this.canUseNetwork()?(m(to,"RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.applyPrimaryState=function(e){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return this.isPrimary=e,e&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return t.sent(),[3,4];case 2:return e?[3,4]:[4,this.disableNetworkInternal()];case 3:t.sent(),this.onlineStateTracker.set(bi.Unknown),t.label=4;case 4:return[2]}})})},e}(),io=function(){function e(e,t){if(N("GeoPoint",arguments,2),x("GeoPoint","number",1,e),x("GeoPoint","number",2,t),!isFinite(e)||e<-90||e>90)throw new E(S.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new E(S.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype._compareTo=function(e){return re(this._lat,e._lat)||re(this._long,e._long)},e}(),oo=function(){function e(){}return e.prototype.applyToLocalView=function(e,t){return new Xt(t,e)},e.prototype.applyToRemoteDocument=function(e,t){return t},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e},e.instance=new e,e}(),ao=function(){function e(e){this.elements=e}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=co(e),n=function(e){t.find(function(t){return t.isEqual(e)})||t.push(e)},r=0,i=this.elements;r<i.length;r++){var o=i[r];n(o)}return new nn(t)},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e&&oe(t.elements,this.elements)},e}(),so=function(){function e(e){this.elements=e}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=co(e),n=function(e){t=t.filter(function(t){return!t.isEqual(e)})},r=0,i=this.elements;r<i.length;r++){var o=i[r];n(o)}return new nn(t)},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e&&oe(t.elements,this.elements)},e}(),uo=function(){function e(e){this.operand=e}return e.prototype.applyToLocalView=function(e,t){var n=this.computeBaseValue(e);if(n instanceof Qt&&this.operand instanceof Qt){var r=n.internalValue+this.operand.internalValue;return new Qt(r)}r=n.internalValue+this.operand.internalValue;return new Ht(r)},e.prototype.applyToRemoteDocument=function(e,t){return w(null!==t,"Didn't receive transformResult for NUMERIC_ADD transform"),t},e.prototype.computeBaseValue=function(e){return e instanceof Kt?e:new Qt(0)},e.prototype.isEqual=function(t){return t instanceof e&&this.operand.isEqual(t.operand)},e}();function co(e){return e instanceof nn?e.internalValue.slice():[]}var lo=function(){function e(e){this.count=e}return e.prototype.isEqual=function(e){return e&&e.count===this.count},e}(),ho=function(){var e={};return e[Qr.ASCENDING.name]="ASCENDING",e[Qr.DESCENDING.name]="DESCENDING",e}(),fo=function(){var e={};return e[Ur.LESS_THAN.name]="LESS_THAN",e[Ur.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",e[Ur.GREATER_THAN.name]="GREATER_THAN",e[Ur.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",e[Ur.EQUAL.name]="EQUAL",e[Ur.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",e[Ur.IN.name]="IN",e[Ur.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",e}(),po=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mo(e,t){w(!Rr(e),t+" is missing")}function go(e){return"number"===typeof e?e:"string"===typeof e?Number(e):v("can't parse "+e)}var yo=function(){function e(e,t){this.databaseId=e,this.options=t}return e.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},e.prototype.unsafeCastProtoByteString=function(e){return e},e.prototype.fromRpcStatus=function(e){var t=void 0===e.code?S.UNKNOWN:Pi(e.code);return new E(t,e.message||"")},e.prototype.toInt32Value=function(e){return this.options.useProto3Json||Rr(e)?e:{value:e}},e.prototype.fromInt32Value=function(e){var t;return t="object"===typeof e?e.value:e,Rr(t)?null:t},e.prototype.toTimestamp=function(e){if(this.options.useProto3Json){var t=new Date(1e3*e.seconds).toISOString(),n=t.replace(/\.\d*/,"").replace("Z",""),r=("000000000"+e.nanoseconds).slice(-9);return n+"."+r+"Z"}return{seconds:""+e.seconds,nanos:e.nanoseconds}},e.prototype.fromTimestamp=function(e){if("string"===typeof e)return this.fromIso8601String(e);w(!!e,"Cannot deserialize null or undefined timestamp.");var t=go(e.seconds||"0"),n=e.nanos||0;return new Ne(t,n)},e.prototype.fromIso8601String=function(e){var t=0,n=po.exec(e);if(w(!!n,"invalid timestamp: "+e),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e),o=Math.floor(i.getTime()/1e3);return new Ne(o,t)},e.prototype.toBytes=function(e){return this.options.useProto3Json?e.toBase64():this.unsafeCastProtoByteString(e.toUint8Array())},e.prototype.fromBlob=function(e){return"string"===typeof e?(w(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),le.fromBase64String(e)):(w(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),le.fromUint8Array(e))},e.prototype.toVersion=function(e){return this.toTimestamp(e.toTimestamp())},e.prototype.fromVersion=function(e){return w(!!e,"Trying to deserialize version that isn't set"),Re.fromTimestamp(this.fromTimestamp(e))},e.prototype.toResourceName=function(e,t){return this.fullyQualifiedPrefixPath(e).child("documents").child(t).canonicalString()},e.prototype.fromResourceName=function(e){var t=ve.fromString(e);return w(this.isValidResourceName(t),"Tried to deserialize invalid key "+t.toString()),t},e.prototype.toName=function(e){return this.toResourceName(this.databaseId,e.path)},e.prototype.fromName=function(e){var t=this.fromResourceName(e);return w(t.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+t.get(1)+" vs "+this.databaseId.projectId),w(!t.get(3)&&!this.databaseId.database||t.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+t.get(3)+" vs "+this.databaseId.database),new Te(this.extractLocalPathFromResourceName(t))},e.prototype.toQueryPath=function(e){return this.toResourceName(this.databaseId,e)},e.prototype.fromQueryPath=function(e){var t=this.fromResourceName(e);return 4===t.length?ve.EMPTY_PATH:this.extractLocalPathFromResourceName(t)},Object.defineProperty(e.prototype,"encodedDatabaseId",{get:function(){var e=new ve(["projects",this.databaseId.projectId,"databases",this.databaseId.database]);return e.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.fullyQualifiedPrefixPath=function(e){return new ve(["projects",e.projectId,"databases",e.database])},e.prototype.extractLocalPathFromResourceName=function(e){return w(e.length>4&&"documents"===e.get(4),"tried to deserialize invalid key "+e.toString()),e.popFirst(5)},e.prototype.isValidResourceName=function(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)},e.prototype.toValue=function(e){if(e instanceof jt)return{nullValue:"NULL_VALUE"};if(e instanceof Wt)return{booleanValue:e.value()};if(e instanceof Qt)return{integerValue:""+e.value()};if(e instanceof Ht){var t=e.value();if(this.options.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:e.value()}}return e instanceof Yt?{stringValue:e.value()}:e instanceof tn?{mapValue:this.toMapValue(e)}:e instanceof nn?{arrayValue:this.toArrayValue(e)}:e instanceof Jt?{timestampValue:this.toTimestamp(e.internalValue)}:e instanceof en?{geoPointValue:{latitude:e.value().latitude,longitude:e.value().longitude}}:e instanceof $t?{bytesValue:this.toBytes(e.value())}:e instanceof Zt?{referenceValue:this.toResourceName(e.databaseId,e.key.path)}:v("Unknown FieldValue "+JSON.stringify(e))},e.prototype.fromValue=function(e){var t=this;if("nullValue"in e)return jt.INSTANCE;if("booleanValue"in e)return Wt.of(e.booleanValue);if("integerValue"in e)return new Qt(go(e.integerValue));if("doubleValue"in e){if(this.options.useProto3Json){if("NaN"===e.doubleValue)return Ht.NAN;if("Infinity"===e.doubleValue)return Ht.POSITIVE_INFINITY;if("-Infinity"===e.doubleValue)return Ht.NEGATIVE_INFINITY}return new Ht(e.doubleValue)}if("stringValue"in e)return new Yt(e.stringValue);if("mapValue"in e)return this.fromFields(e.mapValue.fields||{});if("arrayValue"in e){mo(e.arrayValue,"arrayValue");var n=e.arrayValue.values||[];return new nn(n.map(function(e){return t.fromValue(e)}))}if("timestampValue"in e)return mo(e.timestampValue,"timestampValue"),new Jt(this.fromTimestamp(e.timestampValue));if("geoPointValue"in e){mo(e.geoPointValue,"geoPointValue");var r=e.geoPointValue.latitude||0,i=e.geoPointValue.longitude||0;return new en(new io(r,i))}if("bytesValue"in e){mo(e.bytesValue,"bytesValue");var o=this.fromBlob(e.bytesValue);return new $t(o)}if("referenceValue"in e){mo(e.referenceValue,"referenceValue");var a=this.fromResourceName(e.referenceValue),s=new pe(a.get(1),a.get(3)),u=new Te(this.extractLocalPathFromResourceName(a));return new Zt(s,u)}return v("Unknown Value proto "+JSON.stringify(e))},e.prototype.toMutationDocument=function(e,t){return{name:this.toName(e),fields:this.toFields(t)}},e.prototype.toDocument=function(e){return w(!e.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(e.key),fields:this.toFields(e.data()),updateTime:this.toTimestamp(e.version.toTimestamp())}},e.prototype.fromDocument=function(e,t){var n=this,r=this.fromName(e.name),i=this.fromVersion(e.updateTime);return new on(r,i,{hasCommittedMutations:!!t},void 0,e,function(e){return n.fromValue(e)})},e.prototype.toFields=function(e){var t=this,n={};return e.forEach(function(e,r){n[e]=t.toValue(r)}),n},e.prototype.fromFields=function(e){var t=this,n=e,r=tn.EMPTY;return D(n,function(e,n){r=r.set(new be([e]),t.fromValue(n))}),r},e.prototype.toMapValue=function(e){return{fields:this.toFields(e)}},e.prototype.toArrayValue=function(e){var t=this,n=[];return e.forEach(function(e){n.push(t.toValue(e))}),{values:n}},e.prototype.fromFound=function(e){var t=this;w(!!e.found,"Tried to deserialize a found document from a missing document."),mo(e.found.name,"doc.found.name"),mo(e.found.updateTime,"doc.found.updateTime");var n=this.fromName(e.found.name),r=this.fromVersion(e.found.updateTime);return new on(n,r,{},void 0,e.found,function(e){return t.fromValue(e)})},e.prototype.fromMissing=function(e){w(!!e.missing,"Tried to deserialize a missing document from a found document."),w(!!e.readTime,"Tried to deserialize a missing document without a read time.");var t=this.fromName(e.missing),n=this.fromVersion(e.readTime);return new an(t,n)},e.prototype.fromMaybeDocument=function(e){return"found"in e?this.fromFound(e):"missing"in e?this.fromMissing(e):v("invalid batch get response: "+JSON.stringify(e))},e.prototype.toWatchTargetChangeState=function(e){switch(e){case ji.Added:return"ADD";case ji.Current:return"CURRENT";case ji.NoChange:return"NO_CHANGE";case ji.Removed:return"REMOVE";case ji.Reset:return"RESET";default:return v("Unknown WatchTargetChangeState: "+e)}},e.prototype.toTestWatchChange=function(e){if(e instanceof Hi)return{filter:{count:e.existenceFilter.count,targetId:e.targetId}};if(e instanceof Qi){if(e.newDoc instanceof on){var t=e.newDoc;return{documentChange:{document:{name:this.toName(t.key),fields:this.toFields(t.data()),updateTime:this.toVersion(t.version)},targetIds:e.updatedTargetIds,removedTargetIds:e.removedTargetIds}}}if(e.newDoc instanceof an){t=e.newDoc;return{documentDelete:{document:this.toName(t.key),readTime:this.toVersion(t.version),removedTargetIds:e.removedTargetIds}}}if(null===e.newDoc)return{documentRemove:{document:this.toName(e.key),removedTargetIds:e.removedTargetIds}}}if(e instanceof Yi){var n=void 0;return e.cause&&(n={code:xi(e.cause.code),message:e.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(e.state),targetIds:e.targetIds,resumeToken:this.unsafeCastProtoByteString(e.resumeToken),cause:n}}}return v("Unrecognized watch change: "+JSON.stringify(e))},e.prototype.fromWatchChange=function(e){var t,n=this;if("targetChange"in e){mo(e.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=e.targetChange.resumeToken||this.emptyByteString(),a=e.targetChange.cause,s=a&&this.fromRpcStatus(a);t=new Yi(r,i,o,s||null)}else if("documentChange"in e){mo(e.documentChange,"documentChange");var u=e.documentChange;mo(u.document,"documentChange.name"),mo(u.document.name,"documentChange.document.name"),mo(u.document.updateTime,"documentChange.document.updateTime");var c=this.fromName(u.document.name),l=this.fromVersion(u.document.updateTime),d=new on(c,l,{},void 0,u.document,function(e){return n.fromValue(e)}),h=u.targetIds||[],f=u.removedTargetIds||[];t=new Qi(h,f,d.key,d)}else if("documentDelete"in e){mo(e.documentDelete,"documentDelete");var p=e.documentDelete;mo(p.document,"documentDelete.document");c=this.fromName(p.document),l=p.readTime?this.fromVersion(p.readTime):Re.forDeletedDoc(),d=new an(c,l),f=p.removedTargetIds||[];t=new Qi([],f,d.key,d)}else if("documentRemove"in e){mo(e.documentRemove,"documentRemove");var m=e.documentRemove;mo(m.document,"documentRemove");c=this.fromName(m.document),f=m.removedTargetIds||[];t=new Qi([],f,c,null)}else{if(!("filter"in e))return v("Unknown change type "+JSON.stringify(e));mo(e.filter,"filter");var g=e.filter;mo(g.targetId,"filter.targetId");var y=g.count||0,w=new lo(y),b=g.targetId;t=new Hi(b,w)}return t},e.prototype.fromWatchTargetChangeState=function(e){return"NO_CHANGE"===e?ji.NoChange:"ADD"===e?ji.Added:"REMOVE"===e?ji.Removed:"CURRENT"===e?ji.Current:"RESET"===e?ji.Reset:v("Got unexpected TargetChange.state: "+e)},e.prototype.versionFromListenResponse=function(e){if(!("targetChange"in e))return Re.MIN;var t=e.targetChange;return t.targetIds&&t.targetIds.length?Re.MIN:t.readTime?this.fromVersion(t.readTime):Re.MIN},e.prototype.toMutation=function(e){var t,n=this;if(e instanceof Pt)t={update:this.toMutationDocument(e.key,e.value)};else if(e instanceof qt)t={delete:this.toName(e.key)};else if(e instanceof xt)t={update:this.toMutationDocument(e.key,e.data),updateMask:this.toDocumentMask(e.fieldMask)};else{if(!(e instanceof Bt))return v("Unknown mutation type "+e.type);t={transform:{document:this.toName(e.key),fieldTransforms:e.fieldTransforms.map(function(e){return n.toFieldTransform(e)})}}}return e.precondition.isNone||(t.currentDocument=this.toPrecondition(e.precondition)),t},e.prototype.fromMutation=function(e){var t=this,n=e.currentDocument?this.fromPrecondition(e.currentDocument):Rt.NONE;if(e.update){mo(e.update.name,"name");var r=this.fromName(e.update.name),i=this.fromFields(e.update.fields||{});if(e.updateMask){var o=this.fromDocumentMask(e.updateMask);return new xt(r,i,o,n)}return new Pt(r,i,n)}if(e.delete){r=this.fromName(e.delete);return new qt(r,n)}if(e.transform){r=this.fromName(e.transform.document);var a=e.transform.fieldTransforms.map(function(e){return t.fromFieldTransform(e)});return w(!0===n.exists,'Transforms only support precondition "exists == true"'),new Bt(r,a)}return v("unknown mutation proto: "+JSON.stringify(e))},e.prototype.toPrecondition=function(e){return w(!e.isNone,"Can't serialize an empty precondition"),void 0!==e.updateTime?{updateTime:this.toVersion(e.updateTime)}:void 0!==e.exists?{exists:e.exists}:v("Unknown precondition")},e.prototype.fromPrecondition=function(e){return void 0!==e.updateTime?Rt.updateTime(this.fromVersion(e.updateTime)):void 0!==e.exists?Rt.exists(e.exists):Rt.NONE},e.prototype.fromWriteResult=function(e,t){var n=this,r=e.updateTime?this.fromVersion(e.updateTime):this.fromVersion(t);r.isEqual(Re.MIN)&&(r=this.fromVersion(t));var i=null;return e.transformResults&&e.transformResults.length>0&&(i=e.transformResults.map(function(e){return n.fromValue(e)})),new Ft(r,i)},e.prototype.fromWriteResults=function(e,t){var n=this;return e&&e.length>0?(w(void 0!==t,"Received a write result without a commit time"),e.map(function(e){return n.fromWriteResult(e,t)})):[]},e.prototype.toFieldTransform=function(e){var t=this,n=e.transform;if(n instanceof oo)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ao)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements.map(function(e){return t.toValue(e)})}};if(n instanceof so)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements.map(function(e){return t.toValue(e)})}};if(n instanceof uo)return{fieldPath:e.field.canonicalString(),increment:this.toValue(n.operand)};throw v("Unknown transform: "+e.transform)},e.prototype.fromFieldTransform=function(e){var t=this,n=null;if("setToServerValue"in e)w("REQUEST_TIME"===e.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(e)),n=oo.instance;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new ao(r.map(function(e){return t.fromValue(e)}))}else if("removeAllFromArray"in e){r=e.removeAllFromArray.values||[];n=new so(r.map(function(e){return t.fromValue(e)}))}else if("increment"in e){var i=this.fromValue(e.increment);w(i instanceof Kt,"NUMERIC_ADD transform requires a NumberValue"),n=new uo(i)}else v("Unknown transform proto: "+JSON.stringify(e));var o=be.fromServerFormat(e.fieldPath);return new At(o,n)},e.prototype.toDocumentsTarget=function(e){return{documents:[this.toQueryPath(e.path)]}},e.prototype.fromDocumentsTarget=function(e){var t=e.documents.length;w(1===t,"DocumentsTarget contained other than 1 document: "+t);var n=e.documents[0];return Br.atPath(this.fromQueryPath(n)).toTarget()},e.prototype.toQueryTarget=function(e){var t={structuredQuery:{}},n=e.path;null!==e.collectionGroup?(w(n.length%2===0,"Collection Group queries should be within a document path or root."),t.parent=this.toQueryPath(n),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(w(n.length%2!==0,"Document queries with filters are not supported."),t.parent=this.toQueryPath(n.popLast()),t.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(e.filters);r&&(t.structuredQuery.where=r);var i=this.toOrder(e.orderBy);i&&(t.structuredQuery.orderBy=i);var o=this.toInt32Value(e.limit);return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=this.toCursor(e.startAt)),e.endAt&&(t.structuredQuery.endAt=this.toCursor(e.endAt)),t},e.prototype.fromQueryTarget=function(e){var t=this.fromQueryPath(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){w(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=this.fromFilter(n.where));var s=[];n.orderBy&&(s=this.fromOrder(n.orderBy));var u=null;n.limit&&(u=this.fromInt32Value(n.limit));var c=null;n.startAt&&(c=this.fromCursor(n.startAt));var l=null;return n.endAt&&(l=this.fromCursor(n.endAt)),new Br(t,i,s,a,u,Pr.First,c,l).toTarget()},e.prototype.toListenRequestLabels=function(e){var t=this.toLabel(e.purpose);return null==t?null:{"goog-listen-tags":t}},e.prototype.toLabel=function(e){switch(e){case Gn.Listen:return null;case Gn.ExistenceFilterMismatch:return"existence-filter-mismatch";case Gn.LimboResolution:return"limbo-document";default:return v("Unrecognized query purpose: "+e)}},e.prototype.toTarget=function(e){var t,n=e.target;return t=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)},t.targetId=e.targetId,e.resumeToken.length>0&&(t.resumeToken=this.unsafeCastProtoByteString(e.resumeToken)),t},e.prototype.toFilter=function(e){var t=this;if(0!==e.length){var n=e.map(function(e){return e instanceof Vr?t.toUnaryOrFieldFilter(e):v("Unrecognized filter: "+JSON.stringify(e))});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},e.prototype.fromFilter=function(e){var t=this;return e?void 0!==e.unaryFilter?[this.fromUnaryFilter(e)]:void 0!==e.fieldFilter?[this.fromFieldFilter(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(function(e){return t.fromFilter(e)}).reduce(function(e,t){return e.concat(t)}):v("Unknown filter: "+JSON.stringify(e)):[]},e.prototype.toOrder=function(e){var t=this;if(0!==e.length)return e.map(function(e){return t.toPropertyOrder(e)})},e.prototype.fromOrder=function(e){var t=this;return e.map(function(e){return t.fromPropertyOrder(e)})},e.prototype.toCursor=function(e){var t=this;return{before:e.before,values:e.position.map(function(e){return t.toValue(e)})}},e.prototype.fromCursor=function(e){var t=this,n=!!e.before,r=e.values.map(function(e){return t.fromValue(e)});return new Hr(r,n)},e.prototype.toDirection=function(e){return ho[e.name]},e.prototype.fromDirection=function(e){switch(e){case"ASCENDING":return Qr.ASCENDING;case"DESCENDING":return Qr.DESCENDING;default:return}},e.prototype.toOperatorName=function(e){return fo[e.name]},e.prototype.fromOperatorName=function(e){switch(e){case"EQUAL":return Ur.EQUAL;case"GREATER_THAN":return Ur.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return Ur.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return Ur.LESS_THAN;case"LESS_THAN_OR_EQUAL":return Ur.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return Ur.ARRAY_CONTAINS;case"IN":return Ur.IN;case"ARRAY_CONTAINS_ANY":return Ur.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return v("Unspecified operator");default:return v("Unknown operator")}},e.prototype.toFieldPathReference=function(e){return{fieldPath:e.canonicalString()}},e.prototype.fromFieldPathReference=function(e){return be.fromServerFormat(e.fieldPath)},e.prototype.toPropertyOrder=function(e){return{field:this.toFieldPathReference(e.field),direction:this.toDirection(e.dir)}},e.prototype.fromPropertyOrder=function(e){return new Yr(this.fromFieldPathReference(e.field),this.fromDirection(e.direction))},e.prototype.fromFieldFilter=function(e){return Vr.create(this.fromFieldPathReference(e.fieldFilter.field),this.fromOperatorName(e.fieldFilter.op),this.fromValue(e.fieldFilter.value))},e.prototype.toUnaryOrFieldFilter=function(e){if(e.op===Ur.EQUAL){if(e.value.isEqual(Ht.NAN))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NAN"}};if(e.value.isEqual(jt.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.toFieldPathReference(e.field),op:this.toOperatorName(e.op),value:this.toValue(e.value)}}},e.prototype.fromUnaryFilter=function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=this.fromFieldPathReference(e.unaryFilter.field);return Vr.create(t,Ur.EQUAL,Ht.NAN);case"IS_NULL":var n=this.fromFieldPathReference(e.unaryFilter.field);return Vr.create(n,Ur.EQUAL,jt.INSTANCE);case"OPERATOR_UNSPECIFIED":return v("Unspecified filter");default:return v("Unknown filter")}},e.prototype.toDocumentMask=function(e){var t=[];return e.fields.forEach(function(e){return t.push(e.canonicalString())}),{fieldPaths:t}},e.prototype.fromDocumentMask=function(e){var t=e.fieldPaths||[],n=t.map(function(e){return be.fromServerFormat(e)});return Dt.fromArray(n)},e}(),vo=function(){function e(){this.viewSnap=null,this.targetId=0,this.listeners=[]}return e}(),wo=function(){function e(e){this.syncEngine=e,this.queries=new un(function(e){return e.canonicalId()}),this.onlineState=bi.Unknown,this.snapshotsInSyncListeners=new Set,this.syncEngine.subscribe(this)}return e.prototype.listen=function(e){var t=e.query,n=!1,r=this.queries.get(t);r||(n=!0,r=new vo,this.queries.set(t,r)),r.listeners.push(e);var i=e.applyOnlineStateChange(this.onlineState);if(w(!i,"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),r.viewSnap){var o=e.onViewSnapshot(r.viewSnap);o&&this.raiseSnapshotsInSyncEvent()}return n?this.syncEngine.listen(t).then(function(e){return r.targetId=e,e}):Promise.resolve(r.targetId)},e.prototype.unlisten=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,n,r,i;return a.__generator(this,function(o){return t=e.query,n=!1,r=this.queries.get(t),r&&(i=r.listeners.indexOf(e),i>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length)),n?(this.queries.delete(t),[2,this.syncEngine.unlisten(t)]):[2]})})},e.prototype.onWatchChange=function(e){for(var t=!1,n=0,r=e;n<r.length;n++){var i=r[n],o=i.query,a=this.queries.get(o);if(a){for(var s=0,u=a.listeners;s<u.length;s++){var c=u[s];c.onViewSnapshot(i)&&(t=!0)}a.viewSnap=i}}t&&this.raiseSnapshotsInSyncEvent()},e.prototype.onWatchError=function(e,t){var n=this.queries.get(e);if(n)for(var r=0,i=n.listeners;r<i.length;r++){var o=i[r];o.onError(t)}this.queries.delete(e)},e.prototype.onOnlineStateChange=function(e){this.onlineState=e;var t=!1;this.queries.forEach(function(n,r){for(var i=0,o=r.listeners;i<o.length;i++){var a=o[i];a.applyOnlineStateChange(e)&&(t=!0)}}),t&&this.raiseSnapshotsInSyncEvent()},e.prototype.addSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.add(e),e.next()},e.prototype.removeSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.delete(e)},e.prototype.raiseSnapshotsInSyncEvent=function(){this.snapshotsInSyncListeners.forEach(function(e){e.next()})},e}(),bo=function(){function e(e,t,n){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.snap=null,this.onlineState=bi.Unknown,this.options=n||{}}return e.prototype.onViewSnapshot=function(e){if(w(e.docChanges.length>0||e.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];i.type!==qi.Metadata&&t.push(i)}e=new Ki(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(e)&&(this.queryObserver.next(e),o=!0):this.shouldRaiseInitialEvent(e,this.onlineState)&&(this.raiseInitialEvent(e),o=!0),this.snap=e,o},e.prototype.onError=function(e){this.queryObserver.error(e)},e.prototype.applyOnlineStateChange=function(e){this.onlineState=e;var t=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&(this.raiseInitialEvent(this.snap),t=!0),t},e.prototype.shouldRaiseInitialEvent=function(e,t){if(w(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!e.fromCache)return!0;var n=t!==bi.Offline;return this.options.waitForSyncWhenOnline&&n?(w(e.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!e.docs.isEmpty()||t===bi.Offline},e.prototype.shouldRaiseEvent=function(e){if(e.docChanges.length>0)return!0;var t=this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},e.prototype.raiseInitialEvent=function(e){w(!this.raisedInitialEvent,"Trying to raise initial events for second time"),e=Ki.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(e)},e}(),To=function(){function e(e,t,n,r){this.targetId=e,this.fromCache=t,this.addedKeys=n,this.removedKeys=r}return e.fromSnapshot=function(t,n){for(var r=Ye(),i=Ye(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case qi.Added:r=r.add(s.doc.key);break;case qi.Removed:i=i.add(s.doc.key);break}}return new e(t,n.fromCache,r,i)},e}(),So=function(){function e(e){this.key=e}return e}(),Eo=function(){function e(e){this.key=e}return e}(),Co=function(){function e(e,t){this.query=e,this._syncedDocuments=t,this.syncState=null,this.current=!1,this.limboDocuments=Ye(),this.mutatedKeys=Ye(),this.documentSet=new Vi(e.docComparator.bind(e))}return Object.defineProperty(e.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),e.prototype.computeDocChanges=function(e,t){var n=this,r=t?t.changeSet:new Wi,i=t?t.documentSet:this.documentSet,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=this.query.hasLimitToFirst()&&i.size===this.query.limit?i.last():null,c=this.query.hasLimitToLast()&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(function(e,t){var l=i.get(e),d=t instanceof on?t:null;d&&(w(e.isEqual(d.key),"Mismatching keys found in document changes: "+e+" != "+d.key),d=n.query.matches(d)?d:null);var h=!!l&&n.mutatedKeys.has(l.key),f=!!d&&(d.hasLocalMutations||n.mutatedKeys.has(d.key)&&d.hasCommittedMutations),p=!1;if(l&&d){var m=l.data().isEqual(d.data());m?h!==f&&(r.track({type:qi.Metadata,doc:d}),p=!0):n.shouldWaitForSyncedDocument(l,d)||(r.track({type:qi.Modified,doc:d}),p=!0,(u&&n.query.docComparator(d,u)>0||c&&n.query.docComparator(d,c)<0)&&(s=!0))}else!l&&d?(r.track({type:qi.Added,doc:d}),p=!0):l&&!d&&(r.track({type:qi.Removed,doc:l}),p=!0,(u||c)&&(s=!0));p&&(d?(a=a.add(d),o=f?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)))}),this.query.hasLimitToFirst()||this.query.hasLimitToLast())while(a.size>this.query.limit){var l=this.query.hasLimitToFirst()?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:qi.Removed,doc:l})}return w(!s||!t,"View was refilled using docs that themselves needed refilling."),{documentSet:a,changeSet:r,needsRefill:s,mutatedKeys:o}},e.prototype.shouldWaitForSyncedDocument=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(e,t,n){var r=this;w(!e.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;var o=e.changeSet.getChanges();o.sort(function(e,t){return Oo(e.type,t.type)||r.query.docComparator(e.doc,t.doc)}),this.applyTargetChange(n);var a=t?this.updateLimboDocuments():[],s=0===this.limboDocuments.size&&this.current,u=s?Ui.Synced:Ui.Local,c=u!==this.syncState;if(this.syncState=u,0!==o.length||c){var l=new Ki(this.query,e.documentSet,i,o,e.mutatedKeys,u===Ui.Local,c,!1);return{snapshot:l,limboChanges:a}}return{limboChanges:a}},e.prototype.applyOnlineStateChange=function(e){return this.current&&e===bi.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Wi,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},e.prototype.shouldBeInLimbo=function(e){return!this._syncedDocuments.has(e)&&(!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations)},e.prototype.applyTargetChange=function(e){var t=this;e&&(e.addedDocuments.forEach(function(e){return t._syncedDocuments=t._syncedDocuments.add(e)}),e.modifiedDocuments.forEach(function(e){return w(t._syncedDocuments.has(e),"Modified document "+e+" not found in view.")}),e.removedDocuments.forEach(function(e){return t._syncedDocuments=t._syncedDocuments.delete(e)}),this.current=e.current)},e.prototype.updateLimboDocuments=function(){var e=this;if(!this.current)return[];var t=this.limboDocuments;this.limboDocuments=Ye(),this.documentSet.forEach(function(t){e.shouldBeInLimbo(t.key)&&(e.limboDocuments=e.limboDocuments.add(t.key))});var n=[];return t.forEach(function(t){e.limboDocuments.has(t)||n.push(new Eo(t))}),this.limboDocuments.forEach(function(e){t.has(e)||n.push(new So(e))}),n},e.prototype.synchronizeWithPersistedState=function(e){this._syncedDocuments=e.remoteKeys,this.limboDocuments=Ye();var t=this.computeDocChanges(e.documents);return this.applyChanges(t,!0)},e.prototype.computeInitialSnapshot=function(){return Ki.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Ui.Local)},e}();function Oo(e,t){var n=function(e){switch(e){case qi.Added:return 1;case qi.Modified:return 2;case qi.Metadata:return 2;case qi.Removed:return 0;default:return v("Unknown ChangeType: "+e)}};return n(e)-n(t)}var _o=5,Io=function(){function e(e,t,n,r){this.asyncQueue=e,this.remoteStore=t,this.updateFunction=n,this.deferred=r,this.retries=_o,this.backoff=new vi(this.asyncQueue,ce.RetryTransaction)}return e.prototype.run=function(){this.runWithBackOff()},e.prototype.runWithBackOff=function(){var e=this;this.backoff.backoffAndRun(function(){return a.__awaiter(e,void 0,void 0,function(){var e,t,n=this;return a.__generator(this,function(r){return e=this.remoteStore.createTransaction(),t=this.tryRunUpdateFunction(e),t&&t.then(function(t){n.asyncQueue.enqueueAndForget(function(){return e.commit().then(function(){n.deferred.resolve(t)}).catch(function(e){n.handleTransactionError(e)})})}).catch(function(e){n.handleTransactionError(e)}),[2]})})})},e.prototype.tryRunUpdateFunction=function(e){try{var t=this.updateFunction(e);return!Rr(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}},e.prototype.handleTransactionError=function(e){var t=this;this.retries>0&&this.isRetryableTransactionError(e)?(this.retries-=1,this.asyncQueue.enqueueAndForget(function(){return t.runWithBackOff(),Promise.resolve()})):this.deferred.reject(e)},e.prototype.isRetryableTransactionError=function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Ni(t)}return!1},e}(),ko="SyncEngine",Do=function(){function e(e,t,n){this.query=e,this.targetId=t,this.view=n}return e}(),Ao=function(){function e(e){this.key=e,this.receivedDocument=!1}return e}(),Fo=function(){function e(e,t,n,r){this.localStore=e,this.remoteStore=t,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new un(function(e){return e.canonicalId()}),this.queriesByTarget={},this.limboTargetsByKey=new Le(Te.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new ei,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=Tt.forSyncEngine(),this.isPrimary=void 0,this.onlineState=bi.Unknown}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),e.prototype.subscribe=function(e){w(null!==e,"SyncEngine listener cannot be null"),w(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=e},e.prototype.listen=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,n,r,i,o;return a.__generator(this,function(a){switch(a.label){case 0:return this.assertSubscribed("listen()"),r=this.queryViewsByQuery.get(e),r?(t=r.targetId,this.sharedClientState.addLocalQueryTarget(t),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateTarget(e.toTarget())];case 2:return i=a.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),t=i.targetId,[4,this.initializeViewAndComputeSnapshot(e,t,"current"===o)];case 3:n=a.sent(),this.isPrimary&&this.remoteStore.listen(i),a.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,t]}})})},e.prototype.initializeViewAndComputeSnapshot=function(e,t,n){return a.__awaiter(this,void 0,void 0,function(){var r,i,o,s,u,c;return a.__generator(this,function(a){switch(a.label){case 0:return[4,this.localStore.executeQuery(e,!0)];case 1:return r=a.sent(),i=new Co(e,r.remoteKeys),o=i.computeDocChanges(r.documents),s=zi.createSynthesizedTargetChangeForCurrentChange(t,n&&this.onlineState!==bi.Offline),u=i.applyChanges(o,!0===this.isPrimary,s),w(0===u.limboChanges.length,"View returned limbo docs before target ack from the server."),w(!!u.snapshot,"applyChanges for new view should always return a snapshot"),c=new Do(e,t,i),this.queryViewsByQuery.set(e,c),this.queriesByTarget[t]||(this.queriesByTarget[t]=[]),this.queriesByTarget[t].push(e),[2,u.snapshot]}})})},e.prototype.synchronizeViewAndComputeSnapshot=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,n;return a.__generator(this,function(r){switch(r.label){case 0:return[4,this.localStore.executeQuery(e.query,!0)];case 1:return t=r.sent(),n=e.view.synchronizeWithPersistedState(t),this.isPrimary&&this.updateTrackedLimbos(e.targetId,n.limboChanges),[2,n]}})})},e.prototype.unlisten=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,n,r,i=this;return a.__generator(this,function(o){switch(o.label){case 0:return this.assertSubscribed("unlisten()"),t=this.queryViewsByQuery.get(e),w(!!t,"Trying to unlisten on query not found:"+e),n=this.queriesByTarget[t.targetId],n.length>1?(this.queriesByTarget[t.targetId]=n.filter(function(t){return!t.isEqual(e)}),this.queryViewsByQuery.delete(e),[2]):this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(t.targetId),r=this.sharedClientState.isActiveQueryTarget(t.targetId),r?[3,2]:[4,this.localStore.releaseTarget(t.targetId,!1).then(function(){i.sharedClientState.clearQueryState(t.targetId),i.remoteStore.unlisten(t.targetId),i.removeAndCleanupTarget(t.targetId)}).catch(Er)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupTarget(t.targetId),[4,this.localStore.releaseTarget(t.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})},e.prototype.write=function(e,t){return a.__awaiter(this,void 0,void 0,function(){var n;return a.__generator(this,function(r){switch(r.label){case 0:return this.assertSubscribed("write()"),[4,this.localStore.localWrite(e)];case 1:return n=r.sent(),this.sharedClientState.addPendingMutation(n.batchId),this.addMutationCallback(n.batchId,t),[4,this.emitNewSnapsAndNotifyLocalStore(n.changes)];case 2:return r.sent(),[4,this.remoteStore.fillWritePipeline()];case 3:return r.sent(),[2]}})})},e.prototype.runTransaction=function(e,t,n){new Io(e,this.remoteStore,t,n).run()},e.prototype.applyRemoteEvent=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,n,r=this;return a.__generator(this,function(i){switch(i.label){case 0:this.assertSubscribed("applyRemoteEvent()"),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this.localStore.applyRemoteEvent(e)];case 2:return t=i.sent(),D(e.targetChanges,function(e,t){var n=r.limboResolutionsByTarget[Number(e)];n&&(w(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),t.addedDocuments.size>0?n.receivedDocument=!0:t.modifiedDocuments.size>0?w(n.receivedDocument,"Received change for limbo target document without add."):t.removedDocuments.size>0&&(w(n.receivedDocument,"Received remove for limbo target document without add."),n.receivedDocument=!1))}),[4,this.emitNewSnapsAndNotifyLocalStore(t,e)];case 3:return i.sent(),[3,6];case 4:return n=i.sent(),[4,Er(n)];case 5:return i.sent(),[3,6];case 6:return[2]}})})},e.prototype.applyOnlineStateChange=function(e,t){if(this.isPrimary&&t===Ti.RemoteStore||!this.isPrimary&&t===Ti.SharedClientState){this.assertSubscribed("applyOnlineStateChange()");var n=[];this.queryViewsByQuery.forEach(function(t,r){var i=r.view.applyOnlineStateChange(e);w(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)}),this.syncEngineListener.onOnlineStateChange(e),this.syncEngineListener.onWatchChange(n),this.onlineState=e,this.isPrimary&&this.sharedClientState.setOnlineState(e)}},e.prototype.rejectListen=function(e,t){return a.__awaiter(this,void 0,void 0,function(){var n,r,i,o,s,u=this;return a.__generator(this,function(a){switch(a.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(e,"rejected",t),n=this.limboResolutionsByTarget[e],r=n&&n.key,r?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[e],i=new Le(Te.comparator),i=i.insert(r,new an(r,Re.forDeletedDoc())),o=Ye().add(r),s=new Gi(Re.MIN,{},new qe(re),i,o),[2,this.applyRemoteEvent(s)]):[3,1];case 1:return[4,this.localStore.releaseTarget(e,!1).then(function(){return u.removeAndCleanupTarget(e,t)}).catch(Er)];case 2:a.sent(),a.label=3;case 3:return[2]}})})},e.prototype.applyBatchState=function(e,t,n){return a.__awaiter(this,void 0,void 0,function(){var r;return a.__generator(this,function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(e)];case 1:return r=i.sent(),null===r?(m(ko,"Cannot apply mutation batch with id: "+e),[2]):"pending"!==t?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===t||"rejected"===t?(this.processUserCallback(e,n||null),this.localStore.removeCachedMutationBatchMetadata(e)):v("Unknown batchState: "+t),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}})})},e.prototype.applySuccessfulWrite=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,n,r;return a.__generator(this,function(i){switch(i.label){case 0:this.assertSubscribed("applySuccessfulWrite()"),t=e.batch.batchId,this.processUserCallback(t,null),this.triggerPendingWritesCallbacks(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this.localStore.acknowledgeBatch(e)];case 2:return n=i.sent(),this.sharedClientState.updateMutationState(t,"acknowledged"),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return i.sent(),[3,6];case 4:return r=i.sent(),[4,Er(r)];case 5:return i.sent(),[3,6];case 6:return[2]}})})},e.prototype.rejectFailedWrite=function(e,t){return a.__awaiter(this,void 0,void 0,function(){var n,r;return a.__generator(this,function(i){switch(i.label){case 0:this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(e,t),this.triggerPendingWritesCallbacks(e),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this.localStore.rejectBatch(e)];case 2:return n=i.sent(),this.sharedClientState.updateMutationState(e,"rejected",t),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return i.sent(),[3,6];case 4:return r=i.sent(),[4,Er(r)];case 5:return i.sent(),[3,6];case 6:return[2]}})})},e.prototype.registerPendingWritesCallback=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,n;return a.__generator(this,function(r){switch(r.label){case 0:return this.remoteStore.canUseNetwork()||m(ko,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.localStore.getHighestUnacknowledgedBatchId()];case 1:return t=r.sent(),t===$e?(e.resolve(),[2]):(n=this.pendingWritesCallbacks.get(t)||[],n.push(e),this.pendingWritesCallbacks.set(t,n),[2])}})})},e.prototype.triggerPendingWritesCallbacks=function(e){(this.pendingWritesCallbacks.get(e)||[]).forEach(function(e){e.resolve()}),this.pendingWritesCallbacks.delete(e)},e.prototype.rejectOutstandingPendingWritesCallbacks=function(e){this.pendingWritesCallbacks.forEach(function(t){t.forEach(function(t){t.reject(new E(S.CANCELLED,e))})}),this.pendingWritesCallbacks.clear()},e.prototype.addMutationCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new Le(re)),n=n.insert(e,t),this.mutationUserCallbacks[this.currentUser.toKey()]=n},e.prototype.processUserCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(e);r&&(w(e===n.minKey(),"Mutation callbacks processed out-of-order?"),t?r.reject(t):r.resolve(),n=n.remove(e)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},e.prototype.removeAndCleanupTarget=function(e,t){var n=this;void 0===t&&(t=null),this.sharedClientState.removeLocalQueryTarget(e),w(this.queriesByTarget[e]&&0!==this.queriesByTarget[e].length,"There are no queries mapped to target id "+e);for(var r=0,i=this.queriesByTarget[e];r<i.length;r++){var o=i[r];this.queryViewsByQuery.delete(o),t&&this.syncEngineListener.onWatchError(o,t)}if(delete this.queriesByTarget[e],this.isPrimary){var a=this.limboDocumentRefs.referencesForId(e);this.limboDocumentRefs.removeReferencesForId(e),a.forEach(function(e){var t=n.limboDocumentRefs.containsKey(e);t||n.removeLimboTarget(e)})}},e.prototype.removeLimboTarget=function(e){var t=this.limboTargetsByKey.get(e);null!==t&&(this.remoteStore.unlisten(t),this.limboTargetsByKey=this.limboTargetsByKey.remove(e),delete this.limboResolutionsByTarget[t])},e.prototype.updateTrackedLimbos=function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i instanceof So)this.limboDocumentRefs.addReference(i.key,e),this.trackLimboChange(i);else if(i instanceof Eo){m(ko,"Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,e);var o=this.limboDocumentRefs.containsKey(i.key);o||this.removeLimboTarget(i.key)}else v("Unknown limbo change: "+JSON.stringify(i))}},e.prototype.trackLimboChange=function(e){var t=e.key;if(!this.limboTargetsByKey.get(t)){m(ko,"New document in limbo: "+t);var n=this.limboTargetIdGenerator.next(),r=Br.atPath(t.path);this.limboResolutionsByTarget[n]=new Ao(t),this.remoteStore.listen(new er(r.toTarget(),n,Gn.LimboResolution,me.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(t,n)}},e.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},e.prototype.emitNewSnapsAndNotifyLocalStore=function(e,t){return a.__awaiter(this,void 0,void 0,function(){var n,r,i,o=this;return a.__generator(this,function(a){switch(a.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach(function(a,s){i.push(Promise.resolve().then(function(){var t=s.view.computeDocChanges(e);return t.needsRefill?o.localStore.executeQuery(s.query,!1).then(function(e){var n=e.documents;return s.view.computeDocChanges(n,t)}):t}).then(function(e){var i=t&&t.targetChanges[s.targetId],a=s.view.applyChanges(e,!0===o.isPrimary,i);if(o.updateTrackedLimbos(s.targetId,a.limboChanges),a.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(s.targetId,a.snapshot.fromCache?"not-current":"current"),n.push(a.snapshot);var u=To.fromSnapshot(s.targetId,a.snapshot);r.push(u)}}))}),[4,Promise.all(i)];case 1:return a.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return a.sent(),[2]}})})},e.prototype.assertSubscribed=function(e){w(null!==this.syncEngineListener,"Trying to call "+e+" before calling subscribe().")},e.prototype.handleCredentialChange=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,n;return a.__generator(this,function(r){switch(r.label){case 0:return t=!this.currentUser.isEqual(e),this.currentUser=e,t?(this.rejectOutstandingPendingWritesCallbacks("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.localStore.handleUserChange(e)]):[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}})})},e.prototype.applyPrimaryState=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,n,r,i,o,s,u,c=this;return a.__generator(this,function(a){switch(a.label){case 0:return!0!==e||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return a.sent(),t=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(t.toArray())];case 2:for(n=a.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.remoteStore.listen(o);return[3,7];case 3:return!1!==e||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,s=[],u=Promise.resolve(),I(this.queriesByTarget,function(e,t){c.sharedClientState.isLocalQueryTarget(e)?s.push(e):u=u.then(function(){return c.removeAndCleanupTarget(e),c.localStore.releaseTarget(e,!0)}),c.remoteStore.unlisten(e)}),[4,u]);case 4:return a.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(s)];case 5:return a.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:a.sent(),a.label=7;case 7:return[2]}})})},e.prototype.resetLimboDocuments=function(){var e=this;I(this.limboResolutionsByTarget,function(t){e.remoteStore.unlisten(t)}),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new Le(Te.comparator)},e.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,n,r,i,o,s,u,c,l,d,h,f,p;return a.__generator(this,function(a){switch(a.label){case 0:t=[],n=[],r=0,i=e,a.label=1;case 1:return r<i.length?(o=i[r],s=void 0,u=this.queriesByTarget[o],u&&0!==u.length?[4,this.localStore.releaseTarget(o,!0)]:[3,8]):[3,14];case 2:return a.sent(),[4,this.localStore.allocateTarget(u[0].toTarget())];case 3:s=a.sent(),c=0,l=u,a.label=4;case 4:return c<l.length?(d=l[c],h=this.queryViewsByQuery.get(d),w(!!h,"No query view found for "+d),[4,this.synchronizeViewAndComputeSnapshot(h)]):[3,7];case 5:f=a.sent(),f.snapshot&&n.push(f.snapshot),a.label=6;case 6:return c++,[3,4];case 7:return[3,12];case 8:return w(!0===this.isPrimary,"A secondary tab should never have an active target without an active query."),[4,this.localStore.getTarget(o)];case 9:return p=a.sent(),w(!!p,"Target for id "+o+" not found"),[4,this.localStore.allocateTarget(p)];case 10:return s=a.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(p),o,!1)];case 11:a.sent(),a.label=12;case 12:t.push(s),a.label=13;case 13:return r++,[3,1];case 14:return this.syncEngineListener.onWatchChange(n),[2,t]}})})},e.prototype.synthesizeTargetToQuery=function(e){return new Br(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,Pr.First,e.startAt,e.endAt)},e.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},e.prototype.applyTargetState=function(e,t,n){return a.__awaiter(this,void 0,void 0,function(){var r,i,o;return a.__generator(this,function(a){switch(a.label){case 0:if(this.isPrimary)return m(ko,"Ignoring unexpected query state notification."),[2];if(!this.queriesByTarget[e])return[3,7];switch(r=t,r){case"current":return[3,1];case"not-current":return[3,1];case"rejected":return[3,4]}return[3,6];case 1:return[4,this.localStore.getNewDocumentChanges()];case 2:return i=a.sent(),o=Gi.createSynthesizedRemoteEventForCurrentChange(e,"current"===t),[4,this.emitNewSnapsAndNotifyLocalStore(i,o)];case 3:return a.sent(),[3,7];case 4:return[4,this.localStore.releaseTarget(e,!0)];case 5:return a.sent(),this.removeAndCleanupTarget(e,n),[3,7];case 6:v("Unexpected target state: "+t),a.label=7;case 7:return[2]}})})},e.prototype.applyActiveTargetsChange=function(e,t){return a.__awaiter(this,void 0,void 0,function(){var n,r,i,o,s,u,c,l,d,h=this;return a.__generator(this,function(f){switch(f.label){case 0:if(!this.isPrimary)return[2];n=0,r=e,f.label=1;case 1:return n<r.length?(d=r[n],w(!this.queriesByTarget[d],"Trying to add an already active target"),[4,this.localStore.getTarget(d)]):[3,6];case 2:return i=f.sent(),w(!!i,"Query data for active target "+d+" not found"),[4,this.localStore.allocateTarget(i)];case 3:return o=f.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(i),o.targetId,!1)];case 4:f.sent(),this.remoteStore.listen(o),f.label=5;case 5:return n++,[3,1];case 6:s=function(e){return a.__generator(this,function(t){switch(t.label){case 0:return u.queriesByTarget[e]?[4,u.localStore.releaseTarget(e,!1).then(function(){h.remoteStore.unlisten(e),h.removeAndCleanupTarget(e)}).catch(Er)]:[2,"continue"];case 1:return t.sent(),[2]}})},u=this,c=0,l=t,f.label=7;case 7:return c<l.length?(d=l[c],[5,s(d)]):[3,10];case 8:f.sent(),f.label=9;case 9:return c++,[3,7];case 10:return[2]}})})},e.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},e.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},e.prototype.getRemoteKeysForTarget=function(e){var t=this.limboResolutionsByTarget[e];if(t&&t.receivedDocument)return Ye().add(t.key);var n=Ye(),r=this.queriesByTarget[e];if(!r)return n;for(var i=0,o=r;i<o.length;i++){var a=o[i],s=this.queryViewsByQuery.get(a);w(!!s,"No query view found for "+a),n=n.unionWith(s.view.syncedDocuments)}return n},e}(),Mo=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e.UNAUTHENTICATED=new e(null),e.GOOGLE_CREDENTIALS=new e("google-credentials-uid"),e.FIRST_PARTY=new e("first-party-uid"),e}(),No="SharedClientState",Ro="firestore_clients",Lo="firestore_mutations",Po="firestore_targets",xo="firestore_online_state",Bo="firestore_sequence_number",qo=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r,w(void 0!==r===("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n,r){var i=JSON.parse(r),o="object"===typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"===typeof i.error),a=void 0;return o&&i.error&&(o="string"===typeof i.error.message&&"string"===typeof i.error.code,o&&(a=new E(i.error.code,i.error.message))),o?new e(t,n,i.state,a):(g(No,"Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Uo=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n,w(void 0!==n===("rejected"===t),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n){var r=JSON.parse(n),i="object"===typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"===typeof r.error),o=void 0;return i&&r.error&&(i="string"===typeof r.error.message&&"string"===typeof r.error.code,i&&(o=new E(r.error.code,r.error.message))),i?new e(t,r.state,o):(g(No,"Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Vo=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.fromWebStorageEntry=function(t,n){for(var r=JSON.parse(n),i="object"===typeof r&&r.activeTargetIds instanceof Array,o=Xe(),a=0;i&&a<r.activeTargetIds.length;++a)i=Lr(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new e(t,o):(g(No,"Failed to parse client data for instance '"+t+"': "+n),null)},e}(),jo=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.fromWebStorageEntry=function(t){var n=JSON.parse(t),r="object"===typeof n&&n.onlineState in bi&&"string"===typeof n.clientId;return r?new e(n.clientId,bi[n.onlineState]):(g(No,"Failed to parse online state: "+t),null)},e}(),Wo=function(){function e(){this.activeTargetIds=Xe()}return e.prototype.addQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.removeQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.toWebStorageJSON=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},e}(),Ko=function(){function e(t,n,r,i,o){if(this.queue=t,this.platform=n,this.persistenceKey=r,this.localClientId=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!e.isAvailable(this.platform))throw new E(S.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.localClientStorageKey=this.toWebStorageClientStateKey(this.localClientId),this.sequenceNumberKey=Bo+"_"+r,this.activeClients[this.localClientId]=new Wo,this.clientStateKeyRe=new RegExp("^"+Ro+"_"+a+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+Lo+"_"+a+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+Po+"_"+a+"_(\\d+)$"),this.onlineStateKey=xo+"_"+r,this.platform.window.addEventListener("storage",this.storageListener)}return e.isAvailable=function(e){return!(!e.window||null==e.window.localStorage)},e.prototype.start=function(){return a.__awaiter(this,void 0,void 0,function(){var e,t,n,r,i,o,s,u,c,l,d,h=this;return a.__generator(this,function(a){switch(a.label){case 0:return w(!this.started,"WebStorageSharedClientState already started"),w(null!==this.syncEngine,"syncEngine property must be set before calling start()"),w(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(e=a.sent(),t=0,n=e;t<n.length;t++)r=n[t],r!==this.localClientId&&(i=this.getItem(this.toWebStorageClientStateKey(r)),i&&(o=Vo.fromWebStorageEntry(r,i),o&&(this.activeClients[o.clientId]=o)));for(this.persistClientState(),s=this.storage.getItem(this.onlineStateKey),s&&(u=this.fromWebStorageOnlineState(s),u&&this.handleOnlineStateEvent(u)),c=0,l=this.earlyEvents;c<l.length;c++)d=l[c],this.handleWebStorageEvent(d);return this.earlyEvents=[],this.platform.window.addEventListener("unload",function(){return h.shutdown()}),this.started=!0,[2]}})})},e.prototype.writeSequenceNumber=function(e){this.setItem(this.sequenceNumberKey,JSON.stringify(e))},e.prototype.getAllActiveQueryTargets=function(){var e=Xe();return D(this.activeClients,function(t,n){e=e.unionWith(n.activeTargetIds)}),e},e.prototype.isActiveQueryTarget=function(e){for(var t in this.activeClients)if(this.activeClients.hasOwnProperty(t)&&this.activeClients[t].activeTargetIds.has(e))return!0;return!1},e.prototype.addPendingMutation=function(e){this.persistMutationState(e,"pending")},e.prototype.updateMutationState=function(e,t,n){this.persistMutationState(e,t,n),this.removeMutationState(e)},e.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(e));if(n){var r=Uo.fromWebStorageEntry(e,n);r&&(t=r.state)}}return this.localClientState.addQueryTarget(e),this.persistClientState(),t},e.prototype.removeLocalQueryTarget=function(e){this.localClientState.removeQueryTarget(e),this.persistClientState()},e.prototype.isLocalQueryTarget=function(e){return this.localClientState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){this.removeItem(this.toWebStorageQueryTargetMetadataKey(e))},e.prototype.updateQueryState=function(e,t,n){this.persistQueryTargetState(e,t,n)},e.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach(function(e){r.removeMutationState(e)}),this.currentUser=e,n.forEach(function(e){r.addPendingMutation(e)})},e.prototype.setOnlineState=function(e){this.persistOnlineState(e)},e.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return m(No,"READ",e,t),t},e.prototype.setItem=function(e,t){m(No,"SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){m(No,"REMOVE",e),this.storage.removeItem(e)},e.prototype.handleWebStorageEvent=function(e){var t=this;if(e.storageArea===this.storage){if(m(No,"EVENT",e.key,e.newValue),e.key===this.localClientStorageKey)return void g("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget(function(){return a.__awaiter(t,void 0,void 0,function(){var t,n,r,i,o,s;return a.__generator(this,function(a){if(!this.started)return this.earlyEvents.push(e),[2];if(null===e.key)return[2];if(this.clientStateKeyRe.test(e.key)){if(null==e.newValue)return n=this.fromWebStorageClientStateKey(e.key),[2,this.handleClientStateEvent(n,null)];if(t=this.fromWebStorageClientState(e.key,e.newValue),t)return[2,this.handleClientStateEvent(t.clientId,t)]}else if(this.mutationBatchKeyRe.test(e.key)){if(null!==e.newValue&&(r=this.fromWebStorageMutationMetadata(e.key,e.newValue),r))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(e.key)){if(null!==e.newValue&&(i=this.fromWebStorageQueryTargetMetadata(e.key,e.newValue),i))return[2,this.handleQueryTargetEvent(i)]}else if(e.key===this.onlineStateKey){if(null!==e.newValue&&(o=this.fromWebStorageOnlineState(e.newValue),o))return[2,this.handleOnlineStateEvent(o)]}else e.key===this.sequenceNumberKey&&(w(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),s=Go(e.newValue),s!==me.INVALID&&this.sequenceNumberHandler(s));return[2]})})})}},Object.defineProperty(e.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),e.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},e.prototype.persistMutationState=function(e,t,n){var r=new qo(this.currentUser,e,t,n),i=this.toWebStorageMutationBatchKey(e);this.setItem(i,r.toWebStorageJSON())},e.prototype.removeMutationState=function(e){var t=this.toWebStorageMutationBatchKey(e);this.removeItem(t)},e.prototype.persistOnlineState=function(e){var t={clientId:this.localClientId,onlineState:bi[e]};this.storage.setItem(this.onlineStateKey,JSON.stringify(t))},e.prototype.persistQueryTargetState=function(e,t,n){var r=this.toWebStorageQueryTargetMetadataKey(e),i=new Uo(e,t,n);this.setItem(r,i.toWebStorageJSON())},e.prototype.toWebStorageClientStateKey=function(e){return w(-1===e.indexOf("_"),"Client key cannot contain '_', but was '"+e+"'"),Ro+"_"+this.persistenceKey+"_"+e},e.prototype.toWebStorageQueryTargetMetadataKey=function(e){return Po+"_"+this.persistenceKey+"_"+e},e.prototype.toWebStorageMutationBatchKey=function(e){var t=Lo+"_"+this.persistenceKey+"_"+e;return this.currentUser.isAuthenticated()&&(t+="_"+this.currentUser.uid),t},e.prototype.fromWebStorageClientStateKey=function(e){var t=this.clientStateKeyRe.exec(e);return t?t[1]:null},e.prototype.fromWebStorageClientState=function(e,t){var n=this.fromWebStorageClientStateKey(e);return w(null!==n,"Cannot parse client state key '"+e+"'"),Vo.fromWebStorageEntry(n,t)},e.prototype.fromWebStorageMutationMetadata=function(e,t){var n=this.mutationBatchKeyRe.exec(e);w(null!==n,"Cannot parse mutation batch key '"+e+"'");var r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return qo.fromWebStorageEntry(new Mo(i),r,t)},e.prototype.fromWebStorageQueryTargetMetadata=function(e,t){var n=this.queryTargetKeyRe.exec(e);w(null!==n,"Cannot parse query target key '"+e+"'");var r=Number(n[1]);return Uo.fromWebStorageEntry(r,t)},e.prototype.fromWebStorageOnlineState=function(e){return jo.fromWebStorageEntry(e)},e.prototype.handleMutationBatchEvent=function(e){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){return e.user.uid!==this.currentUser.uid?(m(No,"Ignoring mutation for non-active user "+e.user.uid),[2]):[2,this.syncEngine.applyBatchState(e.batchId,e.state,e.error)]})})},e.prototype.handleQueryTargetEvent=function(e){return this.syncEngine.applyTargetState(e.targetId,e.state,e.error)},e.prototype.handleClientStateEvent=function(e,t){var n=this,r=this.getAllActiveQueryTargets();t?this.activeClients[e]=t:delete this.activeClients[e];var i=this.getAllActiveQueryTargets(),o=[],s=[];return i.forEach(function(e){return a.__awaiter(n,void 0,void 0,function(){return a.__generator(this,function(t){return r.has(e)||o.push(e),[2]})})}),r.forEach(function(e){return a.__awaiter(n,void 0,void 0,function(){return a.__generator(this,function(t){return i.has(e)||s.push(e),[2]})})}),this.syncEngine.applyActiveTargetsChange(o,s)},e.prototype.handleOnlineStateEvent=function(e){this.activeClients[e.clientId]&&this.onlineStateHandler(e.onlineState)},e}();function Go(e){var t=me.INVALID;if(null!=e)try{var n=JSON.parse(e);w("number"===typeof n,"Found non-numeric sequence number"),t=n}catch(e){g(No,"Failed to read sequence number from WebStorage",e)}return t}var zo=function(){function e(){this.localState=new Wo,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(e){},e.prototype.updateMutationState=function(e,t,n){},e.prototype.addLocalQueryTarget=function(e){return this.localState.addQueryTarget(e),this.queryState[e]||"not-current"},e.prototype.updateQueryState=function(e,t,n){this.queryState[e]=t},e.prototype.removeLocalQueryTarget=function(e){this.localState.removeQueryTarget(e)},e.prototype.isLocalQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.queryState[e]},e.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.start=function(){return this.localState=new Wo,Promise.resolve()},e.prototype.handleUserChange=function(e,t,n){},e.prototype.setOnlineState=function(e){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(e){},e}(),Qo="FirestoreClient",Ho=11,Yo=20,Jo=22,Xo=function(){function e(e,t){this.cacheSizeBytes=e,this.synchronizeTabs=t}return e.prototype.lruParams=function(){return ar.withCacheSize(this.cacheSizeBytes)},e}(),$o=function(){function e(){}return e}(),Zo=function(){function e(e,t,n,r){this.platform=e,this.databaseInfo=t,this.credentials=n,this.asyncQueue=r,this.clientId=ne.newId()}return e.prototype.start=function(e){var t=this;this.verifyNotTerminated();var n=new Se,r=new Se,i=!1;return this.credentials.setChangeListener(function(o){i?t.asyncQueue.enqueueAndForget(function(){return t.handleCredentialChange(o)}):(i=!0,t.initializePersistence(e,r,o).then(function(e){return t.initializeRest(o,e)}).then(n.resolve,n.reject))}),this.asyncQueue.enqueueAndForget(function(){return n.promise}),r.promise},e.prototype.enableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return e.syncEngine.enableNetwork()})},e.prototype.initializePersistence=function(e,t,n){var r=this;return e instanceof Xo?this.startIndexedDbPersistence(n,e).then(function(e){return t.resolve(),e}).catch(function(e){if(t.reject(e),!r.canFallback(e))throw e;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.startMemoryPersistence()}):(t.resolve(),this.startMemoryPersistence())},e.prototype.canFallback=function(e){return e instanceof E?e.code===S.FAILED_PRECONDITION||e.code===S.UNIMPLEMENTED:!("undefined"!==typeof DOMException&&e instanceof DOMException)||(e.code===Jo||e.code===Yo||e.code===Ho)},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new E(S.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.startIndexedDbPersistence=function(e,t){var n=this,r=Tr.buildStoragePrefix(this.databaseInfo),i=new yo(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then(function(){return a.__awaiter(n,void 0,void 0,function(){var n,o;return a.__generator(this,function(a){switch(a.label){case 0:if(t.synchronizeTabs&&!Ko.isAvailable(this.platform))throw new E(S.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return n=t.lruParams(),this.sharedClientState=t.synchronizeTabs?new Ko(this.asyncQueue,this.platform,r,this.clientId,e):new zo,[4,Tr.createIndexedDbPersistence({allowTabSynchronization:t.synchronizeTabs,persistenceKey:r,clientId:this.clientId,platform:this.platform,queue:this.asyncQueue,serializer:i,lruParams:n,sequenceNumberSyncer:this.sharedClientState})];case 1:return o=a.sent(),this.persistence=o,[2,o.referenceDelegate.garbageCollector]}})})})},e.prototype.startMemoryPersistence=function(){return this.persistence=li.createEagerPersistence(this.clientId),this.sharedClientState=new zo,Promise.resolve(null)},e.prototype.initializeRest=function(e,t){var n=this;return m(Qo,"Initializing. user=",e.uid),this.platform.loadConnection(this.databaseInfo).then(function(r){return a.__awaiter(n,void 0,void 0,function(){var n,i,o,s,u,c,l=this;return a.__generator(this,function(d){switch(d.label){case 0:return n=new $r,this.localStore=new ri(this.persistence,n,e),[4,this.localStore.start()];case 1:return d.sent(),t&&(this.lruScheduler=new cr(t,this.asyncQueue,this.localStore)),i=this.platform.newConnectivityMonitor(),o=this.platform.newSerializer(this.databaseInfo.databaseId),s=new _i(this.asyncQueue,r,this.credentials,o),u=function(e){return l.syncEngine.applyOnlineStateChange(e,Ti.RemoteStore)},c=function(e){return l.syncEngine.applyOnlineStateChange(e,Ti.SharedClientState)},this.remoteStore=new ro(this.localStore,s,this.asyncQueue,u,i),this.syncEngine=new Fo(this.localStore,this.remoteStore,this.sharedClientState,e),this.sharedClientState.onlineStateHandler=c,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new wo(this.syncEngine),[4,this.sharedClientState.start()];case 2:return d.sent(),[4,this.remoteStore.start()];case 3:return d.sent(),[4,this.persistence.setPrimaryStateListener(function(e){return a.__awaiter(l,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return[4,this.syncEngine.applyPrimaryState(e)];case 1:return t.sent(),this.lruScheduler&&(e&&!this.lruScheduler.started?this.lruScheduler.start():e||this.lruScheduler.stop()),[2]}})})})];case 4:return d.sent(),[4,this.persistence.setDatabaseDeletedListener(function(){return a.__awaiter(l,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return[4,this.terminate()];case 1:return e.sent(),[2]}})})})];case 5:return d.sent(),[2]}})})})},e.prototype.handleCredentialChange=function(e){return this.asyncQueue.verifyOperationInProgress(),m(Qo,"Credential Changed. Current user: "+e.uid),this.syncEngine.handleCredentialChange(e)},e.prototype.disableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return e.syncEngine.disableNetwork()})},e.prototype.terminate=function(){var e=this;return this.asyncQueue.enqueueAndInitiateShutdown(function(){return a.__awaiter(e,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return e.sent(),[4,this.sharedClientState.shutdown()];case 2:return e.sent(),[4,this.persistence.shutdown()];case 3:return e.sent(),this.credentials.removeChangeListener(),[2]}})})})},e.prototype.waitForPendingWrites=function(){var e=this;this.verifyNotTerminated();var t=new Se;return this.asyncQueue.enqueueAndForget(function(){return e.syncEngine.registerPendingWritesCallback(t)}),t.promise},e.prototype.listen=function(e,t,n){var r=this;this.verifyNotTerminated();var i=new bo(e,t,n);return this.asyncQueue.enqueueAndForget(function(){return r.eventMgr.listen(i)}),i},e.prototype.unlisten=function(e){var t=this;this.clientTerminated||this.asyncQueue.enqueueAndForget(function(){return t.eventMgr.unlisten(e)})},e.prototype.getDocumentFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return t.localStore.readDocument(e)}).then(function(e){if(e instanceof on)return e;if(e instanceof an)return null;throw new E(S.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},e.prototype.getDocumentsFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return a.__awaiter(t,void 0,void 0,function(){var t,n,r;return a.__generator(this,function(i){switch(i.label){case 0:return[4,this.localStore.executeQuery(e,!0)];case 1:return t=i.sent(),n=new Co(e,t.remoteKeys),r=n.computeDocChanges(t.documents),[2,n.applyChanges(r,!1).snapshot]}})})})},e.prototype.write=function(e){var t=this;this.verifyNotTerminated();var n=new Se;return this.asyncQueue.enqueueAndForget(function(){return t.syncEngine.write(e,n)}),n.promise},e.prototype.databaseId=function(){return this.databaseInfo.databaseId},e.prototype.addSnapshotsInSyncListener=function(e){var t=this;this.verifyNotTerminated(),this.asyncQueue.enqueueAndForget(function(){return t.eventMgr.addSnapshotsInSyncListener(e),Promise.resolve()})},e.prototype.removeSnapshotsInSyncListener=function(e){this.clientTerminated||this.eventMgr.removeSnapshotsInSyncListener(e)},Object.defineProperty(e.prototype,"clientTerminated",{get:function(){return this.asyncQueue.isShuttingDown},enumerable:!0,configurable:!0}),e.prototype.transaction=function(e){var t=this;this.verifyNotTerminated();var n=new Se;return this.asyncQueue.enqueueAndForget(function(){return t.syncEngine.runTransaction(t.asyncQueue,e,n),Promise.resolve()}),n.promise},e}(),ea=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.scheduleEvent(this.observer.next,e)},e.prototype.error=function(e){this.scheduleEvent(this.observer.error,e)},e.prototype.mute=function(){this.muted=!0},e.prototype.scheduleEvent=function(e,t){var n=this;this.muted||setTimeout(function(){n.muted||e(t)},0)},e}(),ta=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];P("FieldPath",e,"fieldNames",1);for(var n=0;n<e.length;++n)if(x("FieldPath","string",n,e[n]),0===e[n].length)throw new E(S.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new be(e)}return e.documentId=function(){return e._DOCUMENT_ID},e.prototype.isEqual=function(t){if(!(t instanceof e))throw $("isEqual","FieldPath",1,t);return this._internalPath.isEqual(t._internalPath)},e._DOCUMENT_ID=new e(be.keyField().canonicalString()),e}(),na=new RegExp("[~\\*/\\[\\]]");function ra(e){var t=e.search(na);if(t>=0)throw new E(S.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(ta.bind.apply(ta,a.__spreadArrays([void 0],e.split("."))))}catch(t){throw new E(S.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}var ia=function(){function e(e,t){this.user=t,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+e}}return e}(),oa=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e){w(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,e(Mo.UNAUTHENTICATED)},e.prototype.removeChangeListener=function(){w(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},e}(),aa=function(){function e(e){var t=this;this.tokenListener=null,this.currentUser=Mo.UNAUTHENTICATED,this.receivedInitialUser=!1,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){t.tokenCounter++,t.currentUser=t.getUser(),t.receivedInitialUser=!0,t.changeListener&&t.changeListener(t.currentUser)},this.tokenCounter=0,this.auth=e.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.tokenListener):(this.tokenListener(null),e.get().then(function(e){t.auth=e,t.tokenListener&&t.auth.addAuthTokenListener(t.tokenListener)},function(){}))}return e.prototype.getToken=function(){var e=this;w(null!=this.tokenListener,"getToken cannot be called after listener removed.");var t=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){if(e.tokenCounter!==t)throw new E(S.ABORTED,"getToken aborted due to token change.");return n?(w("string"===typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new ia(n.accessToken,e.currentUser)):null}):Promise.resolve(null)},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e){w(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,this.receivedInitialUser&&e(this.currentUser)},e.prototype.removeChangeListener=function(){w(null!=this.tokenListener,"removeChangeListener() called twice"),w(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.auth&&this.auth.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},e.prototype.getUser=function(){var e=this.auth&&this.auth.getUid();return w(null===e||"string"===typeof e,"Received invalid UID: "+e),new Mo(e)},e}(),sa=function(){function e(e,t){this.gapi=e,this.sessionIndex=t,this.type="FirstParty",this.user=Mo.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.sessionIndex},t=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return t&&(e["Authorization"]=t),e},enumerable:!0,configurable:!0}),e}(),ua=function(){function e(e,t){this.gapi=e,this.sessionIndex=t}return e.prototype.getToken=function(){return Promise.resolve(new sa(this.gapi,this.sessionIndex))},e.prototype.setChangeListener=function(e){e(Mo.FIRST_PARTY)},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();function ca(e){if(!e)return new oa;switch(e.type){case"gapi":var t=e.client;return w(!("object"!==typeof t||null===t||!t["auth"]||!t["auth"]["getAuthHeaderValueForFirstParty"]),"unexpected gapi interface"),new ua(t,e.sessionIndex||"0");case"provider":return e.client;default:throw new E(S.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}function la(e){return da(e,["next","error","complete"])}function da(e,t){if("object"!==typeof e||null===e)return!1;for(var n=e,r=0,i=t;r<i.length;r++){var o=i[r];if(o in n&&"function"===typeof n[o])return!0}return!1}var ha,fa=function(){function e(e){this._methodName=e}return e.delete=function(){return M("FieldValue.delete",arguments),pa.instance},e.serverTimestamp=function(){return M("FieldValue.serverTimestamp",arguments),ma.instance},e.arrayUnion=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return R("FieldValue.arrayUnion",arguments,1),new ga(e)},e.arrayRemove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return R("FieldValue.arrayRemove",arguments,1),new ya(e)},e.increment=function(e){return x("FieldValue.increment","number",1,e),N("FieldValue.increment",arguments,1),new va(e)},e.prototype.isEqual=function(e){return this===e},e}(),pa=function(e){function t(){return e.call(this,"FieldValue.delete")||this}return a.__extends(t,e),t.instance=new t,t}(fa),ma=function(e){function t(){return e.call(this,"FieldValue.serverTimestamp")||this}return a.__extends(t,e),t.instance=new t,t}(fa),ga=function(e){function t(t){var n=e.call(this,"FieldValue.arrayUnion")||this;return n._elements=t,n}return a.__extends(t,e),t}(fa),ya=function(e){function t(t){var n=e.call(this,"FieldValue.arrayRemove")||this;return n._elements=t,n}return a.__extends(t,e),t}(fa),va=function(e){function t(t){var n=e.call(this,"FieldValue.increment")||this;return n._operand=t,n}return a.__extends(t,e),t}(fa),wa=C(fa,"Use FieldValue.<field>() instead."),ba=/^__.*__$/,Ta=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[];return null!==this.fieldMask?n.push(new xt(e,this.data,this.fieldMask,t)):n.push(new Pt(e,this.data,t)),this.fieldTransforms.length>0&&n.push(new Bt(e,this.fieldTransforms)),n},e}(),Sa=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[new xt(e,this.data,this.fieldMask,t)];return this.fieldTransforms.length>0&&n.push(new Bt(e,this.fieldTransforms)),n},e}();function Ea(e){switch(e){case ha.Set:case ha.MergeSet:case ha.Update:return!0;case ha.Argument:case ha.ArrayArgument:return!1;default:throw v("Unexpected case for UserDataSource: "+e)}}(function(e){e[e["Set"]=0]="Set",e[e["Update"]=1]="Update",e[e["MergeSet"]=2]="MergeSet",e[e["Argument"]=3]="Argument",e[e["ArrayArgument"]=4]="ArrayArgument"})(ha||(ha={}));var Ca=function(){function e(e,t,n,r,i,o){this.dataSource=e,this.methodName=t,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}return e.prototype.childContextForField=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(t),r},e.prototype.childContextForFieldPath=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},e.prototype.childContextForArray=function(t){return new e(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},e.prototype.createError=function(e){var t=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new E(S.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+e+t)},e.prototype.contains=function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})},e.prototype.validatePath=function(){if(null!==this.path)for(var e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))},e.prototype.validatePathSegment=function(e){if(0===e.length)throw this.createError("Document fields must not be empty");if(Ea(this.dataSource)&&ba.test(e))throw this.createError('Document fields cannot begin and end with "__"')},e}(),Oa=function(){function e(e,t){this.databaseId=e,this.key=t}return e}(),_a=function(){function e(e){this.preConverter=e}return e.prototype.parseSetData=function(e,t){var n=new Ca(ha.Set,e,be.EMPTY_PATH);ka("Data must be an object, but it was:",n,t);var r=this.parseData(t,n);return new Ta(r,null,n.fieldTransforms)},e.prototype.parseMergeData=function(e,t,n){var r=new Ca(ha.MergeSet,e,be.EMPTY_PATH);ka("Data must be an object, but it was:",r,t);var i,o,a=this.parseData(t,r);if(n){for(var s=new qe(be.comparator),u=0,c=n;u<c.length;u++){var l=c[u],d=void 0;if(l instanceof ta)d=l._internalPath;else{if("string"!==typeof l)throw v("Expected stringOrFieldPath to be a string or a FieldPath");d=Aa(e,l)}if(!r.contains(d))throw new E(S.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");s=s.add(d)}i=Dt.fromSet(s),o=r.fieldTransforms.filter(function(e){return i.covers(e.field)})}else i=Dt.fromArray(r.fieldMask),o=r.fieldTransforms;return new Ta(a,i,o)},e.prototype.parseUpdateData=function(e,t){var n=this,r=new Ca(ha.Update,e,be.EMPTY_PATH);ka("Data must be an object, but it was:",r,t);var i=new qe(be.comparator),o=tn.EMPTY;D(t,function(t,a){var s=Aa(e,t),u=r.childContextForFieldPath(s);if(a=n.runPreConverter(a,u),a instanceof pa)i=i.add(s);else{var c=n.parseData(a,u);null!=c&&(i=i.add(s),o=o.set(s,c))}});var a=Dt.fromSet(i);return new Sa(o,a,r.fieldTransforms)},e.prototype.parseUpdateVarargs=function(e,t,n,r){var i=new Ca(ha.Update,e,be.EMPTY_PATH),o=[Da(e,t)],a=[n];if(r.length%2!==0)throw new E(S.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(Da(e,r[s])),a.push(r[s+1]);var u=new qe(be.comparator),c=tn.EMPTY;for(s=0;s<o.length;++s){var l=o[s],d=i.childContextForFieldPath(l),h=this.runPreConverter(a[s],d);if(h instanceof pa)u=u.add(l);else{var f=this.parseData(h,d);null!=f&&(u=u.add(l),c=c.set(l,f))}}var p=Dt.fromSet(u);return new Sa(c,p,i.fieldTransforms)},e.prototype.parseQueryValue=function(e,t,n){void 0===n&&(n=!1);var r=new Ca(n?ha.ArrayArgument:ha.Argument,e,be.EMPTY_PATH),i=this.parseData(t,r);return w(null!=i,"Parsed data should not be null."),w(0===r.fieldTransforms.length,"Field transforms should have been disallowed."),i},e.prototype.runPreConverter=function(e,t){try{return this.preConverter(e)}catch(e){var n=Fa(e);throw t.createError(n)}},e.prototype.parseData=function(e,t){if(e=this.runPreConverter(e,t),Ia(e))return ka("Unsupported field value:",t,e),this.parseObject(e,t);if(e instanceof fa)return this.parseSentinelFieldValue(e,t),null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.arrayElement&&t.dataSource!==ha.ArrayArgument)throw t.createError("Nested arrays are not supported");return this.parseArray(e,t)}return this.parseScalarValue(e,t)},e.prototype.parseObject=function(e,t){var n=this,r=new Le(re);return A(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):D(e,function(e,i){var o=n.parseData(i,t.childContextForField(e));null!=o&&(r=r.insert(e,o))}),new tn(r)},e.prototype.parseArray=function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=o[i],s=this.parseData(a,t.childContextForArray(r));null==s&&(s=jt.INSTANCE),n.push(s),r++}return new nn(n)},e.prototype.parseSentinelFieldValue=function(e,t){if(!Ea(t.dataSource))throw t.createError(e._methodName+"() can only be used with update() and set()");if(null===t.path)throw t.createError(e._methodName+"() is not currently supported inside arrays");if(e instanceof pa){if(t.dataSource!==ha.MergeSet)throw t.dataSource===ha.Update?(w(t.path.length>0,"FieldValue.delete() at the top level should have already been handled."),t.createError("FieldValue.delete() can only appear at the top level of your update data")):t.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");t.fieldMask.push(t.path)}else if(e instanceof ma)t.fieldTransforms.push(new At(t.path,oo.instance));else if(e instanceof ga){var n=this.parseArrayTransformElements(e._methodName,e._elements),r=new ao(n);t.fieldTransforms.push(new At(t.path,r))}else if(e instanceof ya){n=this.parseArrayTransformElements(e._methodName,e._elements);var i=new so(n);t.fieldTransforms.push(new At(t.path,i))}else if(e instanceof va){var o=this.parseQueryValue("FieldValue.increment",e._operand),a=new uo(o);t.fieldTransforms.push(new At(t.path,a))}else v("Unknown FieldValue type: "+e)},e.prototype.parseScalarValue=function(e,t){if(null===e)return jt.INSTANCE;if("number"===typeof e)return Lr(e)?new Qt(e):new Ht(e);if("boolean"===typeof e)return Wt.of(e);if("string"===typeof e)return new Yt(e);if(e instanceof Date)return new Jt(Ne.fromDate(e));if(e instanceof Ne)return new Jt(new Ne(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)));if(e instanceof io)return new en(e);if(e instanceof le)return new $t(e);if(e instanceof Oa)return new Zt(e.databaseId,e.key);throw t.createError("Unsupported field value: "+H(e))},e.prototype.parseArrayTransformElements=function(e,t){var n=this;return t.map(function(t,r){var i=new Ca(ha.Argument,e,be.EMPTY_PATH);return n.parseData(t,i.childContextForArray(r))})},e}();function Ia(e){return"object"===typeof e&&null!==e&&!(e instanceof Array)&&!(e instanceof Date)&&!(e instanceof Ne)&&!(e instanceof io)&&!(e instanceof le)&&!(e instanceof Oa)&&!(e instanceof fa)}function ka(e,t,n){if(!Ia(n)||!Q(n)){var r=H(n);throw"an object"===r?t.createError(e+" a custom object"):t.createError(e+" "+r)}}function Da(e,t){if(t instanceof ta)return t._internalPath;if("string"===typeof t)return Aa(e,t);var n="Field path arguments must be of type string or FieldPath.";throw new E(S.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. "+n)}function Aa(e,t){try{return ra(t)._internalPath}catch(t){var n=Fa(t);throw new E(S.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. "+n)}}function Fa(e){return e instanceof Error?e.message:e.toString()}var Ma="firestore.googleapis.com",Na=!0,Ra=!0,La=!1,Pa=ar.COLLECTION_DISABLED,xa=!1,Ba=function(){function e(e){if(void 0===e.host){if(void 0!==e.ssl)throw new E(S.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ma,this.ssl=Na}else q("settings","non-empty string","host",e.host),this.host=e.host,U("settings","boolean","ssl",e.ssl),this.ssl=_(e.ssl,Na);if(X("settings",e,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),U("settings","object","credentials",e.credentials),this.credentials=e.credentials,U("settings","boolean","timestampsInSnapshots",e.timestampsInSnapshots),!0===e.timestampsInSnapshots?g("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===e.timestampsInSnapshots&&g("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=_(e.timestampsInSnapshots,Ra),U("settings","number","cacheSizeBytes",e.cacheSizeBytes),void 0===e.cacheSizeBytes)this.cacheSizeBytes=ar.DEFAULT_CACHE_SIZE_BYTES;else{if(e.cacheSizeBytes!==Pa&&e.cacheSizeBytes<ar.MINIMUM_CACHE_SIZE_BYTES)throw new E(S.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+ar.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=e.cacheSizeBytes}U("settings","boolean","experimentalForceLongPolling",e.experimentalForceLongPolling),this.forceLongPolling=void 0===e.experimentalForceLongPolling?La:e.experimentalForceLongPolling}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.timestampsInSnapshots===e.timestampsInSnapshots&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.forceLongPolling===e.forceLongPolling},e}(),qa=function(){function e(t,n){var r=this;if(this._firebaseApp=null,this._queue=new Ce,this.INTERNAL={delete:function(){return a.__awaiter(r,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.terminate()];case 1:return e.sent(),[2]}})})}},"object"===typeof t.options){var i=t;this._firebaseApp=i,this._databaseId=e.databaseIdFromApp(i),this._persistenceKey=i.name,this._credentials=new aa(n)}else{var o=t;if(!o.projectId)throw new E(S.INVALID_ARGUMENT,"Must provide projectId");this._databaseId=new pe(o.projectId,o.database),this._persistenceKey="[DEFAULT]",this._credentials=new oa}this._settings=new Ba({}),this._dataConverter=this.createDataConverter(this._databaseId)}return e.prototype.settings=function(e){if(N("Firestore.settings",arguments,1),x("Firestore.settings","object",1,e),O(e,"persistence"))throw new E(S.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var t=new Ba(e);if(this._firestoreClient&&!this._settings.isEqual(t))throw new E(S.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._settings=t,void 0!==t.credentials&&(this._credentials=ca(t.credentials))},e.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},e.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},e.prototype.enablePersistence=function(e){if(this._firestoreClient)throw new E(S.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var t=!1;return e&&(void 0!==e.experimentalTabSynchronization&&g("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),t=_(void 0!==e.synchronizeTabs?e.synchronizeTabs:e.experimentalTabSynchronization,xa)),this.configureClient(new Xo(this._settings.cacheSizeBytes,t))},e.prototype.clearPersistence=function(){var e=this,t=Tr.buildStoragePrefix(this.makeDatabaseInfo()),n=new Se;return this._queue.enqueueAndForgetEvenAfterShutdown(function(){return a.__awaiter(e,void 0,void 0,function(){var e;return a.__generator(this,function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientTerminated)throw new E(S.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,Tr.clearPersistence(t)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(e.prototype,"_isTerminated",{get:function(){return this.ensureClientConfigured(),this._firestoreClient.clientTerminated},enumerable:!0,configurable:!0}),e.prototype.waitForPendingWrites=function(){return this.ensureClientConfigured(),this._firestoreClient.waitForPendingWrites()},e.prototype.onSnapshotsInSync=function(e){if(this.ensureClientConfigured(),la(e))return this.onSnapshotsInSyncInternal(e);x("Firestore.onSnapshotsInSync","function",1,e);var t={next:e};return this.onSnapshotsInSyncInternal(t)},e.prototype.onSnapshotsInSyncInternal=function(e){var t=this,n=function(e){throw v("Uncaught Error in onSnapshotsInSync")},r=new ea({next:function(){e.next&&e.next()},error:n});return this._firestoreClient.addSnapshotsInSyncListener(r),function(){r.mute(),t._firestoreClient.removeSnapshotsInSyncListener(r)}},e.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new $o),this._firestoreClient},e.prototype.makeDatabaseInfo=function(){return new he(this._databaseId,this._persistenceKey,this._settings.host,this._settings.ssl,this._settings.forceLongPolling)},e.prototype.configureClient=function(e){w(!!this._settings.host,"FirestoreSettings.host is not set"),w(!this._firestoreClient,"configureClient() called multiple times");var t=this.makeDatabaseInfo();return this._firestoreClient=new Zo(b.getPlatform(),t,this._credentials,this._queue),this._firestoreClient.start(e)},e.prototype.createDataConverter=function(e){var t=function(t){if(t instanceof ja){var n=e,r=t.firestore._databaseId;if(!r.isEqual(n))throw new E(S.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new Oa(e,t._key)}return t};return new _a(t)},e.databaseIdFromApp=function(e){var t=e.options;if(!O(t,"projectId"))throw new E(S.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=t["projectId"];if(!n||"string"!==typeof n)throw new E(S.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new pe(n)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this._firebaseApp)throw new E(S.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._firebaseApp},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){return N("Firestore.collection",arguments,1),x("Firestore.collection","non-empty string",1,e),this.ensureClientConfigured(),new Ja(ve.fromString(e),this)},e.prototype.doc=function(e){return N("Firestore.doc",arguments,1),x("Firestore.doc","non-empty string",1,e),this.ensureClientConfigured(),ja.forPath(ve.fromString(e),this)},e.prototype.collectionGroup=function(e){if(N("Firestore.collectionGroup",arguments,1),x("Firestore.collectionGroup","non-empty string",1,e),e.indexOf("/")>=0)throw new E(S.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new za(new Br(ve.EMPTY_PATH,e),this)},e.prototype.runTransaction=function(e){var t=this;return N("Firestore.runTransaction",arguments,1),x("Firestore.runTransaction","function",1,e),this.ensureClientConfigured().transaction(function(n){return e(new Ua(t,n))})},e.prototype.batch=function(){return this.ensureClientConfigured(),new Va(this)},Object.defineProperty(e,"logLevel",{get:function(){switch(f()){case i.DEBUG:return"debug";case i.ERROR:return"error";case i.SILENT:return"silent";default:return v("Unknown log level: "+f())}},enumerable:!0,configurable:!0}),e.setLogLevel=function(e){switch(N("Firestore.setLogLevel",arguments,1),x("Firestore.setLogLevel","non-empty string",1,e),e){case"debug":p(i.DEBUG);break;case"error":p(i.ERROR);break;case"silent":p(i.SILENT);break;default:throw new E(S.INVALID_ARGUMENT,"Invalid log level: "+e)}},e.prototype._areTimestampsInSnapshotsEnabled=function(){return this._settings.timestampsInSnapshots},e}(),Ua=function(){function e(e,t){this._firestore=e,this._transaction=t}return e.prototype.get=function(e){var t=this;N("Transaction.get",arguments,1);var n=es("Transaction.get",e,this._firestore);return this._transaction.lookup([n._key]).then(function(e){if(!e||1!==e.length)return v("Mismatch in docs returned from document lookup.");var r=e[0];if(r instanceof an)return new Ka(t._firestore,n._key,null,!1,!1);if(r instanceof on)return new Ka(t._firestore,n._key,r,!1,!1);throw v("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)})},e.prototype.set=function(e,t,n){L("Transaction.set",arguments,2,3);var r=es("Transaction.set",e,this._firestore);n=Xa("Transaction.set",n);var i=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("Transaction.set",t,n.mergeFields):this._firestore._dataConverter.parseSetData("Transaction.set",t);return this._transaction.set(r._key,i),this},e.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return"string"===typeof t||t instanceof ta?(R("Transaction.update",arguments,3),r=es("Transaction.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",t,n,o)):(N("Transaction.update",arguments,2),r=es("Transaction.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateData("Transaction.update",t)),this._transaction.update(r._key,i),this},e.prototype.delete=function(e){N("Transaction.delete",arguments,1);var t=es("Transaction.delete",e,this._firestore);return this._transaction.delete(t._key),this},e}(),Va=function(){function e(e){this._firestore=e,this._mutations=[],this._committed=!1}return e.prototype.set=function(e,t,n){L("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=es("WriteBatch.set",e,this._firestore);n=Xa("WriteBatch.set",n);var i=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("WriteBatch.set",t,n.mergeFields):this._firestore._dataConverter.parseSetData("WriteBatch.set",t);return this._mutations=this._mutations.concat(i.toMutations(r._key,Rt.NONE)),this},e.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.verifyNotCommitted(),"string"===typeof t||t instanceof ta?(R("WriteBatch.update",arguments,3),r=es("WriteBatch.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",t,n,o)):(N("WriteBatch.update",arguments,2),r=es("WriteBatch.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",t)),this._mutations=this._mutations.concat(i.toMutations(r._key,Rt.exists(!0))),this},e.prototype.delete=function(e){N("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var t=es("WriteBatch.delete",e,this._firestore);return this._mutations=this._mutations.concat(new qt(t._key,Rt.NONE)),this},e.prototype.commit=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]})})},e.prototype.verifyNotCommitted=function(){if(this._committed)throw new E(S.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}(),ja=function(){function e(e,t){this._key=e,this.firestore=t,this._firestoreClient=this.firestore.ensureClientConfigured()}return e.forPath=function(t,n){if(t.length%2!==0)throw new E(S.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(new Te(t),n)},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Ja(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){if(N("DocumentReference.collection",arguments,1),x("DocumentReference.collection","non-empty string",1,e),!e)throw new E(S.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var t=ve.fromString(e);return new Ja(this._key.path.child(t),this.firestore)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw $("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this._key.isEqual(t._key)},e.prototype.set=function(e,t){L("DocumentReference.set",arguments,1,2),t=Xa("DocumentReference.set",t);var n=t.merge||t.mergeFields?this.firestore._dataConverter.parseMergeData("DocumentReference.set",e,t.mergeFields):this.firestore._dataConverter.parseSetData("DocumentReference.set",e);return this._firestoreClient.write(n.toMutations(this._key,Rt.NONE))},e.prototype.update=function(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"===typeof e||e instanceof ta?(R("DocumentReference.update",arguments,2),n=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",e,t,r)):(N("DocumentReference.update",arguments,1),n=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",e)),this._firestoreClient.write(n.toMutations(this._key,Rt.exists(!0)))},e.prototype.delete=function(){return N("DocumentReference.delete",arguments,0),this._firestoreClient.write([new qt(this._key,Rt.NONE)])},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];L("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!==typeof e[i]||la(e[i])||(r=e[i],X("DocumentReference.onSnapshot",r,["includeMetadataChanges"]),U("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return la(e[i])?n=e[i]:(x("DocumentReference.onSnapshot","function",i,e[i]),B("DocumentReference.onSnapshot","function",i+1,e[i+1]),B("DocumentReference.onSnapshot","function",i+2,e[i+2]),n={next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(o,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new ea({next:function(e){if(t.next){w(e.docs.size<=1,"Too many documents returned on a document query");var r=e.docs.get(n._key);t.next(new Ka(n.firestore,n._key,r,e.fromCache,e.hasPendingWrites))}},error:r}),o=this._firestoreClient.listen(Br.atPath(this._key.path),i,e);return function(){i.mute(),n._firestoreClient.unlisten(o)}},e.prototype.get=function(e){var t=this;return L("DocumentReference.get",arguments,0,1),Za("DocumentReference.get",e),new Promise(function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentFromLocalCache(t._key).then(function(e){n(new Ka(t.firestore,t._key,e,!0,e instanceof on&&e.hasLocalMutations))},r):t.getViaSnapshotListener(n,r,e)})},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?t(new E(S.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?t(new E(S.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(i)},error:t})},e}(),Wa=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),Ka=function(){function e(e,t,n,r,i){this._firestore=e,this._key=t,this._document=n,this._fromCache=r,this._hasPendingWrites=i}return e.prototype.data=function(e){return L("DocumentSnapshot.data",arguments,0,1),e=$a("DocumentSnapshot.data",e),this._document?this.convertObject(this._document.data(),Ut.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},e.prototype.get=function(e,t){if(L("DocumentSnapshot.get",arguments,1,2),t=$a("DocumentSnapshot.get",t),this._document){var n=this._document.data().field(Da("DocumentSnapshot.get",e));if(null!==n)return this.convertValue(n,Ut.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new ja(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return new Wa(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){if(!(t instanceof e))throw $("isEqual","DocumentSnapshot",1,t);return this._firestore===t._firestore&&this._fromCache===t._fromCache&&this._key.isEqual(t._key)&&(null===this._document?null===t._document:this._document.isEqual(t._document))},e.prototype.convertObject=function(e,t){var n=this,r={};return e.forEach(function(e,i){r[e]=n.convertValue(i,t)}),r},e.prototype.convertValue=function(e,t){if(e instanceof tn)return this.convertObject(e,t);if(e instanceof nn)return this.convertArray(e,t);if(e instanceof Zt){var n=e.value(t),r=this._firestore.ensureClientConfigured().databaseId();return e.databaseId.isEqual(r)||g("Document "+this._key.path+" contains a document reference within a different database ("+e.databaseId.projectId+"/"+e.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new ja(n,this._firestore)}return e.value(t)},e.prototype.convertArray=function(e,t){var n=this;return e.internalValue.map(function(e){return n.convertValue(e,t)})},e}(),Ga=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.data=function(t){var n=e.prototype.data.call(this,t);return w("object"===typeof n,"Document in a QueryDocumentSnapshot should exist"),n},t}(Ka),za=function(){function e(e,t){this._query=e,this.firestore=t}return e.prototype.where=function(t,n,r){N("Query.where",arguments,3),J("Query.where",3,r);var i,o=["<","<=","==",">=",">","array-contains","in","array-contains-any"];G("Query.where",o,2,n);var a=Da("Query.where",t),s=Ur.fromString(n);if(a.isKeyField()){if(s===Ur.ARRAY_CONTAINS||s===Ur.ARRAY_CONTAINS_ANY)throw new E(S.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+s.toString()+"' queries on FieldPath.documentId().");if(s===Ur.IN){this.validateDisjunctiveFilterElements(r,s);for(var u=[],c=0,l=r;c<l.length;c++){var d=l[c];u.push(this.parseDocumentIdValue(d))}i=new nn(u)}else i=this.parseDocumentIdValue(r)}else s!==Ur.IN&&s!==Ur.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(r,s),i=this.firestore._dataConverter.parseQueryValue("Query.where",r,s===Ur.IN);var h=Vr.create(a,s,i);return this.validateNewFilter(h),new e(this._query.addFilter(h),this.firestore)},e.prototype.orderBy=function(t,n){var r;if(L("Query.orderBy",arguments,1,2),B("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r=Qr.ASCENDING;else{if("desc"!==n)throw new E(S.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=Qr.DESCENDING}if(null!==this._query.startAt)throw new E(S.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new E(S.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=Da("Query.orderBy",t),o=new Yr(i,r);return this.validateNewOrderBy(o),new e(this._query.addOrderBy(o),this.firestore)},e.prototype.limit=function(t){return N("Query.limit",arguments,1),x("Query.limit","number",1,t),Z("Query.limit",1,t),new e(this._query.withLimitToFirst(t),this.firestore)},e.prototype.limitToLast=function(t){return N("Query.limitToLast",arguments,1),x("Query.limitToLast","number",1,t),Z("Query.limitToLast",1,t),new e(this._query.withLimitToLast(t),this.firestore)},e.prototype.startAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];R("Query.startAt",arguments,1);var i=this.boundFromDocOrFields("Query.startAt",t,n,!0);return new e(this._query.withStartAt(i),this.firestore)},e.prototype.startAfter=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];R("Query.startAfter",arguments,1);var i=this.boundFromDocOrFields("Query.startAfter",t,n,!1);return new e(this._query.withStartAt(i),this.firestore)},e.prototype.endBefore=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];R("Query.endBefore",arguments,1);var i=this.boundFromDocOrFields("Query.endBefore",t,n,!0);return new e(this._query.withEndAt(i),this.firestore)},e.prototype.endAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];R("Query.endAt",arguments,1);var i=this.boundFromDocOrFields("Query.endAt",t,n,!1);return new e(this._query.withEndAt(i),this.firestore)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw $("isEqual","Query",1,t);return this.firestore===t.firestore&&this._query.isEqual(t._query)},e.prototype.boundFromDocOrFields=function(e,t,n,r){if(J(e,1,t),t instanceof Ka){if(n.length>0)throw new E(S.INVALID_ARGUMENT,"Too many arguments provided to "+e+"().");var i=t;if(!i.exists)throw new E(S.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+e+"().");return this.boundFromDocument(e,i._document,r)}var o=[t].concat(n);return this.boundFromFields(e,o,r)},e.prototype.boundFromDocument=function(e,t,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new Zt(this.firestore._databaseId,t.key));else{var s=t.field(a.field);if(s instanceof Xt)throw new E(S.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===s){var u=a.field.canonicalString();throw new E(S.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(s)}}return new Hr(r,n)},e.prototype.boundFromFields=function(e,t,n){var r=this._query.explicitOrderBy;if(t.length>r.length)throw new E(S.INVALID_ARGUMENT,"Too many arguments provided to "+e+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<t.length;o++){var a=t[o],s=r[o];if(s.field.isKeyField()){if("string"!==typeof a)throw new E(S.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+e+"(), but got a "+typeof a);if(!this._query.isCollectionGroupQuery()&&-1!==a.indexOf("/"))throw new E(S.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+e+"() must be a plain document ID, but '"+a+"' contains a slash.");var u=this._query.path.child(ve.fromString(a));if(!Te.isDocumentKey(u))throw new E(S.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+e+"() must result in a valid document path, but '"+u+"' is not because it contains an odd number of segments.");var c=new Te(u);i.push(new Zt(this.firestore._databaseId,c))}else{var l=this.firestore._dataConverter.parseQueryValue(e,a);i.push(l)}}return new Hr(i,n)},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];L("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!==typeof e[i]||la(e[i])||(r=e[i],X("Query.onSnapshot",r,["includeMetadataChanges"]),U("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),la(e[i])?n=e[i]:(x("Query.onSnapshot","function",i,e[i]),B("Query.onSnapshot","function",i+1,e[i+1]),B("Query.onSnapshot","function",i+2,e[i+2]),n={next:e[i],error:e[i+1],complete:e[i+2]}),this.validateHasExplicitOrderByForLimitToLast(this._query),this.onSnapshotInternal(r,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new ea({next:function(e){t.next&&t.next(new Qa(n.firestore,n._query,e))},error:r}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,e);return function(){i.mute(),o.unlisten(a)}},e.prototype.validateHasExplicitOrderByForLimitToLast=function(e){if(e.hasLimitToLast()&&0===e.explicitOrderBy.length)throw new E(S.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},e.prototype.get=function(e){var t=this;return L("Query.get",arguments,0,1),Za("Query.get",e),this.validateHasExplicitOrderByForLimitToLast(this._query),new Promise(function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentsFromLocalCache(t._query).then(function(e){n(new Qa(t.firestore,t._query,e))},r):t.getViaSnapshotListener(n,r,e)})},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?t(new E(S.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(i)},error:t})},e.prototype.parseDocumentIdValue=function(e){if("string"===typeof e){if(""===e)throw new E(S.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==e.indexOf("/"))throw new E(S.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+e+"' contains a '/' character.");var t=this._query.path.child(ve.fromString(e));if(!Te.isDocumentKey(t))throw new E(S.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+t+"' is not because it has an odd number of segments ("+t.length+").");return new Zt(this.firestore._databaseId,new Te(t))}if(e instanceof ja){var n=e;return new Zt(this.firestore._databaseId,n._key)}throw new E(S.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+H(e)+".")},e.prototype.validateDisjunctiveFilterElements=function(e,t){if(!Array.isArray(e)||0===e.length)throw new E(S.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new E(S.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.");if(e.indexOf(null)>=0)throw new E(S.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'null' in the value array.");if(e.filter(function(e){return Number.isNaN(e)}).length>0)throw new E(S.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'NaN' in the value array.")},e.prototype.validateNewFilter=function(e){if(e instanceof Vr){var t=[Ur.ARRAY_CONTAINS,Ur.ARRAY_CONTAINS_ANY],n=[Ur.IN,Ur.ARRAY_CONTAINS_ANY],r=t.indexOf(e.op)>=0,i=n.indexOf(e.op)>=0;if(e.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(e.field))throw new E(S.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+e.field.toString()+"'");var a=this._query.getFirstOrderByField();null!==a&&this.validateOrderByAndInequalityMatch(e.field,a)}else if(i||r){var s=null;if(i&&(s=this._query.findFilterOperator(n)),null===s&&r&&(s=this._query.findFilterOperator(t)),null!=s)throw s===e.op?new E(S.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new E(S.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+s.toString()+"' filters.")}}},e.prototype.validateNewOrderBy=function(e){if(null===this._query.getFirstOrderByField()){var t=this._query.getInequalityFilterField();null!==t&&this.validateOrderByAndInequalityMatch(t,e.field)}},e.prototype.validateOrderByAndInequalityMatch=function(e,t){if(!t.isEqual(e))throw new E(S.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+t.toString()+"' instead.")},e}(),Qa=function(){function e(e,t,n){this._firestore=e,this._originalQuery=t,this._snapshot=n,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new Wa(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;L("QuerySnapshot.forEach",arguments,1,2),x("QuerySnapshot.forEach","function",1,e),this._snapshot.docs.forEach(function(r){e.call(t,n.convertToDocumentImpl(r))})},Object.defineProperty(e.prototype,"query",{get:function(){return new za(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),e.prototype.docChanges=function(e){e&&(X("QuerySnapshot.docChanges",e,["includeMetadataChanges"]),U("QuerySnapshot.docChanges","boolean","includeMetadataChanges",e.includeMetadataChanges));var t=!(!e||!e.includeMetadataChanges);if(t&&this._snapshot.excludesMetadataChanges)throw new E(S.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=ts(this._firestore,t,this._snapshot),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},e.prototype.isEqual=function(t){if(!(t instanceof e))throw $("isEqual","QuerySnapshot",1,t);return this._firestore===t._firestore&&this._originalQuery.isEqual(t._originalQuery)&&this._snapshot.isEqual(t._snapshot)},e.prototype.convertToDocumentImpl=function(e){return new Ga(this._firestore,e.key,e,this.metadata.fromCache,this._snapshot.mutatedKeys.has(e.key))},e}();function Ha(){throw new E(S.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}var Ya=a.__spreadArrays(["length","forEach","map"],"undefined"!==typeof Symbol?[Symbol.iterator]:[]);Ya.forEach(function(e){try{Object.defineProperty(Qa.prototype.docChanges,e,{get:function(){return Ha()}})}catch(e){}});var Ja=function(e){function t(t,n){var r=e.call(this,Br.atPath(t),n)||this;if(t.length%2!==1)throw new E(S.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.canonicalString()+" has "+t.length);return r}return a.__extends(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._query.path.popLast();return e.isEmpty()?null:new ja(new Te(e),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.doc=function(e){if(L("CollectionReference.doc",arguments,0,1),0===arguments.length&&(e=ne.newId()),x("CollectionReference.doc","non-empty string",1,e),""===e)throw new E(S.INVALID_ARGUMENT,"Document path must be a non-empty string");var t=ve.fromString(e);return ja.forPath(this._query.path.child(t),this.firestore)},t.prototype.add=function(e){N("CollectionReference.add",arguments,1),x("CollectionReference.add","object",1,e);var t=this.doc();return t.set(e).then(function(){return t})},t}(za);function Xa(e,t){if(void 0===t)return{merge:!1};if(X(e,t,["merge","mergeFields"]),U(e,"boolean","merge",t.merge),j(e,"mergeFields","a string or a FieldPath",t.mergeFields,function(e){return"string"===typeof e||e instanceof ta}),void 0!==t.mergeFields&&void 0!==t.merge)throw new E(S.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function $a(e,t){return void 0===t?{}:(X(e,t,["serverTimestamps"]),K(e,"options","serverTimestamps",t.serverTimestamps,["estimate","previous","none"]),t)}function Za(e,t){B(e,"object",1,t),t&&(X(e,t,["source"]),K(e,"options","source",t.source,["default","server","cache"]))}function es(e,t,n){if(t instanceof ja){if(t.firestore!==n)throw new E(S.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}throw $(e,"DocumentReference",1,t)}function ts(e,t,n){if(n.oldDocs.isEmpty()){var r,i=0;return n.docChanges.map(function(t){var o=new Ga(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key));return w(t.type===qi.Added,"Invalid event type for first snapshot"),w(!r||n.query.docComparator(r,t.doc)<0,"Got added events in wrong order"),r=t.doc,{type:"added",doc:o,oldIndex:-1,newIndex:i++}})}var o=n.oldDocs;return n.docChanges.filter(function(e){return t||e.type!==qi.Metadata}).map(function(t){var r=new Ga(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key)),i=-1,a=-1;return t.type!==qi.Added&&(i=o.indexOf(t.doc.key),w(i>=0,"Index for document not found"),o=o.delete(t.doc.key)),t.type!==qi.Removed&&(o=o.add(t.doc),a=o.indexOf(t.doc.key)),{type:ns(t.type),doc:r,oldIndex:i,newIndex:a}})}function ns(e){switch(e){case qi.Added:return"added";case qi.Modified:case qi.Metadata:return"modified";case qi.Removed:return"removed";default:return v("Unknown change type: "+e)}}var rs=C(qa,"Use firebase.firestore() instead."),is=C(Ua,"Use firebase.firestore().runTransaction() instead."),os=C(Va,"Use firebase.firestore().batch() instead."),as=C(ja,"Use firebase.firestore().doc() instead."),ss=C(Ka),us=C(Ga),cs=C(za),ls=C(Qa),ds=C(Ja,"Use firebase.firestore().collection() instead."),hs={Firestore:rs,GeoPoint:io,Timestamp:Ne,Blob:de,Transaction:is,WriteBatch:os,DocumentReference:as,DocumentSnapshot:ss,Query:cs,QueryDocumentSnapshot:us,QuerySnapshot:ls,CollectionReference:ds,FieldPath:ta,FieldValue:wa,setLogLevel:qa.setLogLevel,CACHE_SIZE_UNLIMITED:Pa};function fs(e){e.INTERNAL.registerComponent(new c.Component("firestore",function(e){var t=e.getProvider("app").getImmediate();return new qa(t,e.getProvider("auth-internal"))},"PUBLIC").setServiceProps(F(hs)))}var ps=function(){function e(){}return e.prototype.addCallback=function(e){},e.prototype.shutdown=function(){},e}(),ms="ConnectivityMonitor",gs=function(){function e(){var e=this;this.networkAvailableListener=function(){return e.onNetworkAvailable()},this.networkUnavailableListener=function(){return e.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}return e.prototype.addCallback=function(e){this.callbacks.push(e)},e.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},e.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},e.prototype.onNetworkAvailable=function(){m(ms,"Network connectivity changed: AVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++){var n=t[e];n(0)}},e.prototype.onNetworkUnavailable=function(){m(ms,"Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++){var n=t[e];n(1)}},e.isAvailable=function(){return"undefined"!==typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},e}(),ys=function(){function e(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}return e.prototype.onOpen=function(e){w(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=e},e.prototype.onClose=function(e){w(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=e},e.prototype.onMessage=function(e){w(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=e},e.prototype.close=function(){this.closeFn()},e.prototype.send=function(e){this.sendFn(e)},e.prototype.callOnOpen=function(){w(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},e.prototype.callOnClose=function(e){w(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(e)},e.prototype.callOnMessage=function(e){w(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(e)},e}(),vs="Connection",ws="google.firestore.v1.Firestore",bs="v1",Ts={BatchGetDocuments:"batchGet",Commit:"commit"},Ss="gl-js/ fire/"+d,Es=15,Cs=function(){function e(e){this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.baseUrl=t+"://"+e.host,this.forceLongPolling=e.forceLongPolling}return e.prototype.modifyHeadersForRequest=function(e,t){if(t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n]);e["X-Goog-Api-Client"]=Ss},e.prototype.invokeRPC=function(e,t,n){var r=this,i=this.makeUrl(e);return new Promise(function(o,s){var u=new l.XhrIo;u.listenOnce(l.EventType.COMPLETE,function(){try{switch(u.getLastErrorCode()){case l.ErrorCode.NO_ERROR:var t=u.getResponseJson();m(vs,"XHR received:",JSON.stringify(t)),o(t);break;case l.ErrorCode.TIMEOUT:m(vs,'RPC "'+e+'" timed out'),s(new E(S.DEADLINE_EXCEEDED,"Request time out"));break;case l.ErrorCode.HTTP_ERROR:var n=u.getStatus();if(m(vs,'RPC "'+e+'" failed with status:',n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson().error;if(r&&r.status&&r.message){var i=Bi(r.status);s(new E(i,r.message))}else s(new E(S.UNKNOWN,"Server responded with status "+u.getStatus()))}else m(vs,'RPC "'+e+'" failed'),s(new E(S.UNAVAILABLE,"Connection failed."));break;default:v('RPC "'+e+'" failed with unanticipated webchannel error '+u.getLastErrorCode()+": "+u.getLastError()+", giving up.")}}finally{m(vs,'RPC "'+e+'" completed.')}});var c=a.__assign({},t);delete c.database;var d=JSON.stringify(c);m(vs,"XHR sending: ",i+" "+d);var h={"Content-Type":"text/plain"};r.modifyHeadersForRequest(h,n),u.send(i,"POST",d,h,Es)})},e.prototype.invokeStreamingRPC=function(e,t,n){return this.invokeRPC(e,t,n)},e.prototype.openStream=function(e,t){var n=[this.baseUrl,"/",ws,"/",e,"/channel"],r=l.createWebChannelTransport(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(i.initMessageHeaders,t),u.isReactNative()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");m(vs,"Creating WebChannel: "+o+" "+i);var a=r.createWebChannel(o,i),s=!1,c=!1,d=new ys({sendFn:function(e){c?m(vs,"Not sending because WebChannel is closed:",e):(s||(m(vs,"Opening WebChannel transport."),a.open(),s=!0),m(vs,"WebChannel sending:",e),a.send(e))},closeFn:function(){return a.close()}}),h=function(e,t){a.listen(e,function(e){try{t(e)}catch(e){setTimeout(function(){throw e},0)}})};return h(l.WebChannel.EventType.OPEN,function(){c||m(vs,"WebChannel transport opened.")}),h(l.WebChannel.EventType.CLOSE,function(){c||(c=!0,m(vs,"WebChannel transport closed"),d.callOnClose())}),h(l.WebChannel.EventType.ERROR,function(e){c||(c=!0,m(vs,"WebChannel transport errored:",e),d.callOnClose(new E(S.UNAVAILABLE,"The operation could not be completed")))}),h(l.WebChannel.EventType.MESSAGE,function(e){if(!c){var t=e.data[0];w(!!t,"Got a webchannel message without data.");var n=t,r=n.error||n[0]&&n[0].error;if(r){m(vs,"WebChannel received error:",r);var i=r.status,o=Li(i),s=r.message;void 0===o&&(o=S.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,d.callOnClose(new E(o,s)),a.close()}else m(vs,"WebChannel received:",t),d.callOnMessage(t)}}),setTimeout(function(){d.callOnOpen()},0),d},e.prototype.makeUrl=function(e){var t=Ts[e];return w(void 0!==t,"Unknown REST mapping for: "+e),this.baseUrl+"/"+bs+"/projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents:"+t},e}(),Os=function(){function e(){this.emptyByteString="",this.base64Available="undefined"!==typeof atob}return Object.defineProperty(e.prototype,"document",{get:function(){return"undefined"!==typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return"undefined"!==typeof window?window:null},enumerable:!0,configurable:!0}),e.prototype.loadConnection=function(e){return Promise.resolve(new Cs(e))},e.prototype.newConnectivityMonitor=function(){return gs.isAvailable()?new gs:new ps},e.prototype.newSerializer=function(e){return new yo(e,{useProto3Json:!0})},e.prototype.formatJSON=function(e){return JSON.stringify(e)},e.prototype.atob=function(e){return atob(e)},e.prototype.btoa=function(e){return btoa(e)},e}();function _s(e){fs(e)}b.setPlatform(new Os),_s(o),t.registerFirestore=_s}).call(this,n("Q2Ig"))},ABqa:function(e,t,n){"use strict";function r(e){return e&&"object"===typeof e&&"default"in e?e["default"]:e}var i=r(n("wj3C")),o=n("mrSG"),a=n("S+S0"),s={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},u=function(e){function t(n,r,i){var o=e.call(this,r)||this;return Object.setPrototypeOf(o,t.prototype),o.code=n,o.details=i,o}return o.__extends(t,e),t}(Error);function c(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function l(e,t,n){var r=c(e),i=r,o=void 0;try{var a=t&&t.error;if(a){var l=a.status;if("string"===typeof l){if(!s[l])return new u("internal","internal");r=s[l],i=l}var d=a.message;"string"===typeof d&&(i=d),o=a.details,void 0!==o&&(o=n.decode(o))}}catch(e){}return"ok"===r?null:new u(r,i,o)}var d=function(){function e(e,t){var n=this;this.auth=null,this.messaging=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(function(e){return n.auth=e},function(){}),this.messaging||t.get().then(function(e){return n.messaging=e},function(){})}return e.prototype.getAuthToken=function(){return o.__awaiter(this,void 0,void 0,function(){var e;return o.__generator(this,function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return e=t.sent(),e?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},e.prototype.getInstanceIdToken=function(){return o.__awaiter(this,void 0,void 0,function(){var e;return o.__generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this.messaging?[4,this.messaging.getToken()]:[2,void 0];case 1:return e=t.sent(),e?[2,e]:[2,void 0];case 2:return t.sent(),[2,void 0];case 3:return[2]}})})},e.prototype.getContext=function(){return o.__awaiter(this,void 0,void 0,function(){var e,t;return o.__generator(this,function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return e=n.sent(),[4,this.getInstanceIdToken()];case 2:return t=n.sent(),[2,{authToken:e,instanceIdToken:t}]}})})},e}(),h="type.googleapis.com/google.protobuf.Int64Value",f="type.googleapis.com/google.protobuf.UInt64Value";function p(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}var m=function(){function e(){}return e.prototype.encode=function(e){var t=this;if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(Array.isArray(e))return e.map(function(e){return t.encode(e)});if("function"===typeof e||"object"===typeof e)return p(e,function(e){return t.encode(e)});throw new Error("Data cannot be encoded in JSON: "+e)},e.prototype.decode=function(e){var t=this;if(null==e)return e;if(e["@type"])switch(e["@type"]){case h:case f:var n=Number(e["value"]);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+e);return n;default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(function(e){return t.decode(e)}):"function"===typeof e||"object"===typeof e?p(e,function(e){return t.decode(e)}):e},e}();function g(e){return new Promise(function(t,n){setTimeout(function(){n(new u("deadline-exceeded","deadline-exceeded"))},e)})}var y=function(){function e(e,t,n,r){var i=this;void 0===r&&(r="us-central1"),this.app_=e,this.region_=r,this.serializer=new m,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return i.deleteService()}},this.contextProvider=new d(t,n),this.cancelAllRequests=new Promise(function(e){i.deleteService=function(){return e()}})}return Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),e.prototype._url=function(e){var t=this.app_.options.projectId,n=this.region_;if(null!==this.emulatorOrigin){var r=this.emulatorOrigin;return r+"/"+t+"/"+n+"/"+e}return"https://"+n+"-"+t+".cloudfunctions.net/"+e},e.prototype.useFunctionsEmulator=function(e){this.emulatorOrigin=e},e.prototype.httpsCallable=function(e,t){var n=this;return function(r){return n.call(e,r,t||{})}},e.prototype.postJSON=function(e,t,n){return o.__awaiter(this,void 0,void 0,function(){var r,i;return o.__generator(this,function(o){switch(o.label){case 0:n.append("Content-Type","application/json"),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(e,{method:"POST",body:JSON.stringify(t),headers:n})];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),[2,{status:0,json:null}];case 4:i=null,o.label=5;case 5:return o.trys.push([5,7,,8]),[4,r.json()];case 6:return i=o.sent(),[3,8];case 7:return o.sent(),[3,8];case 8:return[2,{status:r.status,json:i}]}})})},e.prototype.call=function(e,t,n){return o.__awaiter(this,void 0,void 0,function(){var r,i,a,s,c,d,h,f,p;return o.__generator(this,function(o){switch(o.label){case 0:return r=this._url(e),t=this.serializer.encode(t),i={data:t},a=new Headers,[4,this.contextProvider.getContext()];case 1:return s=o.sent(),s.authToken&&a.append("Authorization","Bearer "+s.authToken),s.instanceIdToken&&a.append("Firebase-Instance-ID-Token",s.instanceIdToken),c=n.timeout||7e4,[4,Promise.race([this.postJSON(r,i,a),g(c),this.cancelAllRequests])];case 2:if(d=o.sent(),!d)throw new u("cancelled","Firebase Functions instance was deleted.");if(h=l(d.status,d.json,this.serializer),h)throw h;if(!d.json)throw new u("internal","Response is not valid JSON object.");if(f=d.json.data,"undefined"===typeof f&&(f=d.json.result),"undefined"===typeof f)throw new u("internal","Response is missing data field.");return p=this.serializer.decode(f),[2,{data:p}]}})})},e}(),v="functions";function w(e,t){var n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("messaging");return new y(n,r,i,t)}function b(e){var t={Functions:y};e.INTERNAL.registerComponent(new a.Component(v,w,"PUBLIC").setServiceProps(t).setMultipleInstances(!0))}b(i)},"ArA+":function(e,t,n){"use strict";n.r(t),n.d(t,"dynamic",function(){return y}),n.d(t,"router",function(){return E});var r=n("55Ip");n.d(t,"Link",function(){return r["Link"]}),n.d(t,"NavLink",function(){return r["NavLink"]});var i=n("CxXe");n.d(t,"Redirect",function(){return i["c"]}),n.d(t,"Route",function(){return i["d"]}),n.d(t,"withRouter",function(){return i["o"]});var o=n("q1tI"),a=n.n(o),s=n("CnBM"),u=n.n(s),c=n("RFCh"),l=n.n(c),d=n("o2JA");for(var h in d)["Link","NavLink","Redirect","Route","dynamic","router","withRouter","default"].indexOf(h)<0&&function(e){n.d(t,e,function(){return d[e]})}(h);function f(e){return f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){p(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function y(e,t){var n=u.a,r={loading:function(e){e.error,e.isLoading;return a.a.createElement("p",null,"loading...")}};if("function"===typeof e.then?r.loader=function(){return e}:"object"===f(e)&&(r=g({},r,{},e)),r=g({},r,{},t),e.render&&(r.render=function(t,n){return e.render(n,t)}),e.modules){n=u.a.Map;var i={},o=e.modules();Object.keys(o).forEach(function(e){var t=o[e];"function"!==typeof t.then?i[e]=t:i[e]=function(){return t.then(function(e){return e.default||e})}}),r.loader=i}return n(r)}function v(){l.a.push.apply(l.a,arguments)}function w(){l.a.replace.apply(l.a,arguments)}function b(){l.a.go.apply(l.a,arguments)}function T(){l.a.goBack.apply(l.a,arguments)}function S(){l.a.goForward.apply(l.a,arguments)}var E={push:v,replace:w,go:b,goBack:T,goForward:S}},"J+/v":function(e,t,n){"use strict";n.r(t);n("cIOH"),n("hgVy")},K7Wh:function(e,t,n){"use strict";var r=n("mMB1");Object.defineProperty(t,"__esModule",{value:!0}),t.dispatchSuccessLogin=b,t.default=t.userPermissionToAuthority=t.LoginStatus=t.UserAuthorities=t.SUCCESS_LOGIN=t.CHANGE_LOGIN_STATUS=t.USER_LOGIN=void 0;var i=r(n("BEh9")),o=r(n("rD5P")),a=r(n("/47v")),s=n("C0qv"),u=n("7DNP"),c=n("Oxmv"),l=n("BqDR"),d=n("OUGT"),h=n("Oj1a"),f=n("1qqS"),p=n("EtoD"),m="userLogin";t.USER_LOGIN=m;var g="changeLoginStatus";t.CHANGE_LOGIN_STATUS=g;var y,v,w="successLogin";function b(e){e({type:"".concat(m,"/").concat(w)})}t.SUCCESS_LOGIN=w,t.UserAuthorities=y,function(e){e["GUEST"]="guest",e["USER"]="user",e["PRO"]="pro",e["MODERATOR"]="moderator",e["ADMIN"]="admin"}(y||(t.UserAuthorities=y={})),t.LoginStatus=v,function(e){e["OK"]="OK",e["ERROR"]="ERROR"}(v||(t.LoginStatus=v={}));var T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.UserPermission.ONLINE_USER,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[y.USER];if(t&&n.push(y.PRO),void 0===e)return n;switch(e){case s.UserPermission.ONLINE_MODERATOR:return[].concat(n,[y.MODERATOR]);case s.UserPermission.ONLINE_ADMIN:return[].concat(n,[y.ADMIN]);case s.UserPermission.ONLINE_USER:case s.UserPermission.ONLINE_PRO_BUILDER:default:return n}};t.userPermissionToAuthority=T;var S={namespace:m,state:{status:void 0},effects:(0,i.default)({},w,o.default.mark(function e(t,n){var r,i,s,y,w,b,S;return o.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(i=n.put,s=n.call,y=c.auth.currentUser,y){e.next=4;break}throw new Error("Success login with null firebaseUser");case 4:return w=s(l.getUser,y.uid),e.next=7,w;case 7:if(b=e.sent,null!==b){e.next=16;break}return e.next=11,s(l.initializeUser,y);case 11:return b=e.sent,e.next=14,i(u.routerRedux.replace({pathname:(0,f.getCurrentUserEditProfileUrl)()}));case 14:e.next=18;break;case 16:return e.next=18,i({type:"".concat(d.GLOBAL,"/").concat(d.REDIRECT_BACK)});case 18:return S=(0,a.default)({},b,{uid:y.uid,display_name:b.display_name||y.displayName}),e.next=21,i({type:"".concat(h.USER,"/").concat(h.SET_USER),currentUser:S});case 21:return e.next=23,i({type:"".concat(m,"/").concat(g),currentAuthority:T(null===(r=b)||void 0===r?void 0:r.permission,(0,p.isProUser)(b)),status:v.OK});case 23:case"end":return e.stop()}},e)})),reducers:(0,i.default)({},g,function(e,t){var n=t.currentAuthority,r=t.status;return(0,p.setAuthority)(n),(0,a.default)({},e,{status:r})})},E=S;t.default=E},Kkfi:function(e,t,n){e.exports={menu:"antd-pro-components-select-lang-index-menu",dropDown:"antd-pro-components-select-lang-index-dropDown"}},MoRW:function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),i=n("TSYQ"),o=n.n(i),a=n("jO45"),s=n("jN4g"),u=n("IMoZ"),c=n("KFNm"),l=n("H84U"),d=n("6CfX"),h=function(){return r["createElement"]("svg",{width:"252",height:"294"},r["createElement"]("defs",null,r["createElement"]("path",{d:"M0 .387h251.772v251.772H0z"})),r["createElement"]("g",{fill:"none",fillRule:"evenodd"},r["createElement"]("g",{transform:"translate(0 .012)"},r["createElement"]("mask",{fill:"#fff"}),r["createElement"]("path",{d:"M0 127.32v-2.095C0 56.279 55.892.387 124.838.387h2.096c68.946 0 124.838 55.892 124.838 124.838v2.096c0 68.946-55.892 124.838-124.838 124.838h-2.096C55.892 252.16 0 196.267 0 127.321",fill:"#E4EBF7",mask:"url(#b)"})),r["createElement"]("path",{d:"M39.755 130.84a8.276 8.276 0 1 1-16.468-1.66 8.276 8.276 0 0 1 16.468 1.66",fill:"#FFF"}),r["createElement"]("path",{d:"M36.975 134.297l10.482 5.943M48.373 146.508l-12.648 10.788",stroke:"#FFF",strokeWidth:"2"}),r["createElement"]("path",{d:"M39.875 159.352a5.667 5.667 0 1 1-11.277-1.136 5.667 5.667 0 0 1 11.277 1.136M57.588 143.247a5.708 5.708 0 1 1-11.358-1.145 5.708 5.708 0 0 1 11.358 1.145M99.018 26.875l29.82-.014a4.587 4.587 0 1 0-.003-9.175l-29.82.013a4.587 4.587 0 1 0 .003 9.176M110.424 45.211l29.82-.013a4.588 4.588 0 0 0-.004-9.175l-29.82.013a4.587 4.587 0 1 0 .004 9.175",fill:"#FFF"}),r["createElement"]("path",{d:"M112.798 26.861v-.002l15.784-.006a4.588 4.588 0 1 0 .003 9.175l-15.783.007v-.002a4.586 4.586 0 0 0-.004-9.172M184.523 135.668c-.553 5.485-5.447 9.483-10.931 8.93-5.485-.553-9.483-5.448-8.93-10.932.552-5.485 5.447-9.483 10.932-8.93 5.485.553 9.483 5.447 8.93 10.932",fill:"#FFF"}),r["createElement"]("path",{d:"M179.26 141.75l12.64 7.167M193.006 156.477l-15.255 13.011",stroke:"#FFF",strokeWidth:"2"}),r["createElement"]("path",{d:"M184.668 170.057a6.835 6.835 0 1 1-13.6-1.372 6.835 6.835 0 0 1 13.6 1.372M203.34 153.325a6.885 6.885 0 1 1-13.7-1.382 6.885 6.885 0 0 1 13.7 1.382",fill:"#FFF"}),r["createElement"]("path",{d:"M151.931 192.324a2.222 2.222 0 1 1-4.444 0 2.222 2.222 0 0 1 4.444 0zM225.27 116.056a2.222 2.222 0 1 1-4.445 0 2.222 2.222 0 0 1 4.444 0zM216.38 151.08a2.223 2.223 0 1 1-4.446-.001 2.223 2.223 0 0 1 4.446 0zM176.917 107.636a2.223 2.223 0 1 1-4.445 0 2.223 2.223 0 0 1 4.445 0zM195.291 92.165a2.223 2.223 0 1 1-4.445 0 2.223 2.223 0 0 1 4.445 0zM202.058 180.711a2.223 2.223 0 1 1-4.446 0 2.223 2.223 0 0 1 4.446 0z",stroke:"#FFF",strokeWidth:"2"}),r["createElement"]("path",{stroke:"#FFF",strokeWidth:"2",d:"M214.404 153.302l-1.912 20.184-10.928 5.99M173.661 174.792l-6.356 9.814h-11.36l-4.508 6.484M174.941 125.168v-15.804M220.824 117.25l-12.84 7.901-15.31-7.902V94.39"}),r["createElement"]("path",{d:"M166.588 65.936h-3.951a4.756 4.756 0 0 1-4.743-4.742 4.756 4.756 0 0 1 4.743-4.743h3.951a4.756 4.756 0 0 1 4.743 4.743 4.756 4.756 0 0 1-4.743 4.742",fill:"#FFF"}),r["createElement"]("path",{d:"M174.823 30.03c0-16.281 13.198-29.48 29.48-29.48 16.28 0 29.48 13.199 29.48 29.48 0 16.28-13.2 29.48-29.48 29.48-16.282 0-29.48-13.2-29.48-29.48",fill:"#1890FF"}),r["createElement"]("path",{d:"M205.952 38.387c.5.5.785 1.142.785 1.928s-.286 1.465-.785 1.964c-.572.5-1.214.75-2 .75-.785 0-1.429-.285-1.929-.785-.572-.5-.82-1.143-.82-1.929s.248-1.428.82-1.928c.5-.5 1.144-.75 1.93-.75.785 0 1.462.25 1.999.75m4.285-19.463c1.428 1.249 2.143 2.963 2.143 5.142 0 1.712-.427 3.13-1.219 4.25-.067.096-.137.18-.218.265-.416.429-1.41 1.346-2.956 2.699a5.07 5.07 0 0 0-1.428 1.75 5.207 5.207 0 0 0-.536 2.357v.5h-4.107v-.5c0-1.357.215-2.536.714-3.5.464-.964 1.857-2.464 4.178-4.536l.43-.5c.643-.785.964-1.643.964-2.535 0-1.18-.358-2.108-1-2.785-.678-.68-1.643-1.001-2.858-1.001-1.536 0-2.642.464-3.357 1.43-.37.5-.621 1.135-.76 1.904a1.999 1.999 0 0 1-1.971 1.63h-.004c-1.277 0-2.257-1.183-1.98-2.43.337-1.518 1.02-2.78 2.073-3.784 1.536-1.5 3.607-2.25 6.25-2.25 2.32 0 4.214.607 5.642 1.894",fill:"#FFF"}),r["createElement"]("path",{d:"M52.04 76.131s21.81 5.36 27.307 15.945c5.575 10.74-6.352 9.26-15.73 4.935-10.86-5.008-24.7-11.822-11.577-20.88",fill:"#FFB594"}),r["createElement"]("path",{d:"M90.483 67.504l-.449 2.893c-.753.49-4.748-2.663-4.748-2.663l-1.645.748-1.346-5.684s6.815-4.589 8.917-5.018c2.452-.501 9.884.94 10.7 2.278 0 0 1.32.486-2.227.69-3.548.203-5.043.447-6.79 3.132-1.747 2.686-2.412 3.624-2.412 3.624",fill:"#FFC6A0"}),r["createElement"]("path",{d:"M128.055 111.367c-2.627-7.724-6.15-13.18-8.917-15.478-3.5-2.906-9.34-2.225-11.366-4.187-1.27-1.231-3.215-1.197-3.215-1.197s-14.98-3.158-16.828-3.479c-2.37-.41-2.124-.714-6.054-1.405-1.57-1.907-2.917-1.122-2.917-1.122l-7.11-1.383c-.853-1.472-2.423-1.023-2.423-1.023l-2.468-.897c-1.645 9.976-7.74 13.796-7.74 13.796 1.795 1.122 15.703 8.3 15.703 8.3l5.107 37.11s-3.321 5.694 1.346 9.109c0 0 19.883-3.743 34.921-.329 0 0 3.047-2.546.972-8.806.523-3.01 1.394-8.263 1.736-11.622.385.772 2.019 1.918 3.14 3.477 0 0 9.407-7.365 11.052-14.012-.832-.723-1.598-1.585-2.267-2.453-.567-.736-.358-2.056-.765-2.717-.669-1.084-1.804-1.378-1.907-1.682",fill:"#FFF"}),r["createElement"]("path",{d:"M101.09 289.998s4.295 2.041 7.354 1.021c2.821-.94 4.53.668 7.08 1.178 2.55.51 6.874 1.1 11.686-1.26-.103-5.51-6.889-3.98-11.96-6.713-2.563-1.38-3.784-4.722-3.598-8.799h-9.402s-1.392 10.52-1.16 14.573",fill:"#CBD1D1"}),r["createElement"]("path",{d:"M101.067 289.826s2.428 1.271 6.759.653c3.058-.437 3.712.481 7.423 1.031 3.712.55 10.724-.069 11.823-.894.413 1.1-.343 2.063-.343 2.063s-1.512.603-4.812.824c-2.03.136-5.8.291-7.607-.503-1.787-1.375-5.247-1.903-5.728-.241-3.918.95-7.355-.286-7.355-.286l-.16-2.647z",fill:"#2B0849"}),r["createElement"]("path",{d:"M108.341 276.044h3.094s-.103 6.702 4.536 8.558c-4.64.618-8.558-2.303-7.63-8.558",fill:"#A4AABA"}),r["createElement"]("path",{d:"M57.542 272.401s-2.107 7.416-4.485 12.306c-1.798 3.695-4.225 7.492 5.465 7.492 6.648 0 8.953-.48 7.423-6.599-1.53-6.12.266-13.199.266-13.199h-8.669z",fill:"#CBD1D1"}),r["createElement"]("path",{d:"M51.476 289.793s2.097 1.169 6.633 1.169c6.083 0 8.249-1.65 8.249-1.65s.602 1.114-.619 2.165c-.993.855-3.597 1.591-7.39 1.546-4.145-.048-5.832-.566-6.736-1.168-.825-.55-.687-1.58-.137-2.062",fill:"#2B0849"}),r["createElement"]("path",{d:"M58.419 274.304s.033 1.519-.314 2.93c-.349 1.42-1.078 3.104-1.13 4.139-.058 1.151 4.537 1.58 5.155.034.62-1.547 1.294-6.427 1.913-7.252.619-.825-4.903-2.119-5.624.15",fill:"#A4AABA"}),r["createElement"]("path",{d:"M99.66 278.514l13.378.092s1.298-54.52 1.853-64.403c.554-9.882 3.776-43.364 1.002-63.128l-12.547-.644-22.849.78s-.434 3.966-1.195 9.976c-.063.496-.682.843-.749 1.365-.075.585.423 1.354.32 1.966-2.364 14.08-6.377 33.104-8.744 46.677-.116.666-1.234 1.009-1.458 2.691-.04.302.211 1.525.112 1.795-6.873 18.744-10.949 47.842-14.277 61.885l14.607-.014s2.197-8.57 4.03-16.97c2.811-12.886 23.111-85.01 23.111-85.01l3.016-.521 1.043 46.35s-.224 1.234.337 2.02c.56.785-.56 1.123-.392 2.244l.392 1.794s-.449 7.178-.898 11.89c-.448 4.71-.092 39.165-.092 39.165",fill:"#7BB2F9"}),r["createElement"]("path",{d:"M76.085 221.626c1.153.094 4.038-2.019 6.955-4.935M106.36 225.142s2.774-1.11 6.103-3.883",stroke:"#648BD8",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M107.275 222.1s2.773-1.11 6.102-3.884",stroke:"#648BD8",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M74.74 224.767s2.622-.591 6.505-3.365M86.03 151.634c-.27 3.106.3 8.525-4.336 9.123M103.625 149.88s.11 14.012-1.293 15.065c-2.219 1.664-2.99 1.944-2.99 1.944M99.79 150.438s.035 12.88-1.196 24.377M93.673 175.911s7.212-1.664 9.431-1.664M74.31 205.861a212.013 212.013 0 0 1-.979 4.56s-1.458 1.832-1.009 3.776c.449 1.944-.947 2.045-4.985 15.355-1.696 5.59-4.49 18.591-6.348 27.597l-.231 1.12M75.689 197.807a320.934 320.934 0 0 1-.882 4.754M82.591 152.233L81.395 162.7s-1.097.15-.5 2.244c.113 1.346-2.674 15.775-5.18 30.43M56.12 274.418h13.31",stroke:"#648BD8",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M116.241 148.22s-17.047-3.104-35.893.2c.158 2.514-.003 4.15-.003 4.15s14.687-2.818 35.67-.312c.252-2.355.226-4.038.226-4.038",fill:"#192064"}),r["createElement"]("path",{d:"M106.322 151.165l.003-4.911a.81.81 0 0 0-.778-.815c-2.44-.091-5.066-.108-7.836-.014a.818.818 0 0 0-.789.815l-.003 4.906a.81.81 0 0 0 .831.813c2.385-.06 4.973-.064 7.73.017a.815.815 0 0 0 .842-.81",fill:"#FFF"}),r["createElement"]("path",{d:"M105.207 150.233l.002-3.076a.642.642 0 0 0-.619-.646 94.321 94.321 0 0 0-5.866-.01.65.65 0 0 0-.63.647v3.072a.64.64 0 0 0 .654.644 121.12 121.12 0 0 1 5.794.011c.362.01.665-.28.665-.642",fill:"#192064"}),r["createElement"]("path",{d:"M100.263 275.415h12.338M101.436 270.53c.006 3.387.042 5.79.111 6.506M101.451 264.548a915.75 915.75 0 0 0-.015 4.337M100.986 174.965l.898 44.642s.673 1.57-.225 2.692c-.897 1.122 2.468.673.898 2.243-1.57 1.57.897 1.122 0 3.365-.596 1.489-.994 21.1-1.096 35.146",stroke:"#648BD8",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M46.876 83.427s-.516 6.045 7.223 5.552c11.2-.712 9.218-9.345 31.54-21.655-.786-2.708-2.447-4.744-2.447-4.744s-11.068 3.11-22.584 8.046c-6.766 2.9-13.395 6.352-13.732 12.801M104.46 91.057l.941-5.372-8.884-11.43-5.037 5.372-1.74 7.834a.321.321 0 0 0 .108.32c.965.8 6.5 5.013 14.347 3.544a.332.332 0 0 0 .264-.268",fill:"#FFC6A0"}),r["createElement"]("path",{d:"M93.942 79.387s-4.533-2.853-2.432-6.855c1.623-3.09 4.513 1.133 4.513 1.133s.52-3.642 3.121-3.642c.52-1.04 1.561-4.162 1.561-4.162s11.445 2.601 13.526 3.121c0 5.203-2.304 19.424-7.84 19.861-8.892.703-12.449-9.456-12.449-9.456",fill:"#FFC6A0"}),r["createElement"]("path",{d:"M113.874 73.446c2.601-2.081 3.47-9.722 3.47-9.722s-2.479-.49-6.64-2.05c-4.683-2.081-12.798-4.747-17.48.976-9.668 3.223-2.05 19.823-2.05 19.823l2.713-3.021s-3.935-3.287-2.08-6.243c2.17-3.462 3.92 1.073 3.92 1.073s.637-2.387 3.581-3.342c.355-.71 1.036-2.674 1.432-3.85a1.073 1.073 0 0 1 1.263-.704c2.4.558 8.677 2.019 11.356 2.662.522.125.871.615.82 1.15l-.305 3.248z",fill:"#520038"}),r["createElement"]("path",{d:"M104.977 76.064c-.103.61-.582 1.038-1.07.956-.489-.083-.801-.644-.698-1.254.103-.61.582-1.038 1.07-.956.488.082.8.644.698 1.254M112.132 77.694c-.103.61-.582 1.038-1.07.956-.488-.083-.8-.644-.698-1.254.103-.61.582-1.038 1.07-.956.488.082.8.643.698 1.254",fill:"#552950"}),r["createElement"]("path",{stroke:"#DB836E",strokeWidth:"1.118",strokeLinecap:"round",strokeLinejoin:"round",d:"M110.13 74.84l-.896 1.61-.298 4.357h-2.228"}),r["createElement"]("path",{d:"M110.846 74.481s1.79-.716 2.506.537",stroke:"#5C2552",strokeWidth:"1.118",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M92.386 74.282s.477-1.114 1.113-.716c.637.398 1.274 1.433.558 1.99-.717.556.159 1.67.159 1.67",stroke:"#DB836E",strokeWidth:"1.118",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M103.287 72.93s1.83 1.113 4.137.954",stroke:"#5C2552",strokeWidth:"1.118",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M103.685 81.762s2.227 1.193 4.376 1.193M104.64 84.308s.954.398 1.511.318M94.693 81.205s2.308 7.4 10.424 7.639",stroke:"#DB836E",strokeWidth:"1.118",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M81.45 89.384s.45 5.647-4.935 12.787M69 82.654s-.726 9.282-8.204 14.206",stroke:"#E4EBF7",strokeWidth:"1.101",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M129.405 122.865s-5.272 7.403-9.422 10.768",stroke:"#E4EBF7",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M119.306 107.329s.452 4.366-2.127 32.062",stroke:"#E4EBF7",strokeWidth:"1.101",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M150.028 151.232h-49.837a1.01 1.01 0 0 1-1.01-1.01v-31.688c0-.557.452-1.01 1.01-1.01h49.837c.558 0 1.01.453 1.01 1.01v31.688a1.01 1.01 0 0 1-1.01 1.01",fill:"#F2D7AD"}),r["createElement"]("path",{d:"M150.29 151.232h-19.863v-33.707h20.784v32.786a.92.92 0 0 1-.92.92",fill:"#F4D19D"}),r["createElement"]("path",{d:"M123.554 127.896H92.917a.518.518 0 0 1-.425-.816l6.38-9.113c.193-.277.51-.442.85-.442h31.092l-7.26 10.371z",fill:"#F2D7AD"}),r["createElement"]("path",{fill:"#CC9B6E",d:"M123.689 128.447H99.25v-.519h24.169l7.183-10.26.424.298z"}),r["createElement"]("path",{d:"M158.298 127.896h-18.669a2.073 2.073 0 0 1-1.659-.83l-7.156-9.541h19.965c.49 0 .95.23 1.244.622l6.69 8.92a.519.519 0 0 1-.415.83",fill:"#F4D19D"}),r["createElement"]("path",{fill:"#CC9B6E",d:"M157.847 128.479h-19.384l-7.857-10.475.415-.31 7.7 10.266h19.126zM130.554 150.685l-.032-8.177.519-.002.032 8.177z"}),r["createElement"]("path",{fill:"#CC9B6E",d:"M130.511 139.783l-.08-21.414.519-.002.08 21.414zM111.876 140.932l-.498-.143 1.479-5.167.498.143zM108.437 141.06l-2.679-2.935 2.665-3.434.41.318-2.397 3.089 2.384 2.612zM116.607 141.06l-.383-.35 2.383-2.612-2.397-3.089.41-.318 2.665 3.434z"}),r["createElement"]("path",{d:"M154.316 131.892l-3.114-1.96.038 3.514-1.043.092c-1.682.115-3.634.23-4.789.23-1.902 0-2.693 2.258 2.23 2.648l-2.645-.596s-2.168 1.317.504 2.3c0 0-1.58 1.217.561 2.58-.584 3.504 5.247 4.058 7.122 3.59 1.876-.47 4.233-2.359 4.487-5.16.28-3.085-.89-5.432-3.35-7.238",fill:"#FFC6A0"}),r["createElement"]("path",{d:"M153.686 133.577s-6.522.47-8.36.372c-1.836-.098-1.904 2.19 2.359 2.264 3.739.15 5.451-.044 5.451-.044",stroke:"#DB836E",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M145.16 135.877c-1.85 1.346.561 2.355.561 2.355s3.478.898 6.73.617",stroke:"#DB836E",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M151.89 141.71s-6.28.111-6.73-2.132c-.223-1.346.45-1.402.45-1.402M146.114 140.868s-1.103 3.16 5.44 3.533M151.202 129.932v3.477M52.838 89.286c3.533-.337 8.423-1.248 13.582-7.754",stroke:"#DB836E",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M168.567 248.318a6.647 6.647 0 0 1-6.647-6.647v-66.466a6.647 6.647 0 1 1 13.294 0v66.466a6.647 6.647 0 0 1-6.647 6.647",fill:"#5BA02E"}),r["createElement"]("path",{d:"M176.543 247.653a6.647 6.647 0 0 1-6.646-6.647v-33.232a6.647 6.647 0 1 1 13.293 0v33.232a6.647 6.647 0 0 1-6.647 6.647",fill:"#92C110"}),r["createElement"]("path",{d:"M186.443 293.613H158.92a3.187 3.187 0 0 1-3.187-3.187v-46.134a3.187 3.187 0 0 1 3.187-3.187h27.524a3.187 3.187 0 0 1 3.187 3.187v46.134a3.187 3.187 0 0 1-3.187 3.187",fill:"#F2D7AD"}),r["createElement"]("path",{d:"M88.979 89.48s7.776 5.384 16.6 2.842",stroke:"#E4EBF7",strokeWidth:"1.101",strokeLinecap:"round",strokeLinejoin:"round"})))},f=h,p=function(){return r["createElement"]("svg",{width:"254",height:"294"},r["createElement"]("defs",null,r["createElement"]("path",{d:"M0 .335h253.49v253.49H0z"}),r["createElement"]("path",{d:"M0 293.665h253.49V.401H0z"})),r["createElement"]("g",{fill:"none",fillRule:"evenodd"},r["createElement"]("g",{transform:"translate(0 .067)"},r["createElement"]("mask",{fill:"#fff"}),r["createElement"]("path",{d:"M0 128.134v-2.11C0 56.608 56.273.334 125.69.334h2.11c69.416 0 125.69 56.274 125.69 125.69v2.11c0 69.417-56.274 125.69-125.69 125.69h-2.11C56.273 253.824 0 197.551 0 128.134",fill:"#E4EBF7",mask:"url(#b)"})),r["createElement"]("path",{d:"M39.989 132.108a8.332 8.332 0 1 1-16.581-1.671 8.332 8.332 0 0 1 16.58 1.671",fill:"#FFF"}),r["createElement"]("path",{d:"M37.19 135.59l10.553 5.983M48.665 147.884l-12.734 10.861",stroke:"#FFF",strokeWidth:"2"}),r["createElement"]("path",{d:"M40.11 160.816a5.706 5.706 0 1 1-11.354-1.145 5.706 5.706 0 0 1 11.354 1.145M57.943 144.6a5.747 5.747 0 1 1-11.436-1.152 5.747 5.747 0 0 1 11.436 1.153M99.656 27.434l30.024-.013a4.619 4.619 0 1 0-.004-9.238l-30.024.013a4.62 4.62 0 0 0 .004 9.238M111.14 45.896l30.023-.013a4.62 4.62 0 1 0-.004-9.238l-30.024.013a4.619 4.619 0 1 0 .004 9.238",fill:"#FFF"}),r["createElement"]("path",{d:"M113.53 27.421v-.002l15.89-.007a4.619 4.619 0 1 0 .005 9.238l-15.892.007v-.002a4.618 4.618 0 0 0-.004-9.234M150.167 70.091h-3.979a4.789 4.789 0 0 1-4.774-4.775 4.788 4.788 0 0 1 4.774-4.774h3.979a4.789 4.789 0 0 1 4.775 4.774 4.789 4.789 0 0 1-4.775 4.775",fill:"#FFF"}),r["createElement"]("path",{d:"M171.687 30.234c0-16.392 13.289-29.68 29.681-29.68 16.392 0 29.68 13.288 29.68 29.68 0 16.393-13.288 29.681-29.68 29.681s-29.68-13.288-29.68-29.68",fill:"#FF603B"}),r["createElement"]("path",{d:"M203.557 19.435l-.676 15.035a1.514 1.514 0 0 1-3.026 0l-.675-15.035a2.19 2.19 0 1 1 4.377 0m-.264 19.378c.513.477.77 1.1.77 1.87s-.257 1.393-.77 1.907c-.55.476-1.21.733-1.943.733a2.545 2.545 0 0 1-1.87-.77c-.55-.514-.806-1.136-.806-1.87 0-.77.256-1.393.806-1.87.513-.513 1.137-.733 1.87-.733.77 0 1.43.22 1.943.733",fill:"#FFF"}),r["createElement"]("path",{d:"M119.3 133.275c4.426-.598 3.612-1.204 4.079-4.778.675-5.18-3.108-16.935-8.262-25.118-1.088-10.72-12.598-11.24-12.598-11.24s4.312 4.895 4.196 16.199c1.398 5.243.804 14.45.804 14.45s5.255 11.369 11.78 10.487",fill:"#FFB594"}),r["createElement"]("path",{d:"M100.944 91.61s1.463-.583 3.211.582c8.08 1.398 10.368 6.706 11.3 11.368 1.864 1.282 1.864 2.33 1.864 3.496.365.777 1.515 3.03 1.515 3.03s-7.225 1.748-10.954 6.758c-1.399-6.41-6.936-25.235-6.936-25.235",fill:"#FFF"}),r["createElement"]("path",{d:"M94.008 90.5l1.019-5.815-9.23-11.874-5.233 5.581-2.593 9.863s8.39 5.128 16.037 2.246",fill:"#FFB594"}),r["createElement"]("path",{d:"M82.931 78.216s-4.557-2.868-2.445-6.892c1.632-3.107 4.537 1.139 4.537 1.139s.524-3.662 3.139-3.662c.523-1.046 1.569-4.184 1.569-4.184s11.507 2.615 13.6 3.138c-.001 5.23-2.317 19.529-7.884 19.969-8.94.706-12.516-9.508-12.516-9.508",fill:"#FFC6A0"}),r["createElement"]("path",{d:"M102.971 72.243c2.616-2.093 3.489-9.775 3.489-9.775s-2.492-.492-6.676-2.062c-4.708-2.092-12.867-4.771-17.575.982-9.54 4.41-2.062 19.93-2.062 19.93l2.729-3.037s-3.956-3.304-2.092-6.277c2.183-3.48 3.943 1.08 3.943 1.08s.64-2.4 3.6-3.36c.356-.714 1.04-2.69 1.44-3.872a1.08 1.08 0 0 1 1.27-.707c2.41.56 8.723 2.03 11.417 2.676.524.126.876.619.825 1.156l-.308 3.266z",fill:"#520038"}),r["createElement"]("path",{d:"M101.22 76.514c-.104.613-.585 1.044-1.076.96-.49-.082-.805-.646-.702-1.26.104-.613.585-1.044 1.076-.961.491.083.805.647.702 1.26M94.26 75.074c-.104.613-.585 1.044-1.076.96-.49-.082-.805-.646-.702-1.26.104-.613.585-1.044 1.076-.96.491.082.805.646.702 1.26",fill:"#552950"}),r["createElement"]("path",{stroke:"#DB836E",strokeWidth:"1.063",strokeLinecap:"round",strokeLinejoin:"round",d:"M99.206 73.644l-.9 1.62-.3 4.38h-2.24"}),r["createElement"]("path",{d:"M99.926 73.284s1.8-.72 2.52.54",stroke:"#5C2552",strokeWidth:"1.117",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M81.367 73.084s.48-1.12 1.12-.72c.64.4 1.28 1.44.56 2s.16 1.68.16 1.68",stroke:"#DB836E",strokeWidth:"1.117",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M92.326 71.724s1.84 1.12 4.16.96",stroke:"#5C2552",strokeWidth:"1.117",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M92.726 80.604s2.24 1.2 4.4 1.2M93.686 83.164s.96.4 1.52.32M83.687 80.044s1.786 6.547 9.262 7.954",stroke:"#DB836E",strokeWidth:"1.063",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M95.548 91.663s-1.068 2.821-8.298 2.105c-7.23-.717-10.29-5.044-10.29-5.044",stroke:"#E4EBF7",strokeWidth:"1.136",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M78.126 87.478s6.526 4.972 16.47 2.486c0 0 9.577 1.02 11.536 5.322 5.36 11.77.543 36.835 0 39.962 3.496 4.055-.466 8.483-.466 8.483-15.624-3.548-35.81-.6-35.81-.6-4.849-3.546-1.223-9.044-1.223-9.044L62.38 110.32c-2.485-15.227.833-19.803 3.549-20.743 3.03-1.049 8.04-1.282 8.04-1.282.496-.058 1.08-.076 1.37-.233 2.36-1.282 2.787-.583 2.787-.583",fill:"#FFF"}),r["createElement"]("path",{d:"M65.828 89.81s-6.875.465-7.59 8.156c-.466 8.857 3.03 10.954 3.03 10.954s6.075 22.102 16.796 22.957c8.39-2.176 4.758-6.702 4.661-11.42-.233-11.304-7.108-16.897-7.108-16.897s-4.212-13.75-9.789-13.75",fill:"#FFC6A0"}),r["createElement"]("path",{d:"M71.716 124.225s.855 11.264 9.828 6.486c4.765-2.536 7.581-13.828 9.789-22.568 1.456-5.768 2.58-12.197 2.58-12.197l-4.973-1.709s-2.408 5.516-7.769 12.275c-4.335 5.467-9.144 11.11-9.455 17.713",fill:"#FFC6A0"}),r["createElement"]("path",{d:"M108.463 105.191s1.747 2.724-2.331 30.535c2.376 2.216 1.053 6.012-.233 7.51",stroke:"#E4EBF7",strokeWidth:"1.085",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M123.262 131.527s-.427 2.732-11.77 1.981c-15.187-1.006-25.326-3.25-25.326-3.25l.933-5.8s.723.215 9.71-.068c11.887-.373 18.714-6.07 24.964-1.022 4.039 3.263 1.489 8.16 1.489 8.16",fill:"#FFC6A0"}),r["createElement"]("path",{d:"M70.24 90.974s-5.593-4.739-11.054 2.68c-3.318 7.223.517 15.284 2.664 19.578-.31 3.729 2.33 4.311 2.33 4.311s.108.895 1.516 2.68c4.078-7.03 6.72-9.166 13.711-12.546-.328-.656-1.877-3.265-1.825-3.767.175-1.69-1.282-2.623-1.282-2.623s-.286-.156-1.165-2.738c-.788-2.313-2.036-5.177-4.895-7.575",fill:"#FFF"}),r["createElement"]("path",{d:"M90.232 288.027s4.855 2.308 8.313 1.155c3.188-1.063 5.12.755 8.002 1.331 2.881.577 7.769 1.243 13.207-1.424-.117-6.228-7.786-4.499-13.518-7.588-2.895-1.56-4.276-5.336-4.066-9.944H91.544s-1.573 11.89-1.312 16.47",fill:"#CBD1D1"}),r["createElement"]("path",{d:"M90.207 287.833s2.745 1.437 7.639.738c3.456-.494 3.223.66 7.418 1.282 4.195.621 13.092-.194 14.334-1.126.466 1.242-.388 2.33-.388 2.33s-1.709.682-5.438.932c-2.295.154-8.098.276-10.14-.621-2.02-1.554-4.894-1.515-6.06-.234-4.427 1.075-7.184-.31-7.184-.31l-.181-2.991z",fill:"#2B0849"}),r["createElement"]("path",{d:"M98.429 272.257h3.496s-.117 7.574 5.127 9.671c-5.244.7-9.672-2.602-8.623-9.671",fill:"#A4AABA"}),r["createElement"]("path",{d:"M44.425 272.046s-2.208 7.774-4.702 12.899c-1.884 3.874-4.428 7.854 5.729 7.854 6.97 0 9.385-.503 7.782-6.917-1.604-6.415.279-13.836.279-13.836h-9.088z",fill:"#CBD1D1"}),r["createElement"]("path",{d:"M38.066 290.277s2.198 1.225 6.954 1.225c6.376 0 8.646-1.73 8.646-1.73s.63 1.168-.649 2.27c-1.04.897-3.77 1.668-7.745 1.621-4.347-.05-6.115-.593-7.062-1.224-.864-.577-.72-1.657-.144-2.162",fill:"#2B0849"}),r["createElement"]("path",{d:"M45.344 274.041s.035 1.592-.329 3.07c-.365 1.49-1.13 3.255-1.184 4.34-.061 1.206 4.755 1.657 5.403.036.65-1.622 1.357-6.737 2.006-7.602.648-.865-5.14-2.222-5.896.156",fill:"#A4AABA"}),r["createElement"]("path",{d:"M89.476 277.57l13.899.095s1.349-56.643 1.925-66.909c.576-10.267 3.923-45.052 1.042-65.585l-13.037-.669-23.737.81s-.452 4.12-1.243 10.365c-.065.515-.708.874-.777 1.417-.078.608.439 1.407.332 2.044-2.455 14.627-5.797 32.736-8.256 46.837-.121.693-1.282 1.048-1.515 2.796-.042.314.22 1.584.116 1.865-7.14 19.473-12.202 52.601-15.66 67.19l15.176-.015s2.282-10.145 4.185-18.871c2.922-13.389 24.012-88.32 24.012-88.32l3.133-.954-.158 48.568s-.233 1.282.35 2.098c.583.815-.581 1.167-.408 2.331l.408 1.864s-.466 7.458-.932 12.352c-.467 4.895 1.145 40.69 1.145 40.69",fill:"#7BB2F9"}),r["createElement"]("path",{d:"M64.57 218.881c1.197.099 4.195-2.097 7.225-5.127M96.024 222.534s2.881-1.152 6.34-4.034",stroke:"#648BD8",strokeWidth:"1.085",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M96.973 219.373s2.882-1.153 6.34-4.034",stroke:"#648BD8",strokeWidth:"1.032",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M63.172 222.144s2.724-.614 6.759-3.496M74.903 146.166c-.281 3.226.31 8.856-4.506 9.478M93.182 144.344s.115 14.557-1.344 15.65c-2.305 1.73-3.107 2.02-3.107 2.02M89.197 144.923s.269 13.144-1.01 25.088M83.525 170.71s6.81-1.051 9.116-1.051M46.026 270.045l-.892 4.538M46.937 263.289l-.815 4.157M62.725 202.503c-.33 1.618-.102 1.904-.449 3.438 0 0-2.756 1.903-2.29 3.923.466 2.02-.31 3.424-4.505 17.252-1.762 5.807-4.233 18.922-6.165 28.278-.03.144-.521 2.646-1.14 5.8M64.158 194.136c-.295 1.658-.6 3.31-.917 4.938M71.33 146.787l-1.244 10.877s-1.14.155-.519 2.33c.117 1.399-2.778 16.39-5.382 31.615M44.242 273.727H58.07",stroke:"#648BD8",strokeWidth:"1.085",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M106.18 142.117c-3.028-.489-18.825-2.744-36.219.2a.625.625 0 0 0-.518.644c.063 1.307.044 2.343.015 2.995a.617.617 0 0 0 .716.636c3.303-.534 17.037-2.412 35.664-.266.347.04.66-.214.692-.56.124-1.347.16-2.425.17-3.029a.616.616 0 0 0-.52-.62",fill:"#192064"}),r["createElement"]("path",{d:"M96.398 145.264l.003-5.102a.843.843 0 0 0-.809-.847 114.104 114.104 0 0 0-8.141-.014.85.85 0 0 0-.82.847l-.003 5.097c0 .476.388.857.864.845 2.478-.064 5.166-.067 8.03.017a.848.848 0 0 0 .876-.843",fill:"#FFF"}),r["createElement"]("path",{d:"M95.239 144.296l.002-3.195a.667.667 0 0 0-.643-.672c-1.9-.061-3.941-.073-6.094-.01a.675.675 0 0 0-.654.672l-.002 3.192c0 .376.305.677.68.669 1.859-.042 3.874-.043 6.02.012.376.01.69-.291.691-.668",fill:"#192064"}),r["createElement"]("path",{d:"M90.102 273.522h12.819M91.216 269.761c.006 3.519-.072 5.55 0 6.292M90.923 263.474c-.009 1.599-.016 2.558-.016 4.505M90.44 170.404l.932 46.38s.7 1.631-.233 2.796c-.932 1.166 2.564.7.932 2.33-1.63 1.633.933 1.166 0 3.497-.618 1.546-1.031 21.921-1.138 36.513",stroke:"#648BD8",strokeWidth:"1.085",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M73.736 98.665l2.214 4.312s2.098.816 1.865 2.68l.816 2.214M64.297 116.611c.233-.932 2.176-7.147 12.585-10.488M77.598 90.042s7.691 6.137 16.547 2.72",stroke:"#E4EBF7",strokeWidth:"1.085",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M91.974 86.954s5.476-.816 7.574-4.545c1.297-.345.72 2.212-.33 3.671-.7.971-1.01 1.554-1.01 1.554s.194.31.155.816c-.053.697-.175.653-.272 1.048-.081.335.108.657 0 1.049-.046.17-.198.5-.382.878-.12.249-.072.687-.2.948-.231.469-1.562 1.87-2.622 2.855-3.826 3.554-5.018 1.644-6.001-.408-.894-1.865-.661-5.127-.874-6.875-.35-2.914-2.622-3.03-1.923-4.429.343-.685 2.87.69 3.263 1.748.757 2.04 2.952 1.807 2.622 1.69",fill:"#FFC6A0"}),r["createElement"]("path",{d:"M99.8 82.429c-.465.077-.35.272-.97 1.243-.622.971-4.817 2.932-6.39 3.224-2.589.48-2.278-1.56-4.254-2.855-1.69-1.107-3.562-.638-1.398 1.398.99.932.932 1.107 1.398 3.205.335 1.506-.64 3.67.7 5.593",stroke:"#DB836E",strokeWidth:".774",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M79.543 108.673c-2.1 2.926-4.266 6.175-5.557 8.762",stroke:"#E59788",strokeWidth:".774",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M87.72 124.768s-2.098-1.942-5.127-2.719c-3.03-.777-3.574-.155-5.516.078-1.942.233-3.885-.932-3.652.7.233 1.63 5.05 1.01 5.206 2.097.155 1.087-6.37 2.796-8.313 2.175-.777.777.466 1.864 2.02 2.175.233 1.554 2.253 1.554 2.253 1.554s.699 1.01 2.641 1.088c2.486 1.32 8.934-.7 10.954-1.554 2.02-.855-.466-5.594-.466-5.594",fill:"#FFC6A0"}),r["createElement"]("path",{d:"M73.425 122.826s.66 1.127 3.167 1.418c2.315.27 2.563.583 2.563.583s-2.545 2.894-9.07 2.272M72.416 129.274s3.826.097 4.933-.718M74.98 130.75s1.961.136 3.36-.505M77.232 131.916s1.748.019 2.914-.505M73.328 122.321s-.595-1.032 1.262-.427c1.671.544 2.833.055 5.128.155 1.389.061 3.067-.297 3.982.15 1.606.784 3.632 2.181 3.632 2.181s10.526 1.204 19.033-1.127M78.864 108.104s-8.39 2.758-13.168 12.12",stroke:"#E59788",strokeWidth:".774",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M109.278 112.533s3.38-3.613 7.575-4.662",stroke:"#E4EBF7",strokeWidth:"1.085",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M107.375 123.006s9.697-2.745 11.445-.88",stroke:"#E59788",strokeWidth:".774",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M194.605 83.656l3.971-3.886M187.166 90.933l3.736-3.655M191.752 84.207l-4.462-4.56M198.453 91.057l-4.133-4.225M129.256 163.074l3.718-3.718M122.291 170.039l3.498-3.498M126.561 163.626l-4.27-4.27M132.975 170.039l-3.955-3.955",stroke:"#BFCDDD",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M190.156 211.779h-1.604a4.023 4.023 0 0 1-4.011-4.011V175.68a4.023 4.023 0 0 1 4.01-4.01h1.605a4.023 4.023 0 0 1 4.011 4.01v32.088a4.023 4.023 0 0 1-4.01 4.01",fill:"#A3B4C6"}),r["createElement"]("path",{d:"M237.824 212.977a4.813 4.813 0 0 1-4.813 4.813h-86.636a4.813 4.813 0 0 1 0-9.626h86.636a4.813 4.813 0 0 1 4.813 4.813",fill:"#A3B4C6"}),r["createElement"]("mask",{fill:"#fff"}),r["createElement"]("path",{fill:"#A3B4C6",mask:"url(#d)",d:"M154.098 190.096h70.513v-84.617h-70.513z"}),r["createElement"]("path",{d:"M224.928 190.096H153.78a3.219 3.219 0 0 1-3.208-3.209V167.92a3.219 3.219 0 0 1 3.208-3.21h71.148a3.219 3.219 0 0 1 3.209 3.21v18.967a3.219 3.219 0 0 1-3.21 3.209M224.928 130.832H153.78a3.218 3.218 0 0 1-3.208-3.208v-18.968a3.219 3.219 0 0 1 3.208-3.209h71.148a3.219 3.219 0 0 1 3.209 3.21v18.967a3.218 3.218 0 0 1-3.21 3.208",fill:"#BFCDDD",mask:"url(#d)"}),r["createElement"]("path",{d:"M159.563 120.546a2.407 2.407 0 1 1 0-4.813 2.407 2.407 0 0 1 0 4.813M166.98 120.546a2.407 2.407 0 1 1 0-4.813 2.407 2.407 0 0 1 0 4.813M174.397 120.546a2.407 2.407 0 1 1 0-4.813 2.407 2.407 0 0 1 0 4.813M222.539 120.546h-22.461a.802.802 0 0 1-.802-.802v-3.208c0-.443.359-.803.802-.803h22.46c.444 0 .803.36.803.803v3.208c0 .443-.36.802-.802.802",fill:"#FFF",mask:"url(#d)"}),r["createElement"]("path",{d:"M224.928 160.464H153.78a3.218 3.218 0 0 1-3.208-3.209v-18.967a3.219 3.219 0 0 1 3.208-3.209h71.148a3.219 3.219 0 0 1 3.209 3.209v18.967a3.218 3.218 0 0 1-3.21 3.209",fill:"#BFCDDD",mask:"url(#d)"}),r["createElement"]("path",{d:"M173.455 130.832h49.301M164.984 130.832h6.089M155.952 130.832h6.75M173.837 160.613h49.3M165.365 160.613h6.089M155.57 160.613h6.751",stroke:"#7C90A5",strokeWidth:"1.124",strokeLinecap:"round",strokeLinejoin:"round",mask:"url(#d)"}),r["createElement"]("path",{d:"M159.563 151.038a2.407 2.407 0 1 1 0-4.814 2.407 2.407 0 0 1 0 4.814M166.98 151.038a2.407 2.407 0 1 1 0-4.814 2.407 2.407 0 0 1 0 4.814M174.397 151.038a2.407 2.407 0 1 1 .001-4.814 2.407 2.407 0 0 1 0 4.814M222.539 151.038h-22.461a.802.802 0 0 1-.802-.802v-3.209c0-.443.359-.802.802-.802h22.46c.444 0 .803.36.803.802v3.209c0 .443-.36.802-.802.802M159.563 179.987a2.407 2.407 0 1 1 0-4.813 2.407 2.407 0 0 1 0 4.813M166.98 179.987a2.407 2.407 0 1 1 0-4.813 2.407 2.407 0 0 1 0 4.813M174.397 179.987a2.407 2.407 0 1 1 0-4.813 2.407 2.407 0 0 1 0 4.813M222.539 179.987h-22.461a.802.802 0 0 1-.802-.802v-3.209c0-.443.359-.802.802-.802h22.46c.444 0 .803.36.803.802v3.209c0 .443-.36.802-.802.802",fill:"#FFF",mask:"url(#d)"}),r["createElement"]("path",{d:"M203.04 221.108h-27.372a2.413 2.413 0 0 1-2.406-2.407v-11.448a2.414 2.414 0 0 1 2.406-2.407h27.372a2.414 2.414 0 0 1 2.407 2.407V218.7a2.413 2.413 0 0 1-2.407 2.407",fill:"#BFCDDD",mask:"url(#d)"}),r["createElement"]("path",{d:"M177.259 207.217v11.52M201.05 207.217v11.52",stroke:"#A3B4C6",strokeWidth:"1.124",strokeLinecap:"round",strokeLinejoin:"round",mask:"url(#d)"}),r["createElement"]("path",{d:"M162.873 267.894a9.422 9.422 0 0 1-9.422-9.422v-14.82a9.423 9.423 0 0 1 18.845 0v14.82a9.423 9.423 0 0 1-9.423 9.422",fill:"#5BA02E",mask:"url(#d)"}),r["createElement"]("path",{d:"M171.22 267.83a9.422 9.422 0 0 1-9.422-9.423v-3.438a9.423 9.423 0 0 1 18.845 0v3.438a9.423 9.423 0 0 1-9.422 9.423",fill:"#92C110",mask:"url(#d)"}),r["createElement"]("path",{d:"M181.31 293.666h-27.712a3.209 3.209 0 0 1-3.209-3.21V269.79a3.209 3.209 0 0 1 3.209-3.21h27.711a3.209 3.209 0 0 1 3.209 3.21v20.668a3.209 3.209 0 0 1-3.209 3.209",fill:"#F2D7AD",mask:"url(#d)"})))},m=p,g=function(){return r["createElement"]("svg",{width:"251",height:"294"},r["createElement"]("g",{fill:"none",fillRule:"evenodd"},r["createElement"]("path",{d:"M0 129.023v-2.084C0 58.364 55.591 2.774 124.165 2.774h2.085c68.574 0 124.165 55.59 124.165 124.165v2.084c0 68.575-55.59 124.166-124.165 124.166h-2.085C55.591 253.189 0 197.598 0 129.023",fill:"#E4EBF7"}),r["createElement"]("path",{d:"M41.417 132.92a8.231 8.231 0 1 1-16.38-1.65 8.231 8.231 0 0 1 16.38 1.65",fill:"#FFF"}),r["createElement"]("path",{d:"M38.652 136.36l10.425 5.91M49.989 148.505l-12.58 10.73",stroke:"#FFF",strokeWidth:"2"}),r["createElement"]("path",{d:"M41.536 161.28a5.636 5.636 0 1 1-11.216-1.13 5.636 5.636 0 0 1 11.216 1.13M59.154 145.261a5.677 5.677 0 1 1-11.297-1.138 5.677 5.677 0 0 1 11.297 1.138M100.36 29.516l29.66-.013a4.562 4.562 0 1 0-.004-9.126l-29.66.013a4.563 4.563 0 0 0 .005 9.126M111.705 47.754l29.659-.013a4.563 4.563 0 1 0-.004-9.126l-29.66.013a4.563 4.563 0 1 0 .005 9.126",fill:"#FFF"}),r["createElement"]("path",{d:"M114.066 29.503V29.5l15.698-.007a4.563 4.563 0 1 0 .004 9.126l-15.698.007v-.002a4.562 4.562 0 0 0-.004-9.122M185.405 137.723c-.55 5.455-5.418 9.432-10.873 8.882-5.456-.55-9.432-5.418-8.882-10.873.55-5.455 5.418-9.432 10.873-8.882 5.455.55 9.432 5.418 8.882 10.873",fill:"#FFF"}),r["createElement"]("path",{d:"M180.17 143.772l12.572 7.129M193.841 158.42L178.67 171.36",stroke:"#FFF",strokeWidth:"2"}),r["createElement"]("path",{d:"M185.55 171.926a6.798 6.798 0 1 1-13.528-1.363 6.798 6.798 0 0 1 13.527 1.363M204.12 155.285a6.848 6.848 0 1 1-13.627-1.375 6.848 6.848 0 0 1 13.626 1.375",fill:"#FFF"}),r["createElement"]("path",{d:"M152.988 194.074a2.21 2.21 0 1 1-4.42 0 2.21 2.21 0 0 1 4.42 0zM225.931 118.217a2.21 2.21 0 1 1-4.421 0 2.21 2.21 0 0 1 4.421 0zM217.09 153.051a2.21 2.21 0 1 1-4.421 0 2.21 2.21 0 0 1 4.42 0zM177.84 109.842a2.21 2.21 0 1 1-4.422 0 2.21 2.21 0 0 1 4.421 0zM196.114 94.454a2.21 2.21 0 1 1-4.421 0 2.21 2.21 0 0 1 4.421 0zM202.844 182.523a2.21 2.21 0 1 1-4.42 0 2.21 2.21 0 0 1 4.42 0z",stroke:"#FFF",strokeWidth:"2"}),r["createElement"]("path",{stroke:"#FFF",strokeWidth:"2",d:"M215.125 155.262l-1.902 20.075-10.87 5.958M174.601 176.636l-6.322 9.761H156.98l-4.484 6.449M175.874 127.28V111.56M221.51 119.404l-12.77 7.859-15.228-7.86V96.668"}),r["createElement"]("path",{d:"M180.68 29.32C180.68 13.128 193.806 0 210 0c16.193 0 29.32 13.127 29.32 29.32 0 16.194-13.127 29.322-29.32 29.322-16.193 0-29.32-13.128-29.32-29.321",fill:"#A26EF4"}),r["createElement"]("path",{d:"M221.45 41.706l-21.563-.125a1.744 1.744 0 0 1-1.734-1.754l.071-12.23a1.744 1.744 0 0 1 1.754-1.734l21.562.125c.964.006 1.74.791 1.735 1.755l-.071 12.229a1.744 1.744 0 0 1-1.754 1.734",fill:"#FFF"}),r["createElement"]("path",{d:"M215.106 29.192c-.015 2.577-2.049 4.654-4.543 4.64-2.494-.014-4.504-2.115-4.489-4.693l.04-6.925c.016-2.577 2.05-4.654 4.543-4.64 2.494.015 4.504 2.116 4.49 4.693l-.04 6.925zm-4.53-14.074a6.877 6.877 0 0 0-6.916 6.837l-.043 7.368a6.877 6.877 0 0 0 13.754.08l.042-7.368a6.878 6.878 0 0 0-6.837-6.917zM167.566 68.367h-3.93a4.73 4.73 0 0 1-4.717-4.717 4.73 4.73 0 0 1 4.717-4.717h3.93a4.73 4.73 0 0 1 4.717 4.717 4.73 4.73 0 0 1-4.717 4.717",fill:"#FFF"}),r["createElement"]("path",{d:"M168.214 248.838a6.611 6.611 0 0 1-6.61-6.611v-66.108a6.611 6.611 0 0 1 13.221 0v66.108a6.611 6.611 0 0 1-6.61 6.61",fill:"#5BA02E"}),r["createElement"]("path",{d:"M176.147 248.176a6.611 6.611 0 0 1-6.61-6.61v-33.054a6.611 6.611 0 1 1 13.221 0v33.053a6.611 6.611 0 0 1-6.61 6.611",fill:"#92C110"}),r["createElement"]("path",{d:"M185.994 293.89h-27.376a3.17 3.17 0 0 1-3.17-3.17v-45.887a3.17 3.17 0 0 1 3.17-3.17h27.376a3.17 3.17 0 0 1 3.17 3.17v45.886a3.17 3.17 0 0 1-3.17 3.17",fill:"#F2D7AD"}),r["createElement"]("path",{d:"M81.972 147.673s6.377-.927 17.566-1.28c11.729-.371 17.57 1.086 17.57 1.086s3.697-3.855.968-8.424c1.278-12.077 5.982-32.827.335-48.273-1.116-1.339-3.743-1.512-7.536-.62-1.337.315-7.147-.149-7.983-.1l-15.311-.347s-3.487-.17-8.035-.508c-1.512-.113-4.227-1.683-5.458-.338-.406.443-2.425 5.669-1.97 16.077l8.635 35.642s-3.141 3.61 1.219 7.085",fill:"#FFF"}),r["createElement"]("path",{d:"M75.768 73.325l-.9-6.397 11.982-6.52s7.302-.118 8.038 1.205c.737 1.324-5.616.993-5.616.993s-1.836 1.388-2.615 2.5c-1.654 2.363-.986 6.471-8.318 5.986-1.708.284-2.57 2.233-2.57 2.233",fill:"#FFC6A0"}),r["createElement"]("path",{d:"M52.44 77.672s14.217 9.406 24.973 14.444c1.061.497-2.094 16.183-11.892 11.811-7.436-3.318-20.162-8.44-21.482-14.496-.71-3.258 2.543-7.643 8.401-11.76M141.862 80.113s-6.693 2.999-13.844 6.876c-3.894 2.11-10.137 4.704-12.33 7.988-6.224 9.314 3.536 11.22 12.947 7.503 6.71-2.651 28.999-12.127 13.227-22.367",fill:"#FFB594"}),r["createElement"]("path",{d:"M76.166 66.36l3.06 3.881s-2.783 2.67-6.31 5.747c-7.103 6.195-12.803 14.296-15.995 16.44-3.966 2.662-9.754 3.314-12.177-.118-3.553-5.032.464-14.628 31.422-25.95",fill:"#FFC6A0"}),r["createElement"]("path",{d:"M64.674 85.116s-2.34 8.413-8.912 14.447c.652.548 18.586 10.51 22.144 10.056 5.238-.669 6.417-18.968 1.145-20.531-.702-.208-5.901-1.286-8.853-2.167-.87-.26-1.611-1.71-3.545-.936l-1.98-.869zM128.362 85.826s5.318 1.956 7.325 13.734c-.546.274-17.55 12.35-21.829 7.805-6.534-6.94-.766-17.393 4.275-18.61 4.646-1.121 5.03-1.37 10.23-2.929",fill:"#FFF"}),r["createElement"]("path",{d:"M78.18 94.656s.911 7.41-4.914 13.078",stroke:"#E4EBF7",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M87.397 94.68s3.124 2.572 10.263 2.572c7.14 0 9.074-3.437 9.074-3.437",stroke:"#E4EBF7",strokeWidth:".932",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M117.184 68.639l-6.781-6.177s-5.355-4.314-9.223-.893c-3.867 3.422 4.463 2.083 5.653 4.165 1.19 2.082.848 1.143-2.083.446-5.603-1.331-2.082.893 2.975 5.355 2.091 1.845 6.992.955 6.992.955l2.467-3.851z",fill:"#FFC6A0"}),r["createElement"]("path",{d:"M105.282 91.315l-.297-10.937-15.918-.027-.53 10.45c-.026.403.17.788.515.999 2.049 1.251 9.387 5.093 15.799.424.287-.21.443-.554.431-.91",fill:"#FFB594"}),r["createElement"]("path",{d:"M107.573 74.24c.817-1.147.982-9.118 1.015-11.928a1.046 1.046 0 0 0-.965-1.055l-4.62-.365c-7.71-1.044-17.071.624-18.253 6.346-5.482 5.813-.421 13.244-.421 13.244s1.963 3.566 4.305 6.791c.756 1.041.398-3.731 3.04-5.929 5.524-4.594 15.899-7.103 15.899-7.103",fill:"#5C2552"}),r["createElement"]("path",{d:"M88.426 83.206s2.685 6.202 11.602 6.522c7.82.28 8.973-7.008 7.434-17.505l-.909-5.483c-6.118-2.897-15.478.54-15.478.54s-.576 2.044-.19 5.504c-2.276 2.066-1.824 5.618-1.824 5.618s-.905-1.922-1.98-2.321c-.86-.32-1.897.089-2.322 1.98-1.04 4.632 3.667 5.145 3.667 5.145",fill:"#FFC6A0"}),r["createElement"]("path",{stroke:"#DB836E",strokeWidth:"1.145",strokeLinecap:"round",strokeLinejoin:"round",d:"M100.843 77.099l1.701-.928-1.015-4.324.674-1.406"}),r["createElement"]("path",{d:"M105.546 74.092c-.022.713-.452 1.279-.96 1.263-.51-.016-.904-.607-.882-1.32.021-.713.452-1.278.96-1.263.51.016.904.607.882 1.32M97.592 74.349c-.022.713-.452 1.278-.961 1.263-.509-.016-.904-.607-.882-1.32.022-.713.452-1.279.961-1.263.51.016.904.606.882 1.32",fill:"#552950"}),r["createElement"]("path",{d:"M91.132 86.786s5.269 4.957 12.679 2.327",stroke:"#DB836E",strokeWidth:"1.145",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M99.776 81.903s-3.592.232-1.44-2.79c1.59-1.496 4.897-.46 4.897-.46s1.156 3.906-3.457 3.25",fill:"#DB836E"}),r["createElement"]("path",{d:"M102.88 70.6s2.483.84 3.402.715M93.883 71.975s2.492-1.144 4.778-1.073",stroke:"#5C2552",strokeWidth:"1.526",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M86.32 77.374s.961.879 1.458 2.106c-.377.48-1.033 1.152-.236 1.809M99.337 83.719s1.911.151 2.509-.254",stroke:"#DB836E",strokeWidth:"1.145",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M87.782 115.821l15.73-3.012M100.165 115.821l10.04-2.008",stroke:"#E4EBF7",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M66.508 86.763s-1.598 8.83-6.697 14.078",stroke:"#E4EBF7",strokeWidth:"1.114",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M128.31 87.934s3.013 4.121 4.06 11.785",stroke:"#E4EBF7",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M64.09 84.816s-6.03 9.912-13.607 9.903",stroke:"#DB836E",strokeWidth:".795",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M112.366 65.909l-.142 5.32s5.993 4.472 11.945 9.202c4.482 3.562 8.888 7.455 10.985 8.662 4.804 2.766 8.9 3.355 11.076 1.808 4.071-2.894 4.373-9.878-8.136-15.263-4.271-1.838-16.144-6.36-25.728-9.73",fill:"#FFC6A0"}),r["createElement"]("path",{d:"M130.532 85.488s4.588 5.757 11.619 6.214",stroke:"#DB836E",strokeWidth:".75",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M121.708 105.73s-.393 8.564-1.34 13.612",stroke:"#E4EBF7",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M115.784 161.512s-3.57-1.488-2.678-7.14",stroke:"#648BD8",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M101.52 290.246s4.326 2.057 7.408 1.03c2.842-.948 4.564.673 7.132 1.186 2.57.514 6.925 1.108 11.772-1.269-.104-5.551-6.939-4.01-12.048-6.763-2.582-1.39-3.812-4.757-3.625-8.863h-9.471s-1.402 10.596-1.169 14.68",fill:"#CBD1D1"}),r["createElement"]("path",{d:"M101.496 290.073s2.447 1.281 6.809.658c3.081-.44 3.74.485 7.479 1.039 3.739.554 10.802-.07 11.91-.9.415 1.108-.347 2.077-.347 2.077s-1.523.608-4.847.831c-2.045.137-5.843.293-7.663-.507-1.8-1.385-5.286-1.917-5.77-.243-3.947.958-7.41-.288-7.41-.288l-.16-2.667z",fill:"#2B0849"}),r["createElement"]("path",{d:"M108.824 276.19h3.116s-.103 6.751 4.57 8.62c-4.673.624-8.62-2.32-7.686-8.62",fill:"#A4AABA"}),r["createElement"]("path",{d:"M57.65 272.52s-2.122 7.47-4.518 12.396c-1.811 3.724-4.255 7.548 5.505 7.548 6.698 0 9.02-.483 7.479-6.648-1.541-6.164.268-13.296.268-13.296H57.65z",fill:"#CBD1D1"}),r["createElement"]("path",{d:"M51.54 290.04s2.111 1.178 6.682 1.178c6.128 0 8.31-1.662 8.31-1.662s.605 1.122-.624 2.18c-1 .862-3.624 1.603-7.444 1.559-4.177-.049-5.876-.57-6.786-1.177-.831-.554-.692-1.593-.138-2.078",fill:"#2B0849"}),r["createElement"]("path",{d:"M58.533 274.438s.034 1.529-.315 2.95c-.352 1.431-1.087 3.127-1.139 4.17-.058 1.16 4.57 1.592 5.194.035.623-1.559 1.303-6.475 1.927-7.306.622-.831-4.94-2.135-5.667.15",fill:"#A4AABA"}),r["createElement"]("path",{d:"M100.885 277.015l13.306.092s1.291-54.228 1.843-64.056c.552-9.828 3.756-43.13.997-62.788l-12.48-.64-22.725.776s-.433 3.944-1.19 9.921c-.062.493-.677.838-.744 1.358-.075.582.42 1.347.318 1.956-2.35 14.003-6.343 32.926-8.697 46.425-.116.663-1.227 1.004-1.45 2.677-.04.3.21 1.516.112 1.785-6.836 18.643-10.89 47.584-14.2 61.551l14.528-.014s2.185-8.524 4.008-16.878c2.796-12.817 22.987-84.553 22.987-84.553l3-.517 1.037 46.1s-.223 1.228.334 2.008c.558.782-.556 1.117-.39 2.233l.39 1.784s-.446 7.14-.892 11.826c-.446 4.685-.092 38.954-.092 38.954",fill:"#7BB2F9"}),r["createElement"]("path",{d:"M77.438 220.434c1.146.094 4.016-2.008 6.916-4.91M107.55 223.931s2.758-1.103 6.069-3.862",stroke:"#648BD8",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M108.459 220.905s2.759-1.104 6.07-3.863",stroke:"#648BD8",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M76.099 223.557s2.608-.587 6.47-3.346M87.33 150.82c-.27 3.088.297 8.478-4.315 9.073M104.829 149.075s.11 13.936-1.286 14.983c-2.207 1.655-2.975 1.934-2.975 1.934M101.014 149.63s.035 12.81-1.19 24.245M94.93 174.965s7.174-1.655 9.38-1.655M75.671 204.754c-.316 1.55-.64 3.067-.973 4.535 0 0-1.45 1.822-1.003 3.756.446 1.934-.943 2.034-4.96 15.273-1.686 5.559-4.464 18.49-6.313 27.447-.078.38-4.018 18.06-4.093 18.423M77.043 196.743a313.269 313.269 0 0 1-.877 4.729M83.908 151.414l-1.19 10.413s-1.091.148-.496 2.23c.111 1.34-2.66 15.692-5.153 30.267M57.58 272.94h13.238",stroke:"#648BD8",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),r["createElement"]("path",{d:"M117.377 147.423s-16.955-3.087-35.7.199c.157 2.501-.002 4.128-.002 4.128s14.607-2.802 35.476-.31c.251-2.342.226-4.017.226-4.017",fill:"#192064"}),r["createElement"]("path",{d:"M107.511 150.353l.004-4.885a.807.807 0 0 0-.774-.81c-2.428-.092-5.04-.108-7.795-.014a.814.814 0 0 0-.784.81l-.003 4.88c0 .456.371.82.827.808a140.76 140.76 0 0 1 7.688.017.81.81 0 0 0 .837-.806",fill:"#FFF"}),r["createElement"]("path",{d:"M106.402 149.426l.002-3.06a.64.64 0 0 0-.616-.643 94.135 94.135 0 0 0-5.834-.009.647.647 0 0 0-.626.643l-.001 3.056c0 .36.291.648.651.64 1.78-.04 3.708-.041 5.762.012.36.009.662-.279.662-.64",fill:"#192064"}),r["createElement"]("path",{d:"M101.485 273.933h12.272M102.652 269.075c.006 3.368.04 5.759.11 6.47M102.667 263.125c-.009 1.53-.015 2.98-.016 4.313M102.204 174.024l.893 44.402s.669 1.561-.224 2.677c-.892 1.116 2.455.67.893 2.231-1.562 1.562.893 1.116 0 3.347-.592 1.48-.988 20.987-1.09 34.956",stroke:"#648BD8",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"})))},y=g;function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"IconMap",function(){return w}),n.d(t,"ExceptionMap",function(){return b});var w={success:a["a"],error:s["a"],info:u["a"],warning:c["a"]},b={404:f,500:m,403:y},T=Object.keys(b),S=function(e,t){var n=t.status,i=t.icon,a=o()("".concat(e,"-icon"));if(Object(d["a"])(!("string"===typeof i&&i.length>2),"Result","`icon` is using ReactNode instead of string naming in v4. Please check `".concat(i,"` at https://ant.design/components/icon")),T.includes(n)){var s=b[n];return r["createElement"]("div",{className:"".concat(a," ").concat(e,"-image")},r["createElement"](s,null))}var u=r["createElement"](w[n]);return r["createElement"]("div",{className:a},i||u)},E=function(e,t){var n=t.extra;return n&&r["createElement"]("div",{className:"".concat(e,"-extra")},n)},C=function(e){return r["createElement"](l["a"],null,function(t){var n=t.getPrefixCls,i=t.direction,a=e.prefixCls,s=e.className,u=e.subTitle,c=e.title,l=e.style,d=e.children,h=e.status,f=n("result",a),p=o()(f,"".concat(f,"-").concat(h),s,v({},"".concat(f,"-rtl"),"rtl"===i));return r["createElement"]("div",{className:p,style:l},S(f,e),r["createElement"]("div",{className:"".concat(f,"-title")},c),u&&r["createElement"]("div",{className:"".concat(f,"-subtitle")},u),d&&r["createElement"]("div",{className:"".concat(f,"-content")},d),E(f,e))})};C.defaultProps={status:"info"},C.PRESENTED_IMAGE_403=b[403],C.PRESENTED_IMAGE_404=b[404],C.PRESENTED_IMAGE_500=b[500];t["default"]=C},O1kn:function(e,t,n){"use strict";function r(e){return e&&"object"===typeof e&&"default"in e?e["default"]:e}Object.defineProperty(t,"__esModule",{value:!0});var i=r(n("wj3C"));n("fSjL");var o,a=n("mrSG"),s=n("zVF4"),u=n("q/0M"),c=n("S+S0"),l=function(){function e(e,t,n,r){this.client=e,this.storage=t,this.storageCache=n,this.logger=r}return e.prototype.isCachedDataFresh=function(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-t,r=n<=e;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+e+". Is cache hit: "+r+"."),r},e.prototype.fetch=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,n,r,i,o;return a.__generator(this,function(a){switch(a.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return t=a.sent(),n=t[0],r=t[1],r&&this.isCachedDataFresh(e.cacheMaxAgeMillis,n)?[2,r]:(e.eTag=r&&r.eTag,[4,this.client.fetch(e)]);case 2:return i=a.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return a.sent(),[2,i]}})})},e}(),d=(o={},o["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",o["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",o["registration-api-key"]="Undefined API key. Check Firebase app initialization.",o["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",o["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",o["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",o["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",o["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",o["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",o["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',o["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',o["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",o["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",o),h=new s.ErrorFactory("remoteconfig","Remote Config",d);function f(e,t){return e instanceof s.FirebaseError&&-1!==e.code.indexOf(t)}function p(e){return void 0===e&&(e=navigator),e.languages&&e.languages[0]||e.language}var m=function(){function e(e,t,n,r,i,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return e.prototype.fetch=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,n,r,i,o,s,u,c,l,d,f,m,g,y,v,w,b,T,S;return a.__generator(this,function(a){switch(a.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:t=a.sent(),n=t[0],r=t[1],i=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=i+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},u={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:p()},c={method:"POST",headers:s,body:JSON.stringify(u)},l=fetch(o,c),d=new Promise(function(t,n){e.signal.addEventListener(function(){var e=new Error("The operation was aborted.");e.name="AbortError",n(e)})}),a.label=2;case 2:return a.trys.push([2,5,,6]),[4,Promise.race([l,d])];case 3:return a.sent(),[4,l];case 4:return f=a.sent(),[3,6];case 5:throw m=a.sent(),g="fetch-client-network","AbortError"===m.name&&(g="fetch-timeout"),h.create(g,{originalErrorMessage:m.message});case 6:if(y=f.status,v=f.headers.get("ETag")||void 0,200!==f.status)return[3,11];T=void 0,a.label=7;case 7:return a.trys.push([7,9,,10]),[4,f.json()];case 8:return T=a.sent(),[3,10];case 9:throw S=a.sent(),h.create("fetch-client-parse",{originalErrorMessage:S.message});case 10:w=T["entries"],b=T["state"],a.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===b?y=500:"NO_CHANGE"===b?y=304:"NO_TEMPLATE"!==b&&"EMPTY_CONFIG"!==b||(w={}),304!==y&&200!==y)throw h.create("fetch-status",{httpStatus:y});return[2,{status:y,eTag:v,config:w}]}})})},e}(),g=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(e){this.listeners.push(e)},e.prototype.abort=function(){this.listeners.forEach(function(e){return e()})},e}(),y=!1,v="",w=0,b=["1","true","t","yes","y","on"],T=function(){function e(e,t){void 0===t&&(t=v),this._source=e,this._value=t}return e.prototype.asString=function(){return this._value},e.prototype.asBoolean=function(){return"static"===this._source?y:b.indexOf(this._value.toLowerCase())>=0},e.prototype.asNumber=function(){if("static"===this._source)return w;var e=Number(this._value);return isNaN(e)&&(e=w),e},e.prototype.getSource=function(){return this._source},e}(),S=6e4,E=432e5,C=function(){function e(e,t,n,r,i){this.app=e,this._client=t,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:S,minimumFetchIntervalMillis:E},this.defaultConfig={}}return e.prototype.setLogLevel=function(e){switch(e){case"debug":this._logger.logLevel=u.LogLevel.DEBUG;break;case"silent":this._logger.logLevel=u.LogLevel.SILENT;break;default:this._logger.logLevel=u.LogLevel.ERROR}},Object.defineProperty(e.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!0,configurable:!0}),e.prototype.activate=function(){return a.__awaiter(this,void 0,void 0,function(){var e,t,n;return a.__generator(this,function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return e=r.sent(),t=e[0],n=e[1],t&&t.config&&t.eTag&&t.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(t.config),this._storage.setActiveConfigEtag(t.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}})})},e.prototype.ensureInitialized=function(){var e=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){e._isInitializationComplete=!0})),this._initializePromise},e.prototype.fetch=function(){return a.__awaiter(this,void 0,void 0,function(){var e,t,n,r=this;return a.__generator(this,function(i){switch(i.label){case 0:e=new g,setTimeout(function(){return a.__awaiter(r,void 0,void 0,function(){return a.__generator(this,function(t){return e.abort(),[2]})})},this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:e})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return t=i.sent(),n=f(t,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),t;case 6:return[2]}})})},e.prototype.fetchAndActivate=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return[4,this.fetch()];case 1:return e.sent(),[2,this.activate()]}})})},e.prototype.getAll=function(){var e=this;return O(this._storageCache.getActiveConfig(),this.defaultConfig).reduce(function(t,n){return t[n]=e.getValue(n),t},{})},e.prototype.getBoolean=function(e){return this.getValue(e).asBoolean()},e.prototype.getNumber=function(e){return this.getValue(e).asNumber()},e.prototype.getString=function(e){return this.getValue(e).asString()},e.prototype.getValue=function(e){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+e+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var t=this._storageCache.getActiveConfig();return t&&void 0!==t[e]?new T("remote",t[e]):this.defaultConfig&&void 0!==this.defaultConfig[e]?new T("default",String(this.defaultConfig[e])):(this._logger.debug('Returning static value for key "'+e+'". Define a default or remote value if this is unintentional.'),new T("static"))},e}();function O(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),Object.keys(a.__assign(a.__assign({},e),t))}function _(e,t){var n=e.target.error||void 0;return h.create(t,{originalErrorMessage:n&&n.message})}var I="app_namespace_store",k="firebase_remote_config",D=1;function A(){return new Promise(function(e,t){var n=indexedDB.open(k,D);n.onerror=function(e){t(_(e,"storage-open"))},n.onsuccess=function(t){e(t.target.result)},n.onupgradeneeded=function(e){var t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(I,{keyPath:"compositeKey"})}}})}var F=function(){function e(e,t,n,r){void 0===r&&(r=A()),this.appId=e,this.appName=t,this.namespace=n,this.openDbPromise=r}return e.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},e.prototype.setLastFetchStatus=function(e){return this.set("last_fetch_status",e)},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},e.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.set("last_successful_fetch_timestamp_millis",e)},e.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},e.prototype.setLastSuccessfulFetchResponse=function(e){return this.set("last_successful_fetch_response",e)},e.prototype.getActiveConfig=function(){return this.get("active_config")},e.prototype.setActiveConfig=function(e){return this.set("active_config",e)},e.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},e.prototype.setActiveConfigEtag=function(e){return this.set("active_config_etag",e)},e.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},e.prototype.setThrottleMetadata=function(e){return this.set("throttle_metadata",e)},e.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},e.prototype.get=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,n=this;return a.__generator(this,function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return t=r.sent(),[2,new Promise(function(r,i){var o=t.transaction([I],"readonly"),a=o.objectStore(I),s=n.createCompositeKey(e);try{var u=a.get(s);u.onerror=function(e){i(_(e,"storage-get"))},u.onsuccess=function(e){var t=e.target.result;r(t?t.value:void 0)}}catch(e){i(h.create("storage-get",{originalErrorMessage:e&&e.message}))}})]}})})},e.prototype.set=function(e,t){return a.__awaiter(this,void 0,void 0,function(){var n,r=this;return a.__generator(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise(function(i,o){var a=n.transaction([I],"readwrite"),s=a.objectStore(I),u=r.createCompositeKey(e);try{var c=s.put({compositeKey:u,value:t});c.onerror=function(e){o(_(e,"storage-set"))},c.onsuccess=function(){i()}}catch(e){o(h.create("storage-set",{originalErrorMessage:e&&e.message}))}})]}})})},e.prototype.delete=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,n=this;return a.__generator(this,function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return t=r.sent(),[2,new Promise(function(r,i){var o=t.transaction([I],"readwrite"),a=o.objectStore(I),s=n.createCompositeKey(e);try{var u=a.delete(s);u.onerror=function(e){i(_(e,"storage-delete"))},u.onsuccess=function(){r()}}catch(e){i(h.create("storage-delete",{originalErrorMessage:e&&e.message}))}})]}})})},e.prototype.createCompositeKey=function(e){return[this.appId,this.appName,this.namespace,e].join()},e}(),M=function(){function e(e){this.storage=e}return e.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},e.prototype.getActiveConfig=function(){return this.activeConfig},e.prototype.loadFromStorage=function(){return a.__awaiter(this,void 0,void 0,function(){var e,t,n,r,i,o;return a.__generator(this,function(a){switch(a.label){case 0:return e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,e];case 1:return r=a.sent(),r&&(this.lastFetchStatus=r),[4,t];case 2:return i=a.sent(),i&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return o=a.sent(),o&&(this.activeConfig=o),[2]}})})},e.prototype.setLastFetchStatus=function(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)},e.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)},e.prototype.setActiveConfig=function(e){return this.activeConfig=e,this.storage.setActiveConfig(e)},e}(),N=1e3,R=2,L=144e5,P=.5;function x(e){var t=N*Math.pow(R,e),n=Math.round(P*t*(Math.random()-.5)*2);return Math.min(L,t+n)}function B(e,t){return new Promise(function(n,r){var i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener(function(){clearTimeout(o),r(h.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function q(e){if(!(e instanceof s.FirebaseError))return!1;var t=Number(e["httpStatus"]);return 429===t||500===t||503===t||504===t}var U=function(){function e(e,t){this.client=e,this.storage=t}return e.prototype.fetch=function(e){return a.__awaiter(this,void 0,void 0,function(){var t;return a.__generator(this,function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return t=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(e,t)]}})})},e.prototype.attemptFetch=function(e,t){var n=t.throttleEndTimeMillis,r=t.backoffCount;return a.__awaiter(this,void 0,void 0,function(){var t,i,o;return a.__generator(this,function(a){switch(a.label){case 0:return[4,B(e.signal,n)];case 1:a.sent(),a.label=2;case 2:return a.trys.push([2,5,,7]),[4,this.client.fetch(e)];case 3:return t=a.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return a.sent(),[2,t];case 5:if(i=a.sent(),!q(i))throw i;return o={throttleEndTimeMillis:Date.now()+x(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return a.sent(),[2,this.attemptFetch(e,o)];case 7:return[2]}})})},e}(),V="@firebase/remote-config";function j(e){function t(t,n){var r=t.getProvider("app").getImmediate(),i=t.getProvider("installations").getImmediate();if("undefined"===typeof window)throw h.create("registration-window");var o=r.options,a=o.projectId,s=o.apiKey,c=o.appId;if(!a)throw h.create("registration-project-id");if(!s)throw h.create("registration-api-key");if(!c)throw h.create("registration-app-id");n=n||"firebase";var d=new F(c,r.name,n),f=new M(d),p=new u.Logger(V);p.logLevel=u.LogLevel.ERROR;var g=new m(i,e.SDK_VERSION,n,a,s,c),y=new U(g,d),v=new l(y,d,f,p),w=new C(r,v,f,d,p);return w.ensureInitialized(),w}e.INTERNAL.registerComponent(new c.Component("remoteConfig",t,"PUBLIC").setMultipleInstances(!0))}j(i),t.registerRemoteConfig=j},QyDn:function(e,t,n){e.exports={container:"antd-pro-components-header-dropdown-index-container"}},RBnf:function(e,t,n){"use strict";n.r(t);var r=n("Cmfh");n.d(t,"AccountBookFilled",function(){return r["AccountBookFilled"]}),n.d(t,"AccountBookOutlined",function(){return r["AccountBookOutlined"]}),n.d(t,"AccountBookTwoTone",function(){return r["AccountBookTwoTone"]}),n.d(t,"AimOutlined",function(){return r["AimOutlined"]}),n.d(t,"AlertFilled",function(){return r["AlertFilled"]}),n.d(t,"AlertOutlined",function(){return r["AlertOutlined"]}),n.d(t,"AlertTwoTone",function(){return r["AlertTwoTone"]}),n.d(t,"AlibabaOutlined",function(){return r["AlibabaOutlined"]}),n.d(t,"AlignCenterOutlined",function(){return r["AlignCenterOutlined"]}),n.d(t,"AlignLeftOutlined",function(){return r["AlignLeftOutlined"]}),n.d(t,"AlignRightOutlined",function(){return r["AlignRightOutlined"]}),n.d(t,"AlipayCircleFilled",function(){return r["AlipayCircleFilled"]}),n.d(t,"AlipayCircleOutlined",function(){return r["AlipayCircleOutlined"]}),n.d(t,"AlipayOutlined",function(){return r["AlipayOutlined"]}),n.d(t,"AlipaySquareFilled",function(){return r["AlipaySquareFilled"]}),n.d(t,"AliwangwangFilled",function(){return r["AliwangwangFilled"]}),n.d(t,"AliwangwangOutlined",function(){return r["AliwangwangOutlined"]}),n.d(t,"AliyunOutlined",function(){return r["AliyunOutlined"]}),n.d(t,"AmazonCircleFilled",function(){return r["AmazonCircleFilled"]}),n.d(t,"AmazonOutlined",function(){return r["AmazonOutlined"]}),n.d(t,"AmazonSquareFilled",function(){return r["AmazonSquareFilled"]}),n.d(t,"AndroidFilled",function(){return r["AndroidFilled"]}),n.d(t,"AndroidOutlined",function(){return r["AndroidOutlined"]}),n.d(t,"AntCloudOutlined",function(){return r["AntCloudOutlined"]}),n.d(t,"AntDesignOutlined",function(){return r["AntDesignOutlined"]}),n.d(t,"ApartmentOutlined",function(){return r["ApartmentOutlined"]}),n.d(t,"ApiFilled",function(){return r["ApiFilled"]}),n.d(t,"ApiOutlined",function(){return r["ApiOutlined"]}),n.d(t,"ApiTwoTone",function(){return r["ApiTwoTone"]}),n.d(t,"AppleFilled",function(){return r["AppleFilled"]}),n.d(t,"AppleOutlined",function(){return r["AppleOutlined"]}),n.d(t,"AppstoreAddOutlined",function(){return r["AppstoreAddOutlined"]}),n.d(t,"AppstoreFilled",function(){return r["AppstoreFilled"]}),n.d(t,"AppstoreOutlined",function(){return r["AppstoreOutlined"]}),n.d(t,"AppstoreTwoTone",function(){return r["AppstoreTwoTone"]}),n.d(t,"AreaChartOutlined",function(){return r["AreaChartOutlined"]}),n.d(t,"ArrowDownOutlined",function(){return r["ArrowDownOutlined"]}),n.d(t,"ArrowLeftOutlined",function(){return r["ArrowLeftOutlined"]}),n.d(t,"ArrowRightOutlined",function(){return r["ArrowRightOutlined"]}),n.d(t,"ArrowUpOutlined",function(){return r["ArrowUpOutlined"]}),n.d(t,"ArrowsAltOutlined",function(){return r["ArrowsAltOutlined"]}),n.d(t,"AudioFilled",function(){return r["AudioFilled"]}),n.d(t,"AudioMutedOutlined",function(){return r["AudioMutedOutlined"]}),n.d(t,"AudioOutlined",function(){return r["AudioOutlined"]}),n.d(t,"AudioTwoTone",function(){return r["AudioTwoTone"]}),n.d(t,"AuditOutlined",function(){return r["AuditOutlined"]}),n.d(t,"BackwardFilled",function(){return r["BackwardFilled"]}),n.d(t,"BackwardOutlined",function(){return r["BackwardOutlined"]}),n.d(t,"BankFilled",function(){return r["BankFilled"]}),n.d(t,"BankOutlined",function(){return r["BankOutlined"]}),n.d(t,"BankTwoTone",function(){return r["BankTwoTone"]}),n.d(t,"BarChartOutlined",function(){return r["BarChartOutlined"]}),n.d(t,"BarcodeOutlined",function(){return r["BarcodeOutlined"]}),n.d(t,"BarsOutlined",function(){return r["BarsOutlined"]}),n.d(t,"BehanceCircleFilled",function(){return r["BehanceCircleFilled"]}),n.d(t,"BehanceOutlined",function(){return r["BehanceOutlined"]}),n.d(t,"BehanceSquareFilled",function(){return r["BehanceSquareFilled"]}),n.d(t,"BehanceSquareOutlined",function(){return r["BehanceSquareOutlined"]}),n.d(t,"BellFilled",function(){return r["BellFilled"]}),n.d(t,"BellOutlined",function(){return r["BellOutlined"]}),n.d(t,"BellTwoTone",function(){return r["BellTwoTone"]}),n.d(t,"BgColorsOutlined",function(){return r["BgColorsOutlined"]}),n.d(t,"BlockOutlined",function(){return r["BlockOutlined"]}),n.d(t,"BoldOutlined",function(){return r["BoldOutlined"]}),n.d(t,"BookFilled",function(){return r["BookFilled"]}),n.d(t,"BookOutlined",function(){return r["BookOutlined"]}),n.d(t,"BookTwoTone",function(){return r["BookTwoTone"]}),n.d(t,"BorderBottomOutlined",function(){return r["BorderBottomOutlined"]}),n.d(t,"BorderHorizontalOutlined",function(){return r["BorderHorizontalOutlined"]}),n.d(t,"BorderInnerOutlined",function(){return r["BorderInnerOutlined"]}),n.d(t,"BorderLeftOutlined",function(){return r["BorderLeftOutlined"]}),n.d(t,"BorderOuterOutlined",function(){return r["BorderOuterOutlined"]}),n.d(t,"BorderOutlined",function(){return r["BorderOutlined"]}),n.d(t,"BorderRightOutlined",function(){return r["BorderRightOutlined"]}),n.d(t,"BorderTopOutlined",function(){return r["BorderTopOutlined"]}),n.d(t,"BorderVerticleOutlined",function(){return r["BorderVerticleOutlined"]}),n.d(t,"BorderlessTableOutlined",function(){return r["BorderlessTableOutlined"]}),n.d(t,"BoxPlotFilled",function(){return r["BoxPlotFilled"]}),n.d(t,"BoxPlotOutlined",function(){return r["BoxPlotOutlined"]}),n.d(t,"BoxPlotTwoTone",function(){return r["BoxPlotTwoTone"]}),n.d(t,"BranchesOutlined",function(){return r["BranchesOutlined"]}),n.d(t,"BugFilled",function(){return r["BugFilled"]}),n.d(t,"BugOutlined",function(){return r["BugOutlined"]}),n.d(t,"BugTwoTone",function(){return r["BugTwoTone"]}),n.d(t,"BuildFilled",function(){return r["BuildFilled"]}),n.d(t,"BuildOutlined",function(){return r["BuildOutlined"]}),n.d(t,"BuildTwoTone",function(){return r["BuildTwoTone"]}),n.d(t,"BulbFilled",function(){return r["BulbFilled"]}),n.d(t,"BulbOutlined",function(){return r["BulbOutlined"]}),n.d(t,"BulbTwoTone",function(){return r["BulbTwoTone"]}),n.d(t,"CalculatorFilled",function(){return r["CalculatorFilled"]}),n.d(t,"CalculatorOutlined",function(){return r["CalculatorOutlined"]}),n.d(t,"CalculatorTwoTone",function(){return r["CalculatorTwoTone"]}),n.d(t,"CalendarFilled",function(){return r["CalendarFilled"]}),n.d(t,"CalendarOutlined",function(){return r["CalendarOutlined"]}),n.d(t,"CalendarTwoTone",function(){return r["CalendarTwoTone"]}),n.d(t,"CameraFilled",function(){return r["CameraFilled"]}),n.d(t,"CameraOutlined",function(){return r["CameraOutlined"]}),n.d(t,"CameraTwoTone",function(){return r["CameraTwoTone"]}),n.d(t,"CarFilled",function(){return r["CarFilled"]}),n.d(t,"CarOutlined",function(){return r["CarOutlined"]}),n.d(t,"CarTwoTone",function(){return r["CarTwoTone"]}),n.d(t,"CaretDownFilled",function(){return r["CaretDownFilled"]}),n.d(t,"CaretDownOutlined",function(){return r["CaretDownOutlined"]}),n.d(t,"CaretLeftFilled",function(){return r["CaretLeftFilled"]}),n.d(t,"CaretLeftOutlined",function(){return r["CaretLeftOutlined"]}),n.d(t,"CaretRightFilled",function(){return r["CaretRightFilled"]}),n.d(t,"CaretRightOutlined",function(){return r["CaretRightOutlined"]}),n.d(t,"CaretUpFilled",function(){return r["CaretUpFilled"]}),n.d(t,"CaretUpOutlined",function(){return r["CaretUpOutlined"]}),n.d(t,"CarryOutFilled",function(){return r["CarryOutFilled"]}),n.d(t,"CarryOutOutlined",function(){return r["CarryOutOutlined"]}),n.d(t,"CarryOutTwoTone",function(){return r["CarryOutTwoTone"]}),n.d(t,"CheckCircleFilled",function(){return r["CheckCircleFilled"]}),n.d(t,"CheckCircleOutlined",function(){return r["CheckCircleOutlined"]}),n.d(t,"CheckCircleTwoTone",function(){return r["CheckCircleTwoTone"]}),n.d(t,"CheckOutlined",function(){return r["CheckOutlined"]}),n.d(t,"CheckSquareFilled",function(){return r["CheckSquareFilled"]}),n.d(t,"CheckSquareOutlined",function(){return r["CheckSquareOutlined"]}),n.d(t,"CheckSquareTwoTone",function(){return r["CheckSquareTwoTone"]}),n.d(t,"ChromeFilled",function(){return r["ChromeFilled"]}),n.d(t,"ChromeOutlined",function(){return r["ChromeOutlined"]}),n.d(t,"CiCircleFilled",function(){return r["CiCircleFilled"]}),n.d(t,"CiCircleOutlined",function(){return r["CiCircleOutlined"]}),n.d(t,"CiCircleTwoTone",function(){return r["CiCircleTwoTone"]}),n.d(t,"CiOutlined",function(){return r["CiOutlined"]}),n.d(t,"CiTwoTone",function(){return r["CiTwoTone"]}),n.d(t,"ClearOutlined",function(){return r["ClearOutlined"]}),n.d(t,"ClockCircleFilled",function(){return r["ClockCircleFilled"]}),n.d(t,"ClockCircleOutlined",function(){return r["ClockCircleOutlined"]}),n.d(t,"ClockCircleTwoTone",function(){return r["ClockCircleTwoTone"]}),n.d(t,"CloseCircleFilled",function(){return r["CloseCircleFilled"]}),n.d(t,"CloseCircleOutlined",function(){return r["CloseCircleOutlined"]}),n.d(t,"CloseCircleTwoTone",function(){return r["CloseCircleTwoTone"]}),n.d(t,"CloseOutlined",function(){return r["CloseOutlined"]}),n.d(t,"CloseSquareFilled",function(){return r["CloseSquareFilled"]}),n.d(t,"CloseSquareOutlined",function(){return r["CloseSquareOutlined"]}),n.d(t,"CloseSquareTwoTone",function(){return r["CloseSquareTwoTone"]}),n.d(t,"CloudDownloadOutlined",function(){return r["CloudDownloadOutlined"]}),n.d(t,"CloudFilled",function(){return r["CloudFilled"]}),n.d(t,"CloudOutlined",function(){return r["CloudOutlined"]}),n.d(t,"CloudServerOutlined",function(){return r["CloudServerOutlined"]}),n.d(t,"CloudSyncOutlined",function(){return r["CloudSyncOutlined"]}),n.d(t,"CloudTwoTone",function(){return r["CloudTwoTone"]}),n.d(t,"CloudUploadOutlined",function(){return r["CloudUploadOutlined"]}),n.d(t,"ClusterOutlined",function(){return r["ClusterOutlined"]}),n.d(t,"CodeFilled",function(){return r["CodeFilled"]}),n.d(t,"CodeOutlined",function(){return r["CodeOutlined"]}),n.d(t,"CodeSandboxCircleFilled",function(){return r["CodeSandboxCircleFilled"]}),n.d(t,"CodeSandboxOutlined",function(){return r["CodeSandboxOutlined"]}),n.d(t,"CodeSandboxSquareFilled",function(){return r["CodeSandboxSquareFilled"]}),n.d(t,"CodeTwoTone",function(){return r["CodeTwoTone"]}),n.d(t,"CodepenCircleFilled",function(){return r["CodepenCircleFilled"]}),n.d(t,"CodepenCircleOutlined",function(){return r["CodepenCircleOutlined"]}),n.d(t,"CodepenOutlined",function(){return r["CodepenOutlined"]}),n.d(t,"CodepenSquareFilled",function(){return r["CodepenSquareFilled"]}),n.d(t,"CoffeeOutlined",function(){return r["CoffeeOutlined"]}),n.d(t,"ColumnHeightOutlined",function(){return r["ColumnHeightOutlined"]}),n.d(t,"ColumnWidthOutlined",function(){return r["ColumnWidthOutlined"]}),n.d(t,"CommentOutlined",function(){return r["CommentOutlined"]}),n.d(t,"CompassFilled",function(){return r["CompassFilled"]}),n.d(t,"CompassOutlined",function(){return r["CompassOutlined"]}),n.d(t,"CompassTwoTone",function(){return r["CompassTwoTone"]}),n.d(t,"CompressOutlined",function(){return r["CompressOutlined"]}),n.d(t,"ConsoleSqlOutlined",function(){return r["ConsoleSqlOutlined"]}),n.d(t,"ContactsFilled",function(){return r["ContactsFilled"]}),n.d(t,"ContactsOutlined",function(){return r["ContactsOutlined"]}),n.d(t,"ContactsTwoTone",function(){return r["ContactsTwoTone"]}),n.d(t,"ContainerFilled",function(){return r["ContainerFilled"]}),n.d(t,"ContainerOutlined",function(){return r["ContainerOutlined"]}),n.d(t,"ContainerTwoTone",function(){return r["ContainerTwoTone"]}),n.d(t,"ControlFilled",function(){return r["ControlFilled"]}),n.d(t,"ControlOutlined",function(){return r["ControlOutlined"]}),n.d(t,"ControlTwoTone",function(){return r["ControlTwoTone"]}),n.d(t,"CopyFilled",function(){return r["CopyFilled"]}),n.d(t,"CopyOutlined",function(){return r["CopyOutlined"]}),n.d(t,"CopyTwoTone",function(){return r["CopyTwoTone"]}),n.d(t,"CopyrightCircleFilled",function(){return r["CopyrightCircleFilled"]}),n.d(t,"CopyrightCircleOutlined",function(){return r["CopyrightCircleOutlined"]}),n.d(t,"CopyrightCircleTwoTone",function(){return r["CopyrightCircleTwoTone"]}),n.d(t,"CopyrightOutlined",function(){return r["CopyrightOutlined"]}),n.d(t,"CopyrightTwoTone",function(){return r["CopyrightTwoTone"]}),n.d(t,"CreditCardFilled",function(){return r["CreditCardFilled"]}),n.d(t,"CreditCardOutlined",function(){return r["CreditCardOutlined"]}),n.d(t,"CreditCardTwoTone",function(){return r["CreditCardTwoTone"]}),n.d(t,"CrownFilled",function(){return r["CrownFilled"]}),n.d(t,"CrownOutlined",function(){return r["CrownOutlined"]}),n.d(t,"CrownTwoTone",function(){return r["CrownTwoTone"]}),n.d(t,"CustomerServiceFilled",function(){return r["CustomerServiceFilled"]}),n.d(t,"CustomerServiceOutlined",function(){return r["CustomerServiceOutlined"]}),n.d(t,"CustomerServiceTwoTone",function(){return r["CustomerServiceTwoTone"]}),n.d(t,"DashOutlined",function(){return r["DashOutlined"]}),n.d(t,"DashboardFilled",function(){return r["DashboardFilled"]}),n.d(t,"DashboardOutlined",function(){return r["DashboardOutlined"]}),n.d(t,"DashboardTwoTone",function(){return r["DashboardTwoTone"]}),n.d(t,"DatabaseFilled",function(){return r["DatabaseFilled"]}),n.d(t,"DatabaseOutlined",function(){return r["DatabaseOutlined"]}),n.d(t,"DatabaseTwoTone",function(){return r["DatabaseTwoTone"]}),n.d(t,"DeleteColumnOutlined",function(){return r["DeleteColumnOutlined"]}),n.d(t,"DeleteFilled",function(){return r["DeleteFilled"]}),n.d(t,"DeleteOutlined",function(){return r["DeleteOutlined"]}),n.d(t,"DeleteRowOutlined",function(){return r["DeleteRowOutlined"]}),n.d(t,"DeleteTwoTone",function(){return r["DeleteTwoTone"]}),n.d(t,"DeliveredProcedureOutlined",function(){return r["DeliveredProcedureOutlined"]}),n.d(t,"DeploymentUnitOutlined",function(){return r["DeploymentUnitOutlined"]}),n.d(t,"DesktopOutlined",function(){return r["DesktopOutlined"]}),n.d(t,"DiffFilled",function(){return r["DiffFilled"]}),n.d(t,"DiffOutlined",function(){return r["DiffOutlined"]}),n.d(t,"DiffTwoTone",function(){return r["DiffTwoTone"]}),n.d(t,"DingdingOutlined",function(){return r["DingdingOutlined"]}),n.d(t,"DingtalkCircleFilled",function(){return r["DingtalkCircleFilled"]}),n.d(t,"DingtalkOutlined",function(){return r["DingtalkOutlined"]}),n.d(t,"DingtalkSquareFilled",function(){return r["DingtalkSquareFilled"]}),n.d(t,"DisconnectOutlined",function(){return r["DisconnectOutlined"]}),n.d(t,"DislikeFilled",function(){return r["DislikeFilled"]}),n.d(t,"DislikeOutlined",function(){return r["DislikeOutlined"]}),n.d(t,"DislikeTwoTone",function(){return r["DislikeTwoTone"]}),n.d(t,"DollarCircleFilled",function(){return r["DollarCircleFilled"]}),n.d(t,"DollarCircleOutlined",function(){return r["DollarCircleOutlined"]}),n.d(t,"DollarCircleTwoTone",function(){return r["DollarCircleTwoTone"]}),n.d(t,"DollarOutlined",function(){return r["DollarOutlined"]}),n.d(t,"DollarTwoTone",function(){return r["DollarTwoTone"]}),n.d(t,"DotChartOutlined",function(){return r["DotChartOutlined"]}),n.d(t,"DoubleLeftOutlined",function(){return r["DoubleLeftOutlined"]}),n.d(t,"DoubleRightOutlined",function(){return r["DoubleRightOutlined"]}),n.d(t,"DownCircleFilled",function(){return r["DownCircleFilled"]}),n.d(t,"DownCircleOutlined",function(){return r["DownCircleOutlined"]}),n.d(t,"DownCircleTwoTone",function(){return r["DownCircleTwoTone"]}),n.d(t,"DownOutlined",function(){return r["DownOutlined"]}),n.d(t,"DownSquareFilled",function(){return r["DownSquareFilled"]}),n.d(t,"DownSquareOutlined",function(){return r["DownSquareOutlined"]}),n.d(t,"DownSquareTwoTone",function(){return r["DownSquareTwoTone"]}),n.d(t,"DownloadOutlined",function(){return r["DownloadOutlined"]}),n.d(t,"DragOutlined",function(){return r["DragOutlined"]}),n.d(t,"DribbbleCircleFilled",function(){return r["DribbbleCircleFilled"]}),n.d(t,"DribbbleOutlined",function(){return r["DribbbleOutlined"]}),n.d(t,"DribbbleSquareFilled",function(){return r["DribbbleSquareFilled"]}),n.d(t,"DribbbleSquareOutlined",function(){return r["DribbbleSquareOutlined"]}),n.d(t,"DropboxCircleFilled",function(){return r["DropboxCircleFilled"]}),n.d(t,"DropboxOutlined",function(){return r["DropboxOutlined"]}),n.d(t,"DropboxSquareFilled",function(){return r["DropboxSquareFilled"]}),n.d(t,"EditFilled",function(){return r["EditFilled"]}),n.d(t,"EditOutlined",function(){return r["EditOutlined"]}),n.d(t,"EditTwoTone",function(){return r["EditTwoTone"]}),n.d(t,"EllipsisOutlined",function(){return r["EllipsisOutlined"]}),n.d(t,"EnterOutlined",function(){return r["EnterOutlined"]}),n.d(t,"EnvironmentFilled",function(){return r["EnvironmentFilled"]}),n.d(t,"EnvironmentOutlined",function(){return r["EnvironmentOutlined"]}),n.d(t,"EnvironmentTwoTone",function(){return r["EnvironmentTwoTone"]}),n.d(t,"EuroCircleFilled",function(){return r["EuroCircleFilled"]}),n.d(t,"EuroCircleOutlined",function(){return r["EuroCircleOutlined"]}),n.d(t,"EuroCircleTwoTone",function(){return r["EuroCircleTwoTone"]}),n.d(t,"EuroOutlined",function(){return r["EuroOutlined"]}),n.d(t,"EuroTwoTone",function(){return r["EuroTwoTone"]}),n.d(t,"ExceptionOutlined",function(){return r["ExceptionOutlined"]}),n.d(t,"ExclamationCircleFilled",function(){return r["ExclamationCircleFilled"]}),n.d(t,"ExclamationCircleOutlined",function(){return r["ExclamationCircleOutlined"]}),n.d(t,"ExclamationCircleTwoTone",function(){return r["ExclamationCircleTwoTone"]}),n.d(t,"ExclamationOutlined",function(){return r["ExclamationOutlined"]}),n.d(t,"ExpandAltOutlined",function(){return r["ExpandAltOutlined"]}),n.d(t,"ExpandOutlined",function(){return r["ExpandOutlined"]}),n.d(t,"ExperimentFilled",function(){return r["ExperimentFilled"]}),n.d(t,"ExperimentOutlined",function(){return r["ExperimentOutlined"]}),n.d(t,"ExperimentTwoTone",function(){return r["ExperimentTwoTone"]}),n.d(t,"ExportOutlined",function(){return r["ExportOutlined"]}),n.d(t,"EyeFilled",function(){return r["EyeFilled"]}),n.d(t,"EyeInvisibleFilled",function(){return r["EyeInvisibleFilled"]}),n.d(t,"EyeInvisibleOutlined",function(){return r["EyeInvisibleOutlined"]}),n.d(t,"EyeInvisibleTwoTone",function(){return r["EyeInvisibleTwoTone"]}),n.d(t,"EyeOutlined",function(){return r["EyeOutlined"]}),n.d(t,"EyeTwoTone",function(){return r["EyeTwoTone"]}),n.d(t,"FacebookFilled",function(){return r["FacebookFilled"]}),n.d(t,"FacebookOutlined",function(){return r["FacebookOutlined"]}),n.d(t,"FallOutlined",function(){return r["FallOutlined"]}),n.d(t,"FastBackwardFilled",function(){return r["FastBackwardFilled"]}),n.d(t,"FastBackwardOutlined",function(){return r["FastBackwardOutlined"]}),n.d(t,"FastForwardFilled",function(){return r["FastForwardFilled"]}),n.d(t,"FastForwardOutlined",function(){return r["FastForwardOutlined"]}),n.d(t,"FieldBinaryOutlined",function(){return r["FieldBinaryOutlined"]}),n.d(t,"FieldNumberOutlined",function(){return r["FieldNumberOutlined"]}),n.d(t,"FieldStringOutlined",function(){return r["FieldStringOutlined"]}),n.d(t,"FieldTimeOutlined",function(){return r["FieldTimeOutlined"]}),n.d(t,"FileAddFilled",function(){return r["FileAddFilled"]}),n.d(t,"FileAddOutlined",function(){return r["FileAddOutlined"]}),n.d(t,"FileAddTwoTone",function(){return r["FileAddTwoTone"]}),n.d(t,"FileDoneOutlined",function(){return r["FileDoneOutlined"]}),n.d(t,"FileExcelFilled",function(){return r["FileExcelFilled"]}),n.d(t,"FileExcelOutlined",function(){return r["FileExcelOutlined"]}),n.d(t,"FileExcelTwoTone",function(){return r["FileExcelTwoTone"]}),n.d(t,"FileExclamationFilled",function(){return r["FileExclamationFilled"]}),n.d(t,"FileExclamationOutlined",function(){return r["FileExclamationOutlined"]}),n.d(t,"FileExclamationTwoTone",function(){return r["FileExclamationTwoTone"]}),n.d(t,"FileFilled",function(){return r["FileFilled"]}),n.d(t,"FileGifOutlined",function(){return r["FileGifOutlined"]}),n.d(t,"FileImageFilled",function(){return r["FileImageFilled"]}),n.d(t,"FileImageOutlined",function(){return r["FileImageOutlined"]}),n.d(t,"FileImageTwoTone",function(){return r["FileImageTwoTone"]}),n.d(t,"FileJpgOutlined",function(){return r["FileJpgOutlined"]}),n.d(t,"FileMarkdownFilled",function(){return r["FileMarkdownFilled"]}),n.d(t,"FileMarkdownOutlined",function(){return r["FileMarkdownOutlined"]}),n.d(t,"FileMarkdownTwoTone",function(){return r["FileMarkdownTwoTone"]}),n.d(t,"FileOutlined",function(){return r["FileOutlined"]}),n.d(t,"FilePdfFilled",function(){return r["FilePdfFilled"]}),n.d(t,"FilePdfOutlined",function(){return r["FilePdfOutlined"]}),n.d(t,"FilePdfTwoTone",function(){return r["FilePdfTwoTone"]}),n.d(t,"FilePptFilled",function(){return r["FilePptFilled"]}),n.d(t,"FilePptOutlined",function(){return r["FilePptOutlined"]}),n.d(t,"FilePptTwoTone",function(){return r["FilePptTwoTone"]}),n.d(t,"FileProtectOutlined",function(){return r["FileProtectOutlined"]}),n.d(t,"FileSearchOutlined",function(){return r["FileSearchOutlined"]}),n.d(t,"FileSyncOutlined",function(){return r["FileSyncOutlined"]}),n.d(t,"FileTextFilled",function(){return r["FileTextFilled"]}),n.d(t,"FileTextOutlined",function(){return r["FileTextOutlined"]}),n.d(t,"FileTextTwoTone",function(){return r["FileTextTwoTone"]}),n.d(t,"FileTwoTone",function(){return r["FileTwoTone"]}),n.d(t,"FileUnknownFilled",function(){return r["FileUnknownFilled"]}),n.d(t,"FileUnknownOutlined",function(){return r["FileUnknownOutlined"]}),n.d(t,"FileUnknownTwoTone",function(){return r["FileUnknownTwoTone"]}),n.d(t,"FileWordFilled",function(){return r["FileWordFilled"]}),n.d(t,"FileWordOutlined",function(){return r["FileWordOutlined"]}),n.d(t,"FileWordTwoTone",function(){return r["FileWordTwoTone"]}),n.d(t,"FileZipFilled",function(){return r["FileZipFilled"]}),n.d(t,"FileZipOutlined",function(){return r["FileZipOutlined"]}),n.d(t,"FileZipTwoTone",function(){return r["FileZipTwoTone"]}),n.d(t,"FilterFilled",function(){return r["FilterFilled"]}),n.d(t,"FilterOutlined",function(){return r["FilterOutlined"]}),n.d(t,"FilterTwoTone",function(){return r["FilterTwoTone"]}),n.d(t,"FireFilled",function(){return r["FireFilled"]}),n.d(t,"FireOutlined",function(){return r["FireOutlined"]}),n.d(t,"FireTwoTone",function(){return r["FireTwoTone"]}),n.d(t,"FlagFilled",function(){return r["FlagFilled"]}),n.d(t,"FlagOutlined",function(){return r["FlagOutlined"]}),n.d(t,"FlagTwoTone",function(){return r["FlagTwoTone"]}),n.d(t,"FolderAddFilled",function(){return r["FolderAddFilled"]}),n.d(t,"FolderAddOutlined",function(){return r["FolderAddOutlined"]}),n.d(t,"FolderAddTwoTone",function(){return r["FolderAddTwoTone"]}),n.d(t,"FolderFilled",function(){return r["FolderFilled"]}),n.d(t,"FolderOpenFilled",function(){return r["FolderOpenFilled"]}),n.d(t,"FolderOpenOutlined",function(){return r["FolderOpenOutlined"]}),n.d(t,"FolderOpenTwoTone",function(){return r["FolderOpenTwoTone"]}),n.d(t,"FolderOutlined",function(){return r["FolderOutlined"]}),n.d(t,"FolderTwoTone",function(){return r["FolderTwoTone"]}),n.d(t,"FolderViewOutlined",function(){return r["FolderViewOutlined"]}),n.d(t,"FontColorsOutlined",function(){return r["FontColorsOutlined"]}),n.d(t,"FontSizeOutlined",function(){return r["FontSizeOutlined"]}),n.d(t,"ForkOutlined",function(){return r["ForkOutlined"]}),n.d(t,"FormOutlined",function(){return r["FormOutlined"]}),n.d(t,"FormatPainterFilled",function(){return r["FormatPainterFilled"]}),n.d(t,"FormatPainterOutlined",function(){return r["FormatPainterOutlined"]}),n.d(t,"ForwardFilled",function(){return r["ForwardFilled"]}),n.d(t,"ForwardOutlined",function(){return r["ForwardOutlined"]}),n.d(t,"FrownFilled",function(){return r["FrownFilled"]}),n.d(t,"FrownOutlined",function(){return r["FrownOutlined"]}),n.d(t,"FrownTwoTone",function(){return r["FrownTwoTone"]}),n.d(t,"FullscreenExitOutlined",function(){return r["FullscreenExitOutlined"]}),n.d(t,"FullscreenOutlined",function(){return r["FullscreenOutlined"]}),n.d(t,"FunctionOutlined",function(){return r["FunctionOutlined"]}),n.d(t,"FundFilled",function(){return r["FundFilled"]}),n.d(t,"FundOutlined",function(){return r["FundOutlined"]}),n.d(t,"FundProjectionScreenOutlined",function(){return r["FundProjectionScreenOutlined"]}),n.d(t,"FundTwoTone",function(){return r["FundTwoTone"]}),n.d(t,"FundViewOutlined",function(){return r["FundViewOutlined"]}),n.d(t,"FunnelPlotFilled",function(){return r["FunnelPlotFilled"]}),n.d(t,"FunnelPlotOutlined",function(){return r["FunnelPlotOutlined"]}),n.d(t,"FunnelPlotTwoTone",function(){return r["FunnelPlotTwoTone"]}),n.d(t,"GatewayOutlined",function(){return r["GatewayOutlined"]}),n.d(t,"GifOutlined",function(){return r["GifOutlined"]}),n.d(t,"GiftFilled",function(){return r["GiftFilled"]}),n.d(t,"GiftOutlined",function(){return r["GiftOutlined"]}),n.d(t,"GiftTwoTone",function(){return r["GiftTwoTone"]}),n.d(t,"GithubFilled",function(){return r["GithubFilled"]}),n.d(t,"GithubOutlined",function(){return r["GithubOutlined"]}),n.d(t,"GitlabFilled",function(){return r["GitlabFilled"]}),n.d(t,"GitlabOutlined",function(){return r["GitlabOutlined"]}),n.d(t,"GlobalOutlined",function(){return r["GlobalOutlined"]}),n.d(t,"GoldFilled",function(){return r["GoldFilled"]}),n.d(t,"GoldOutlined",function(){return r["GoldOutlined"]}),n.d(t,"GoldTwoTone",function(){return r["GoldTwoTone"]}),n.d(t,"GoldenFilled",function(){return r["GoldenFilled"]}),n.d(t,"GoogleCircleFilled",function(){return r["GoogleCircleFilled"]}),n.d(t,"GoogleOutlined",function(){return r["GoogleOutlined"]}),n.d(t,"GooglePlusCircleFilled",function(){return r["GooglePlusCircleFilled"]}),n.d(t,"GooglePlusOutlined",function(){return r["GooglePlusOutlined"]}),n.d(t,"GooglePlusSquareFilled",function(){return r["GooglePlusSquareFilled"]}),n.d(t,"GoogleSquareFilled",function(){return r["GoogleSquareFilled"]}),n.d(t,"GroupOutlined",function(){return r["GroupOutlined"]}),n.d(t,"HddFilled",function(){return r["HddFilled"]}),n.d(t,"HddOutlined",function(){return r["HddOutlined"]}),n.d(t,"HddTwoTone",function(){return r["HddTwoTone"]}),n.d(t,"HeartFilled",function(){return r["HeartFilled"]}),n.d(t,"HeartOutlined",function(){return r["HeartOutlined"]}),n.d(t,"HeartTwoTone",function(){return r["HeartTwoTone"]}),n.d(t,"HeatMapOutlined",function(){return r["HeatMapOutlined"]}),n.d(t,"HighlightFilled",function(){return r["HighlightFilled"]}),n.d(t,"HighlightOutlined",function(){return r["HighlightOutlined"]}),n.d(t,"HighlightTwoTone",function(){return r["HighlightTwoTone"]}),n.d(t,"HistoryOutlined",function(){return r["HistoryOutlined"]}),n.d(t,"HomeFilled",function(){return r["HomeFilled"]}),n.d(t,"HomeOutlined",function(){return r["HomeOutlined"]}),n.d(t,"HomeTwoTone",function(){return r["HomeTwoTone"]}),n.d(t,"HourglassFilled",function(){return r["HourglassFilled"]}),n.d(t,"HourglassOutlined",function(){return r["HourglassOutlined"]}),n.d(t,"HourglassTwoTone",function(){return r["HourglassTwoTone"]}),n.d(t,"Html5Filled",function(){return r["Html5Filled"]}),n.d(t,"Html5Outlined",function(){return r["Html5Outlined"]}),n.d(t,"Html5TwoTone",function(){return r["Html5TwoTone"]}),n.d(t,"IdcardFilled",function(){return r["IdcardFilled"]}),n.d(t,"IdcardOutlined",function(){return r["IdcardOutlined"]}),n.d(t,"IdcardTwoTone",function(){return r["IdcardTwoTone"]}),n.d(t,"IeCircleFilled",function(){return r["IeCircleFilled"]}),n.d(t,"IeOutlined",function(){return r["IeOutlined"]}),n.d(t,"IeSquareFilled",function(){return r["IeSquareFilled"]}),n.d(t,"ImportOutlined",function(){return r["ImportOutlined"]}),n.d(t,"InboxOutlined",function(){return r["InboxOutlined"]}),n.d(t,"InfoCircleFilled",function(){return r["InfoCircleFilled"]}),n.d(t,"InfoCircleOutlined",function(){return r["InfoCircleOutlined"]}),n.d(t,"InfoCircleTwoTone",function(){return r["InfoCircleTwoTone"]}),n.d(t,"InfoOutlined",function(){return r["InfoOutlined"]}),n.d(t,"InsertRowAboveOutlined",function(){return r["InsertRowAboveOutlined"]}),n.d(t,"InsertRowBelowOutlined",function(){return r["InsertRowBelowOutlined"]}),n.d(t,"InsertRowLeftOutlined",function(){return r["InsertRowLeftOutlined"]}),n.d(t,"InsertRowRightOutlined",function(){return r["InsertRowRightOutlined"]}),n.d(t,"InstagramFilled",function(){return r["InstagramFilled"]}),n.d(t,"InstagramOutlined",function(){return r["InstagramOutlined"]}),n.d(t,"InsuranceFilled",function(){return r["InsuranceFilled"]}),n.d(t,"InsuranceOutlined",function(){return r["InsuranceOutlined"]}),n.d(t,"InsuranceTwoTone",function(){return r["InsuranceTwoTone"]}),n.d(t,"InteractionFilled",function(){return r["InteractionFilled"]}),n.d(t,"InteractionOutlined",function(){return r["InteractionOutlined"]}),n.d(t,"InteractionTwoTone",function(){return r["InteractionTwoTone"]}),n.d(t,"IssuesCloseOutlined",function(){return r["IssuesCloseOutlined"]}),n.d(t,"ItalicOutlined",function(){return r["ItalicOutlined"]}),n.d(t,"KeyOutlined",function(){return r["KeyOutlined"]}),n.d(t,"LaptopOutlined",function(){return r["LaptopOutlined"]}),n.d(t,"LayoutFilled",function(){return r["LayoutFilled"]}),n.d(t,"LayoutOutlined",function(){return r["LayoutOutlined"]}),n.d(t,"LayoutTwoTone",function(){return r["LayoutTwoTone"]}),n.d(t,"LeftCircleFilled",function(){return r["LeftCircleFilled"]}),n.d(t,"LeftCircleOutlined",function(){return r["LeftCircleOutlined"]}),n.d(t,"LeftCircleTwoTone",function(){return r["LeftCircleTwoTone"]}),n.d(t,"LeftOutlined",function(){return r["LeftOutlined"]}),n.d(t,"LeftSquareFilled",function(){return r["LeftSquareFilled"]}),n.d(t,"LeftSquareOutlined",function(){return r["LeftSquareOutlined"]}),n.d(t,"LeftSquareTwoTone",function(){return r["LeftSquareTwoTone"]}),n.d(t,"LikeFilled",function(){return r["LikeFilled"]}),n.d(t,"LikeOutlined",function(){return r["LikeOutlined"]}),n.d(t,"LikeTwoTone",function(){return r["LikeTwoTone"]}),n.d(t,"LineChartOutlined",function(){return r["LineChartOutlined"]}),n.d(t,"LineHeightOutlined",function(){return r["LineHeightOutlined"]}),n.d(t,"LineOutlined",function(){return r["LineOutlined"]}),n.d(t,"LinkOutlined",function(){return r["LinkOutlined"]}),n.d(t,"LinkedinFilled",function(){return r["LinkedinFilled"]}),n.d(t,"LinkedinOutlined",function(){return r["LinkedinOutlined"]}),n.d(t,"Loading3QuartersOutlined",function(){return r["Loading3QuartersOutlined"]}),n.d(t,"LoadingOutlined",function(){return r["LoadingOutlined"]}),n.d(t,"LockFilled",function(){return r["LockFilled"]}),n.d(t,"LockOutlined",function(){return r["LockOutlined"]}),n.d(t,"LockTwoTone",function(){return r["LockTwoTone"]}),n.d(t,"LoginOutlined",function(){return r["LoginOutlined"]}),n.d(t,"LogoutOutlined",function(){return r["LogoutOutlined"]}),n.d(t,"MacCommandFilled",function(){return r["MacCommandFilled"]}),n.d(t,"MacCommandOutlined",function(){return r["MacCommandOutlined"]}),n.d(t,"MailFilled",function(){return r["MailFilled"]}),n.d(t,"MailOutlined",function(){return r["MailOutlined"]}),n.d(t,"MailTwoTone",function(){return r["MailTwoTone"]}),n.d(t,"ManOutlined",function(){return r["ManOutlined"]}),n.d(t,"MedicineBoxFilled",function(){return r["MedicineBoxFilled"]}),n.d(t,"MedicineBoxOutlined",function(){return r["MedicineBoxOutlined"]}),n.d(t,"MedicineBoxTwoTone",function(){return r["MedicineBoxTwoTone"]}),n.d(t,"MediumCircleFilled",function(){return r["MediumCircleFilled"]}),n.d(t,"MediumOutlined",function(){return r["MediumOutlined"]}),n.d(t,"MediumSquareFilled",function(){return r["MediumSquareFilled"]}),n.d(t,"MediumWorkmarkOutlined",function(){return r["MediumWorkmarkOutlined"]}),n.d(t,"MehFilled",function(){return r["MehFilled"]}),n.d(t,"MehOutlined",function(){return r["MehOutlined"]}),n.d(t,"MehTwoTone",function(){return r["MehTwoTone"]}),n.d(t,"MenuFoldOutlined",function(){return r["MenuFoldOutlined"]}),n.d(t,"MenuOutlined",function(){return r["MenuOutlined"]}),n.d(t,"MenuUnfoldOutlined",function(){return r["MenuUnfoldOutlined"]}),n.d(t,"MergeCellsOutlined",function(){return r["MergeCellsOutlined"]}),n.d(t,"MessageFilled",function(){return r["MessageFilled"]}),n.d(t,"MessageOutlined",function(){return r["MessageOutlined"]}),n.d(t,"MessageTwoTone",function(){return r["MessageTwoTone"]}),n.d(t,"MinusCircleFilled",function(){return r["MinusCircleFilled"]}),n.d(t,"MinusCircleOutlined",function(){return r["MinusCircleOutlined"]}),n.d(t,"MinusCircleTwoTone",function(){return r["MinusCircleTwoTone"]}),n.d(t,"MinusOutlined",function(){return r["MinusOutlined"]}),n.d(t,"MinusSquareFilled",function(){return r["MinusSquareFilled"]}),n.d(t,"MinusSquareOutlined",function(){return r["MinusSquareOutlined"]}),n.d(t,"MinusSquareTwoTone",function(){return r["MinusSquareTwoTone"]}),n.d(t,"MobileFilled",function(){return r["MobileFilled"]}),n.d(t,"MobileOutlined",function(){return r["MobileOutlined"]}),n.d(t,"MobileTwoTone",function(){return r["MobileTwoTone"]}),n.d(t,"MoneyCollectFilled",function(){return r["MoneyCollectFilled"]}),n.d(t,"MoneyCollectOutlined",function(){return r["MoneyCollectOutlined"]}),n.d(t,"MoneyCollectTwoTone",function(){return r["MoneyCollectTwoTone"]}),n.d(t,"MonitorOutlined",function(){return r["MonitorOutlined"]}),n.d(t,"MoreOutlined",function(){return r["MoreOutlined"]}),n.d(t,"NodeCollapseOutlined",function(){return r["NodeCollapseOutlined"]}),n.d(t,"NodeExpandOutlined",function(){return r["NodeExpandOutlined"]}),n.d(t,"NodeIndexOutlined",function(){return r["NodeIndexOutlined"]}),n.d(t,"NotificationFilled",function(){return r["NotificationFilled"]}),n.d(t,"NotificationOutlined",function(){return r["NotificationOutlined"]}),n.d(t,"NotificationTwoTone",function(){return r["NotificationTwoTone"]}),n.d(t,"NumberOutlined",function(){return r["NumberOutlined"]}),n.d(t,"OneToOneOutlined",function(){return r["OneToOneOutlined"]}),n.d(t,"OrderedListOutlined",function(){return r["OrderedListOutlined"]}),n.d(t,"PaperClipOutlined",function(){return r["PaperClipOutlined"]}),n.d(t,"PartitionOutlined",function(){return r["PartitionOutlined"]}),n.d(t,"PauseCircleFilled",function(){return r["PauseCircleFilled"]}),n.d(t,"PauseCircleOutlined",function(){return r["PauseCircleOutlined"]}),n.d(t,"PauseCircleTwoTone",function(){return r["PauseCircleTwoTone"]}),n.d(t,"PauseOutlined",function(){return r["PauseOutlined"]}),n.d(t,"PayCircleFilled",function(){return r["PayCircleFilled"]}),n.d(t,"PayCircleOutlined",function(){return r["PayCircleOutlined"]}),n.d(t,"PercentageOutlined",function(){return r["PercentageOutlined"]}),n.d(t,"PhoneFilled",function(){return r["PhoneFilled"]}),n.d(t,"PhoneOutlined",function(){return r["PhoneOutlined"]}),n.d(t,"PhoneTwoTone",function(){return r["PhoneTwoTone"]}),n.d(t,"PicCenterOutlined",function(){return r["PicCenterOutlined"]}),n.d(t,"PicLeftOutlined",function(){return r["PicLeftOutlined"]}),n.d(t,"PicRightOutlined",function(){return r["PicRightOutlined"]}),n.d(t,"PictureFilled",function(){return r["PictureFilled"]}),n.d(t,"PictureOutlined",function(){return r["PictureOutlined"]}),n.d(t,"PictureTwoTone",function(){return r["PictureTwoTone"]}),n.d(t,"PieChartFilled",function(){return r["PieChartFilled"]}),n.d(t,"PieChartOutlined",function(){return r["PieChartOutlined"]}),n.d(t,"PieChartTwoTone",function(){return r["PieChartTwoTone"]}),n.d(t,"PlayCircleFilled",function(){return r["PlayCircleFilled"]}),n.d(t,"PlayCircleOutlined",function(){return r["PlayCircleOutlined"]}),n.d(t,"PlayCircleTwoTone",function(){return r["PlayCircleTwoTone"]}),n.d(t,"PlaySquareFilled",function(){return r["PlaySquareFilled"]}),n.d(t,"PlaySquareOutlined",function(){return r["PlaySquareOutlined"]}),n.d(t,"PlaySquareTwoTone",function(){return r["PlaySquareTwoTone"]}),n.d(t,"PlusCircleFilled",function(){return r["PlusCircleFilled"]}),n.d(t,"PlusCircleOutlined",function(){return r["PlusCircleOutlined"]}),n.d(t,"PlusCircleTwoTone",function(){return r["PlusCircleTwoTone"]}),n.d(t,"PlusOutlined",function(){return r["PlusOutlined"]}),n.d(t,"PlusSquareFilled",function(){return r["PlusSquareFilled"]}),n.d(t,"PlusSquareOutlined",function(){return r["PlusSquareOutlined"]}),n.d(t,"PlusSquareTwoTone",function(){return r["PlusSquareTwoTone"]}),n.d(t,"PoundCircleFilled",function(){return r["PoundCircleFilled"]}),n.d(t,"PoundCircleOutlined",function(){return r["PoundCircleOutlined"]}),n.d(t,"PoundCircleTwoTone",function(){return r["PoundCircleTwoTone"]}),n.d(t,"PoundOutlined",function(){return r["PoundOutlined"]}),n.d(t,"PoweroffOutlined",function(){return r["PoweroffOutlined"]}),n.d(t,"PrinterFilled",function(){return r["PrinterFilled"]}),n.d(t,"PrinterOutlined",function(){return r["PrinterOutlined"]}),n.d(t,"PrinterTwoTone",function(){return r["PrinterTwoTone"]}),n.d(t,"ProfileFilled",function(){return r["ProfileFilled"]}),n.d(t,"ProfileOutlined",function(){return r["ProfileOutlined"]}),n.d(t,"ProfileTwoTone",function(){return r["ProfileTwoTone"]}),n.d(t,"ProjectFilled",function(){return r["ProjectFilled"]}),n.d(t,"ProjectOutlined",function(){return r["ProjectOutlined"]}),n.d(t,"ProjectTwoTone",function(){return r["ProjectTwoTone"]}),n.d(t,"PropertySafetyFilled",function(){return r["PropertySafetyFilled"]}),n.d(t,"PropertySafetyOutlined",function(){return r["PropertySafetyOutlined"]}),n.d(t,"PropertySafetyTwoTone",function(){return r["PropertySafetyTwoTone"]}),n.d(t,"PullRequestOutlined",function(){return r["PullRequestOutlined"]}),n.d(t,"PushpinFilled",function(){return r["PushpinFilled"]}),n.d(t,"PushpinOutlined",function(){return r["PushpinOutlined"]}),n.d(t,"PushpinTwoTone",function(){return r["PushpinTwoTone"]}),n.d(t,"QqCircleFilled",function(){return r["QqCircleFilled"]}),n.d(t,"QqOutlined",function(){return r["QqOutlined"]}),n.d(t,"QqSquareFilled",function(){return r["QqSquareFilled"]}),n.d(t,"QrcodeOutlined",function(){return r["QrcodeOutlined"]}),n.d(t,"QuestionCircleFilled",function(){return r["QuestionCircleFilled"]}),n.d(t,"QuestionCircleOutlined",function(){return r["QuestionCircleOutlined"]}),n.d(t,"QuestionCircleTwoTone",function(){return r["QuestionCircleTwoTone"]}),n.d(t,"QuestionOutlined",function(){return r["QuestionOutlined"]}),n.d(t,"RadarChartOutlined",function(){return r["RadarChartOutlined"]}),n.d(t,"RadiusBottomleftOutlined",function(){return r["RadiusBottomleftOutlined"]}),n.d(t,"RadiusBottomrightOutlined",function(){return r["RadiusBottomrightOutlined"]}),n.d(t,"RadiusSettingOutlined",function(){return r["RadiusSettingOutlined"]}),n.d(t,"RadiusUpleftOutlined",function(){return r["RadiusUpleftOutlined"]}),n.d(t,"RadiusUprightOutlined",function(){return r["RadiusUprightOutlined"]}),n.d(t,"ReadFilled",function(){return r["ReadFilled"]}),n.d(t,"ReadOutlined",function(){return r["ReadOutlined"]}),n.d(t,"ReconciliationFilled",function(){return r["ReconciliationFilled"]}),n.d(t,"ReconciliationOutlined",function(){return r["ReconciliationOutlined"]}),n.d(t,"ReconciliationTwoTone",function(){return r["ReconciliationTwoTone"]}),n.d(t,"RedEnvelopeFilled",function(){return r["RedEnvelopeFilled"]}),n.d(t,"RedEnvelopeOutlined",function(){return r["RedEnvelopeOutlined"]}),n.d(t,"RedEnvelopeTwoTone",function(){return r["RedEnvelopeTwoTone"]}),n.d(t,"RedditCircleFilled",function(){return r["RedditCircleFilled"]}),n.d(t,"RedditOutlined",function(){return r["RedditOutlined"]}),n.d(t,"RedditSquareFilled",function(){return r["RedditSquareFilled"]}),n.d(t,"RedoOutlined",function(){return r["RedoOutlined"]}),n.d(t,"ReloadOutlined",function(){return r["ReloadOutlined"]}),n.d(t,"RestFilled",function(){return r["RestFilled"]}),n.d(t,"RestOutlined",function(){return r["RestOutlined"]}),n.d(t,"RestTwoTone",function(){return r["RestTwoTone"]}),n.d(t,"RetweetOutlined",function(){return r["RetweetOutlined"]}),n.d(t,"RightCircleFilled",function(){return r["RightCircleFilled"]}),n.d(t,"RightCircleOutlined",function(){return r["RightCircleOutlined"]}),n.d(t,"RightCircleTwoTone",function(){return r["RightCircleTwoTone"]}),n.d(t,"RightOutlined",function(){return r["RightOutlined"]}),n.d(t,"RightSquareFilled",function(){return r["RightSquareFilled"]}),n.d(t,"RightSquareOutlined",function(){return r["RightSquareOutlined"]}),n.d(t,"RightSquareTwoTone",function(){return r["RightSquareTwoTone"]}),n.d(t,"RiseOutlined",function(){return r["RiseOutlined"]}),n.d(t,"RobotFilled",function(){return r["RobotFilled"]}),n.d(t,"RobotOutlined",function(){return r["RobotOutlined"]}),n.d(t,"RocketFilled",function(){return r["RocketFilled"]}),n.d(t,"RocketOutlined",function(){return r["RocketOutlined"]}),n.d(t,"RocketTwoTone",function(){return r["RocketTwoTone"]}),n.d(t,"RollbackOutlined",function(){return r["RollbackOutlined"]}),n.d(t,"RotateLeftOutlined",function(){return r["RotateLeftOutlined"]}),n.d(t,"RotateRightOutlined",function(){return r["RotateRightOutlined"]}),n.d(t,"SafetyCertificateFilled",function(){return r["SafetyCertificateFilled"]}),n.d(t,"SafetyCertificateOutlined",function(){return r["SafetyCertificateOutlined"]}),n.d(t,"SafetyCertificateTwoTone",function(){return r["SafetyCertificateTwoTone"]}),n.d(t,"SafetyOutlined",function(){return r["SafetyOutlined"]}),n.d(t,"SaveFilled",function(){return r["SaveFilled"]}),n.d(t,"SaveOutlined",function(){return r["SaveOutlined"]}),n.d(t,"SaveTwoTone",function(){return r["SaveTwoTone"]}),n.d(t,"ScanOutlined",function(){return r["ScanOutlined"]}),n.d(t,"ScheduleFilled",function(){return r["ScheduleFilled"]}),n.d(t,"ScheduleOutlined",function(){return r["ScheduleOutlined"]}),n.d(t,"ScheduleTwoTone",function(){return r["ScheduleTwoTone"]}),n.d(t,"ScissorOutlined",function(){return r["ScissorOutlined"]}),n.d(t,"SearchOutlined",function(){return r["SearchOutlined"]}),n.d(t,"SecurityScanFilled",function(){return r["SecurityScanFilled"]}),n.d(t,"SecurityScanOutlined",function(){return r["SecurityScanOutlined"]}),n.d(t,"SecurityScanTwoTone",function(){return r["SecurityScanTwoTone"]}),n.d(t,"SelectOutlined",function(){return r["SelectOutlined"]}),n.d(t,"SendOutlined",function(){return r["SendOutlined"]}),n.d(t,"SettingFilled",function(){return r["SettingFilled"]}),n.d(t,"SettingOutlined",function(){return r["SettingOutlined"]}),n.d(t,"SettingTwoTone",function(){return r["SettingTwoTone"]}),n.d(t,"ShakeOutlined",function(){return r["ShakeOutlined"]}),n.d(t,"ShareAltOutlined",function(){return r["ShareAltOutlined"]}),n.d(t,"ShopFilled",function(){return r["ShopFilled"]}),n.d(t,"ShopOutlined",function(){return r["ShopOutlined"]}),n.d(t,"ShopTwoTone",function(){return r["ShopTwoTone"]}),n.d(t,"ShoppingCartOutlined",function(){return r["ShoppingCartOutlined"]}),n.d(t,"ShoppingFilled",function(){return r["ShoppingFilled"]}),n.d(t,"ShoppingOutlined",function(){return r["ShoppingOutlined"]}),n.d(t,"ShoppingTwoTone",function(){return r["ShoppingTwoTone"]}),n.d(t,"ShrinkOutlined",function(){return r["ShrinkOutlined"]}),n.d(t,"SignalFilled",function(){return r["SignalFilled"]}),n.d(t,"SisternodeOutlined",function(){return r["SisternodeOutlined"]}),n.d(t,"SketchCircleFilled",function(){return r["SketchCircleFilled"]}),n.d(t,"SketchOutlined",function(){return r["SketchOutlined"]}),n.d(t,"SketchSquareFilled",function(){return r["SketchSquareFilled"]}),n.d(t,"SkinFilled",function(){return r["SkinFilled"]}),n.d(t,"SkinOutlined",function(){return r["SkinOutlined"]}),n.d(t,"SkinTwoTone",function(){return r["SkinTwoTone"]}),n.d(t,"SkypeFilled",function(){return r["SkypeFilled"]}),n.d(t,"SkypeOutlined",function(){return r["SkypeOutlined"]}),n.d(t,"SlackCircleFilled",function(){return r["SlackCircleFilled"]}),n.d(t,"SlackOutlined",function(){return r["SlackOutlined"]}),n.d(t,"SlackSquareFilled",function(){return r["SlackSquareFilled"]}),n.d(t,"SlackSquareOutlined",function(){return r["SlackSquareOutlined"]}),n.d(t,"SlidersFilled",function(){return r["SlidersFilled"]}),n.d(t,"SlidersOutlined",function(){return r["SlidersOutlined"]}),n.d(t,"SlidersTwoTone",function(){return r["SlidersTwoTone"]}),n.d(t,"SmallDashOutlined",function(){return r["SmallDashOutlined"]}),n.d(t,"SmileFilled",function(){return r["SmileFilled"]}),n.d(t,"SmileOutlined",function(){return r["SmileOutlined"]}),n.d(t,"SmileTwoTone",function(){return r["SmileTwoTone"]}),n.d(t,"SnippetsFilled",function(){return r["SnippetsFilled"]}),n.d(t,"SnippetsOutlined",function(){return r["SnippetsOutlined"]}),n.d(t,"SnippetsTwoTone",function(){return r["SnippetsTwoTone"]}),n.d(t,"SolutionOutlined",function(){return r["SolutionOutlined"]}),n.d(t,"SortAscendingOutlined",function(){return r["SortAscendingOutlined"]}),n.d(t,"SortDescendingOutlined",function(){return r["SortDescendingOutlined"]}),n.d(t,"SoundFilled",function(){return r["SoundFilled"]}),n.d(t,"SoundOutlined",function(){return r["SoundOutlined"]}),n.d(t,"SoundTwoTone",function(){return r["SoundTwoTone"]}),n.d(t,"SplitCellsOutlined",function(){return r["SplitCellsOutlined"]}),n.d(t,"StarFilled",function(){return r["StarFilled"]}),n.d(t,"StarOutlined",function(){return r["StarOutlined"]}),n.d(t,"StarTwoTone",function(){return r["StarTwoTone"]}),n.d(t,"StepBackwardFilled",function(){return r["StepBackwardFilled"]}),n.d(t,"StepBackwardOutlined",function(){return r["StepBackwardOutlined"]}),n.d(t,"StepForwardFilled",function(){return r["StepForwardFilled"]}),n.d(t,"StepForwardOutlined",function(){return r["StepForwardOutlined"]}),n.d(t,"StockOutlined",function(){return r["StockOutlined"]}),n.d(t,"StopFilled",function(){return r["StopFilled"]}),n.d(t,"StopOutlined",function(){return r["StopOutlined"]}),n.d(t,"StopTwoTone",function(){return r["StopTwoTone"]}),n.d(t,"StrikethroughOutlined",function(){return r["StrikethroughOutlined"]}),n.d(t,"SubnodeOutlined",function(){return r["SubnodeOutlined"]}),n.d(t,"SwapLeftOutlined",function(){return r["SwapLeftOutlined"]}),n.d(t,"SwapOutlined",function(){return r["SwapOutlined"]}),n.d(t,"SwapRightOutlined",function(){return r["SwapRightOutlined"]}),n.d(t,"SwitcherFilled",function(){return r["SwitcherFilled"]}),n.d(t,"SwitcherOutlined",function(){return r["SwitcherOutlined"]}),n.d(t,"SwitcherTwoTone",function(){return r["SwitcherTwoTone"]}),n.d(t,"SyncOutlined",function(){return r["SyncOutlined"]}),n.d(t,"TableOutlined",function(){return r["TableOutlined"]}),n.d(t,"TabletFilled",function(){return r["TabletFilled"]}),n.d(t,"TabletOutlined",function(){return r["TabletOutlined"]}),n.d(t,"TabletTwoTone",function(){return r["TabletTwoTone"]}),n.d(t,"TagFilled",function(){return r["TagFilled"]}),n.d(t,"TagOutlined",function(){return r["TagOutlined"]}),n.d(t,"TagTwoTone",function(){return r["TagTwoTone"]}),n.d(t,"TagsFilled",function(){return r["TagsFilled"]}),n.d(t,"TagsOutlined",function(){return r["TagsOutlined"]}),n.d(t,"TagsTwoTone",function(){return r["TagsTwoTone"]}),n.d(t,"TaobaoCircleFilled",function(){return r["TaobaoCircleFilled"]}),n.d(t,"TaobaoCircleOutlined",function(){return r["TaobaoCircleOutlined"]}),n.d(t,"TaobaoOutlined",function(){return r["TaobaoOutlined"]}),n.d(t,"TaobaoSquareFilled",function(){return r["TaobaoSquareFilled"]}),n.d(t,"TeamOutlined",function(){return r["TeamOutlined"]}),n.d(t,"ThunderboltFilled",function(){return r["ThunderboltFilled"]}),n.d(t,"ThunderboltOutlined",function(){return r["ThunderboltOutlined"]}),n.d(t,"ThunderboltTwoTone",function(){return r["ThunderboltTwoTone"]}),n.d(t,"ToTopOutlined",function(){return r["ToTopOutlined"]}),n.d(t,"ToolFilled",function(){return r["ToolFilled"]}),n.d(t,"ToolOutlined",function(){return r["ToolOutlined"]}),n.d(t,"ToolTwoTone",function(){return r["ToolTwoTone"]}),n.d(t,"TrademarkCircleFilled",function(){return r["TrademarkCircleFilled"]}),n.d(t,"TrademarkCircleOutlined",function(){return r["TrademarkCircleOutlined"]}),n.d(t,"TrademarkCircleTwoTone",function(){return r["TrademarkCircleTwoTone"]}),n.d(t,"TrademarkOutlined",function(){return r["TrademarkOutlined"]}),n.d(t,"TransactionOutlined",function(){return r["TransactionOutlined"]}),n.d(t,"TranslationOutlined",function(){return r["TranslationOutlined"]}),n.d(t,"TrophyFilled",function(){return r["TrophyFilled"]}),n.d(t,"TrophyOutlined",function(){return r["TrophyOutlined"]}),n.d(t,"TrophyTwoTone",function(){return r["TrophyTwoTone"]}),n.d(t,"TwitterCircleFilled",function(){return r["TwitterCircleFilled"]}),n.d(t,"TwitterOutlined",function(){return r["TwitterOutlined"]}),n.d(t,"TwitterSquareFilled",function(){return r["TwitterSquareFilled"]}),n.d(t,"UnderlineOutlined",function(){return r["UnderlineOutlined"]}),n.d(t,"UndoOutlined",function(){return r["UndoOutlined"]}),n.d(t,"UngroupOutlined",function(){return r["UngroupOutlined"]}),n.d(t,"UnlockFilled",function(){return r["UnlockFilled"]}),n.d(t,"UnlockOutlined",function(){return r["UnlockOutlined"]}),n.d(t,"UnlockTwoTone",function(){return r["UnlockTwoTone"]}),n.d(t,"UnorderedListOutlined",function(){return r["UnorderedListOutlined"]}),n.d(t,"UpCircleFilled",function(){return r["UpCircleFilled"]}),n.d(t,"UpCircleOutlined",function(){return r["UpCircleOutlined"]}),n.d(t,"UpCircleTwoTone",function(){return r["UpCircleTwoTone"]}),n.d(t,"UpOutlined",function(){return r["UpOutlined"]}),n.d(t,"UpSquareFilled",function(){return r["UpSquareFilled"]}),n.d(t,"UpSquareOutlined",function(){return r["UpSquareOutlined"]}),n.d(t,"UpSquareTwoTone",function(){return r["UpSquareTwoTone"]}),n.d(t,"UploadOutlined",function(){return r["UploadOutlined"]}),n.d(t,"UsbFilled",function(){return r["UsbFilled"]}),n.d(t,"UsbOutlined",function(){return r["UsbOutlined"]}),n.d(t,"UsbTwoTone",function(){return r["UsbTwoTone"]}),n.d(t,"UserAddOutlined",function(){return r["UserAddOutlined"]}),n.d(t,"UserDeleteOutlined",function(){return r["UserDeleteOutlined"]}),n.d(t,"UserOutlined",function(){return r["UserOutlined"]}),n.d(t,"UserSwitchOutlined",function(){return r["UserSwitchOutlined"]}),n.d(t,"UsergroupAddOutlined",function(){return r["UsergroupAddOutlined"]}),n.d(t,"UsergroupDeleteOutlined",function(){return r["UsergroupDeleteOutlined"]}),n.d(t,"VerifiedOutlined",function(){return r["VerifiedOutlined"]}),n.d(t,"VerticalAlignBottomOutlined",function(){return r["VerticalAlignBottomOutlined"]}),n.d(t,"VerticalAlignMiddleOutlined",function(){return r["VerticalAlignMiddleOutlined"]}),n.d(t,"VerticalAlignTopOutlined",function(){return r["VerticalAlignTopOutlined"]}),n.d(t,"VerticalLeftOutlined",function(){return r["VerticalLeftOutlined"]}),n.d(t,"VerticalRightOutlined",function(){return r["VerticalRightOutlined"]}),n.d(t,"VideoCameraAddOutlined",function(){return r["VideoCameraAddOutlined"]}),n.d(t,"VideoCameraFilled",function(){return r["VideoCameraFilled"]}),n.d(t,"VideoCameraOutlined",function(){return r["VideoCameraOutlined"]}),n.d(t,"VideoCameraTwoTone",function(){return r["VideoCameraTwoTone"]}),n.d(t,"WalletFilled",function(){return r["WalletFilled"]}),n.d(t,"WalletOutlined",function(){return r["WalletOutlined"]}),n.d(t,"WalletTwoTone",function(){return r["WalletTwoTone"]}),n.d(t,"WarningFilled",function(){return r["WarningFilled"]}),n.d(t,"WarningOutlined",function(){return r["WarningOutlined"]}),n.d(t,"WarningTwoTone",function(){return r["WarningTwoTone"]}),n.d(t,"WechatFilled",function(){return r["WechatFilled"]}),n.d(t,"WechatOutlined",function(){return r["WechatOutlined"]}),n.d(t,"WeiboCircleFilled",function(){return r["WeiboCircleFilled"]}),n.d(t,"WeiboCircleOutlined",function(){return r["WeiboCircleOutlined"]}),n.d(t,"WeiboOutlined",function(){return r["WeiboOutlined"]}),n.d(t,"WeiboSquareFilled",function(){return r["WeiboSquareFilled"]}),n.d(t,"WeiboSquareOutlined",function(){return r["WeiboSquareOutlined"]}),n.d(t,"WhatsAppOutlined",function(){return r["WhatsAppOutlined"]}),n.d(t,"WifiOutlined",function(){return r["WifiOutlined"]}),n.d(t,"WindowsFilled",function(){return r["WindowsFilled"]}),n.d(t,"WindowsOutlined",function(){return r["WindowsOutlined"]}),n.d(t,"WomanOutlined",function(){return r["WomanOutlined"]}),n.d(t,"YahooFilled",function(){return r["YahooFilled"]}),n.d(t,"YahooOutlined",function(){return r["YahooOutlined"]}),n.d(t,"YoutubeFilled",function(){return r["YoutubeFilled"]}),n.d(t,"YoutubeOutlined",function(){return r["YoutubeOutlined"]}),n.d(t,"YuqueFilled",function(){return r["YuqueFilled"]}),n.d(t,"YuqueOutlined",function(){return r["YuqueOutlined"]}),n.d(t,"ZhihuCircleFilled",function(){return r["ZhihuCircleFilled"]}),n.d(t,"ZhihuOutlined",function(){return r["ZhihuOutlined"]}),n.d(t,"ZhihuSquareFilled",function(){return r["ZhihuSquareFilled"]}),n.d(t,"ZoomInOutlined",function(){return r["ZoomInOutlined"]}),n.d(t,"ZoomOutOutlined",function(){return r["ZoomOutOutlined"]});var i=n("xc4C");n.d(t,"setTwoToneColor",function(){return i["b"]}),n.d(t,"getTwoToneColor",function(){return i["a"]});var o=n("R+Pm");n.d(t,"createFromIconfontCN",function(){return o["a"]});var a=n("8ub7");n.d(t,"default",function(){return a["a"]})},bQlE:function(e,t,n){"use strict";function r(e){return e&&"object"===typeof e&&"default"in e?e["default"]:e}Object.defineProperty(t,"__esModule",{value:!0});var i=r(n("wj3C"));n("fSjL");var o,a,s,u,c=n("mrSG"),l=n("zVF4"),d=n("q/0M"),h=n("S+S0"),f="0.2.27",p=f,m="FB-PERF-TRACE-START",g="FB-PERF-TRACE-STOP",y="FB-PERF-TRACE-MEASURE",v="_wt_",w="_fp",b="_fcp",T="_fid",S="@firebase/performance/config",E="@firebase/performance/configexpire",C="performance",O="Performance",_=(o={},o["trace started"]="Trace {$traceName} was started before.",o["trace stopped"]="Trace {$traceName} is not running.",o["no window"]="Window is not available.",o["no app id"]="App id is not available.",o["no project id"]="Project id is not available.",o["no api key"]="Api key is not available.",o["invalid cc log"]="Attempted to queue invalid cc event",o["FB not default"]="Performance can only start when Firebase app instance is the default one.",o["RC response not ok"]="RC response is not ok",o["invalid attribute name"]="Attribute name {$attributeName} is invalid.",o["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",o["invalide custom metric name"]="Custom metric name {$customMetricName} is invalid",o),I=new l.ErrorFactory(C,O,_),k=function(){function e(e){if(!e)throw I.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}return e.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},e.prototype.mark=function(e){this.performance&&this.performance.mark&&this.performance.mark(e)},e.prototype.measure=function(e,t,n){this.performance&&this.performance.measure&&this.performance.measure(e,t,n)},e.prototype.getEntriesByType=function(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]},e.prototype.getEntriesByName=function(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]},e.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},e.prototype.requiredApisAvailable=function(){return!!(fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled)},e.prototype.setupObserver=function(e,t){if(this.PerformanceObserver){var n=new this.PerformanceObserver(function(e){for(var n=0,r=e.getEntries();n<r.length;n++){var i=r[n];t(i)}});n.observe({entryTypes:[e]})}},e.getInstance=function(){return void 0===a&&(a=new e(s)),a},e}();function D(e){s=e}var A,F,M=function(){function e(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return e.prototype.getAppId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!e)throw I.create("no app id");return e},e.prototype.getProjectId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!e)throw I.create("no project id");return e},e.prototype.getApiKey=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!e)throw I.create("no api key");return e},e.getInstance=function(){return void 0===u&&(u=new e),u},e}();function N(){var e=M.getInstance().installationsService.getId();return e.then(function(e){A=e}),e}function R(){return A}function L(){var e=M.getInstance().installationsService.getToken();return e.then(function(e){}),e}(function(e){e[e["UNKNOWN"]=0]="UNKNOWN",e[e["VISIBLE"]=1]="VISIBLE",e[e["HIDDEN"]=2]="HIDDEN"})(F||(F={}));var P=["firebase_","google_","ga_"],x=new RegExp("^[a-zA-Z]\\w*$"),B=40,q=100;function U(){var e=k.getInstance().navigator;return"serviceWorker"in e?e.serviceWorker.controller?2:3:1}function V(){var e=k.getInstance().document,t=e.visibilityState;switch(t){case"visible":return F.VISIBLE;case"hidden":return F.HIDDEN;default:return F.UNKNOWN}}function j(){var e=k.getInstance().navigator,t=e.connection,n=t&&t.effectiveType;switch(n){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function W(e){if(0===e.length||e.length>B)return!1;var t=P.some(function(t){return e.startsWith(t)});return!t&&!!e.match(x)}function K(e){return 0!==e.length&&e.length<=q}var G=new d.Logger(O);G.logLevel=d.LogLevel.INFO;var z="0.0.1",Q={loggingEnabled:!0},H="FIREBASE_INSTALLATIONS_AUTH";function Y(e){var t=J();return t?(ee(t),Promise.resolve()):Z(e).then(function(e){return ee(e)}).then(function(e){return X(e)},function(){})}function J(){var e=k.getInstance().localStorage,t=e.getItem(E);if(t&&te(t)){var n=e.getItem(S);if(n)try{var r=JSON.parse(n);return r}catch(e){return}}}function X(e){if(e){var t=k.getInstance().localStorage;t.setItem(S,JSON.stringify(e)),t.setItem(E,String(Date.now()+60*M.getInstance().configTimeToLive*60*1e3))}}var $="Could not fetch config, will use default configs";function Z(e){return L().then(function(t){var n=M.getInstance().getProjectId(),r="https://firebaseremoteconfig.googleapis.com/v1/projects/"+n+"/namespaces/fireperf:fetch?key="+M.getInstance().getApiKey(),i=new Request(r,{method:"POST",headers:{Authorization:H+" "+t},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:M.getInstance().getAppId(),app_version:p,sdk_version:z})});return fetch(i).then(function(e){if(e.ok)return e.json();throw I.create("RC response not ok")})}).catch(function(){G.info($)})}function ee(e){if(!e)return e;var t=M.getInstance(),n=e.entries||{};return void 0!==n.fpr_enabled?t.loggingEnabled="true"===String(n.fpr_enabled):t.loggingEnabled=Q.loggingEnabled,n.fpr_log_source&&(t.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(t.logEndPointUrl=n.fpr_log_endpoint_url),void 0!==n.fpr_vc_network_request_sampling_rate&&(t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),t.logTraceAfterSampling=ne(t.tracesSamplingRate),t.logNetworkAfterSampling=ne(t.networkRequestsSamplingRate),e}function te(e){return Number(e)>Date.now()}function ne(e){return Math.random()<=e}var re,ie=1;function oe(){return ie=2,re=re||se(),re}function ae(){return 3===ie}function se(){return ue().then(function(){return N()}).then(function(e){return Y(e)}).then(function(){return ce()},function(){return ce()})}function ue(){var e=k.getInstance().document;return new Promise(function(t){if(e&&"complete"!==e.readyState){var n=function(){"complete"===e.readyState&&(e.removeEventListener("readystatechange",n),t())};e.addEventListener("readystatechange",n)}else t()})}function ce(){ie=3}var le,de=1e4,he=5500,fe=3,pe=fe,me=[];function ge(e){setTimeout(function(){if(0!==pe){if(!me.length)return ge(de);var e=c.__spreadArrays(me);me=[];var t=e.map(function(e){return{source_extension_json:e.message,event_time_ms:String(e.eventTime)}}),n={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:M.getInstance().logSource,log_event:t};fetch(M.getInstance().logEndPointUrl,{method:"POST",body:JSON.stringify(n)}).then(function(e){return e.ok||G.info("Call to Firebase backend failed."),e.json()}).then(function(e){var t=Number(e.next_request_wait_millis),n=isNaN(t)?de:Math.max(de,t);pe=fe,ge(n)}).catch(function(){me=c.__spreadArrays(e,me),pe--,G.info("Tries left: "+pe+"."),ge(de)})}},e)}function ye(e){if(!e.eventTime||!e.message)throw I.create("invalid cc log");me=c.__spreadArrays(me,[e])}function ve(e){return function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o=e.apply(void 0,r);ye({message:o,eventTime:Date.now()})}}function we(){if(le)return le;var e=ve(Ee);return le=new d.Logger("@firebase/performance/cc"),le.logHandler=e,le}function be(e){var t=M.getInstance();!t.instrumentationEnabled&&e.isAuto||(t.dataCollectionEnabled||e.isAuto)&&k.getInstance().requiredApisAvailable()&&(e.isAuto&&V()!==F.VISIBLE||t.loggingEnabled&&t.logTraceAfterSampling&&(ae()?Te(e):oe().then(function(){return Te(e)},function(){return Te(e)})))}function Te(e){R()&&setTimeout(function(){return we().log(e,1)},0)}function Se(e){var t=M.getInstance();t.instrumentationEnabled&&e.url!==t.logEndPointUrl.split("?")[0]&&t.loggingEnabled&&t.logNetworkAfterSampling&&setTimeout(function(){return we().log(e,0)},0)}function Ee(e,t){return 0===t?Ce(e):Oe(e)}function Ce(e){var t={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},n={application_info:_e(),network_request_metric:t};return JSON.stringify(n)}function Oe(e){var t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};0!==Object.keys(e.counters).length&&(t.counters=Ie(e.counters));var n=e.getAttributes();0!==Object.keys(n).length&&(t.custom_attributes=Ie(n));var r={application_info:_e(),trace_metric:t};return JSON.stringify(r)}function _e(){return{google_app_id:M.getInstance().getAppId(),app_instance_id:R(),web_app_info:{sdk_version:p,page_url:k.getInstance().getUrl(),service_worker_status:U(),visibility_state:V(),effective_connection_type:j()},application_process_state:0}}function Ie(e){var t=Object.keys(e);return t.map(function(t){return{key:t,value:e[t]}})}ge(he);var ke=100,De="_",Ae=[w,b,T];function Fe(e,t){return!(0===e.length||e.length>ke)&&(t&&t.startsWith(v)&&Ae.indexOf(e)>-1||!e.startsWith(De))}var Me=function(){function e(e,t,n){void 0===t&&(t=!1),this.name=e,this.isAuto=t,this.state=1,this.customAttributes={},this.counters={},this.api=k.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=m+"-"+this.randomId+"-"+this.name,this.traceStopMark=g+"-"+this.randomId+"-"+this.name,this.traceMeasure=n||y+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return e.prototype.start=function(){if(1!==this.state)throw I.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},e.prototype.stop=function(){if(2!==this.state)throw I.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),be(this)},e.prototype.record=function(e,t,n){if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),n&&n.attributes&&(this.customAttributes=c.__assign({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}be(this)},e.prototype.incrementMetric=function(e,t){void 0===t&&(t=1),void 0===this.counters[e]&&this.putMetric(e,0),this.counters[e]+=t},e.prototype.putMetric=function(e,t){if(!Fe(e,this.name))throw I.create("invalide custom metric name",{customMetricName:e});this.counters[e]=t},e.prototype.getMetric=function(e){return this.counters[e]||0},e.prototype.putAttribute=function(e,t){var n=W(e),r=K(t);if(n&&r)this.customAttributes[e]=t;else{if(!n)throw I.create("invalid attribute name",{attributeName:e});if(!r)throw I.create("invalid attribute value",{attributeValue:t})}},e.prototype.getAttribute=function(e){return this.customAttributes[e]},e.prototype.removeAttribute=function(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]},e.prototype.getAttributes=function(){return c.__assign({},this.customAttributes)},e.prototype.setStartTime=function(e){this.startTimeUs=e},e.prototype.setDuration=function(e){this.durationUs=e},e.prototype.calculateTraceMetrics=function(){var e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))},e.createOobTrace=function(t,n,r){var i=k.getInstance().getUrl();if(i){var o=new e(v+i,!0),a=Math.floor(1e3*k.getInstance().getTimeOrigin());o.setStartTime(a),t&&t[0]&&(o.setDuration(Math.floor(1e3*t[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd)));var s="first-paint",u="first-contentful-paint";if(n){var c=n.find(function(e){return e.name===s});c&&c.startTime&&o.putMetric(w,Math.floor(1e3*c.startTime));var l=n.find(function(e){return e.name===u});l&&l.startTime&&o.putMetric(b,Math.floor(1e3*l.startTime)),r&&o.putMetric(T,Math.floor(1e3*r))}be(o)}},e.createUserTimingTrace=function(t){var n=new e(t,!1,t);be(n)},e}();function Ne(e){var t=e;if(t&&void 0!==t.responseStart){var n=k.getInstance().getTimeOrigin(),r=Math.floor(1e3*(t.startTime+n)),i=t.responseStart?Math.floor(1e3*(t.responseStart-t.startTime)):void 0,o=Math.floor(1e3*(t.responseEnd-t.startTime)),a=t.name&&t.name.split("?")[0],s={url:a,responsePayloadBytes:t.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o};Se(s)}}var Re=5e3;function Le(){R()&&(setTimeout(function(){return xe()},0),setTimeout(function(){return Pe()},0),setTimeout(function(){return Be()},0))}function Pe(){for(var e=k.getInstance(),t=e.getEntriesByType("resource"),n=0,r=t;n<r.length;n++){var i=r[n];Ne(i)}e.setupObserver("resource",Ne)}function xe(){var e=k.getInstance(),t=e.getEntriesByType("navigation"),n=e.getEntriesByType("paint");if(e.onFirstInputDelay){var r=setTimeout(function(){Me.createOobTrace(t,n),r=void 0},Re);e.onFirstInputDelay(function(e){r&&(clearTimeout(r),Me.createOobTrace(t,n,e))})}else Me.createOobTrace(t,n)}function Be(){for(var e=k.getInstance(),t=e.getEntriesByType("measure"),n=0,r=t;n<r.length;n++){var i=r[n];qe(i)}e.setupObserver("measure",qe)}function qe(e){var t=e.name;t.substring(0,y.length)!==y&&Me.createUserTimingTrace(t)}var Ue=function(){function e(e){this.app=e,k.getInstance().requiredApisAvailable()?oe().then(Le,Le):G.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled.")}return e.prototype.trace=function(e){return new Me(e)},Object.defineProperty(e.prototype,"instrumentationEnabled",{get:function(){return M.getInstance().instrumentationEnabled},set:function(e){M.getInstance().instrumentationEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataCollectionEnabled",{get:function(){return M.getInstance().dataCollectionEnabled},set:function(e){M.getInstance().dataCollectionEnabled=e},enumerable:!0,configurable:!0}),e}(),Ve="[DEFAULT]";function je(e){var t=function(e,t){if(e.name!==Ve)throw I.create("FB not default");if("undefined"===typeof window)throw I.create("no window");return D(window),M.getInstance().firebaseAppInstance=e,M.getInstance().installationsService=t,new Ue(e)};e.INTERNAL.registerComponent(new h.Component("performance",function(e){var n=e.getProvider("app").getImmediate(),r=e.getProvider("installations").getImmediate();return t(n,r)},"PUBLIC"))}je(i),t.registerPerformance=je},fSjL:function(e,t,n){"use strict";n.r(t),n.d(t,"registerInstallations",function(){return ve});var r,i=n("wj3C"),o=n.n(i),a=n("mrSG"),s=n("zVF4"),u=n("nbvr"),c=n("S+S0"),l="0.3.7",d=1e4,h="w:"+l,f="FIS_v2",p="https://firebaseinstallations.googleapis.com/v1",m=36e5,g="installations",y="Installations",v=(r={},r["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',r["not-registered"]="Firebase Installation is not registered.",r["installation-not-found"]="Firebase Installation not found.",r["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',r["app-offline"]="Could not process request. Application offline.",r["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",r),w=new s["ErrorFactory"](g,y,v);function b(e){return e instanceof s["FirebaseError"]&&e.code.includes("request-failed")}function T(e){var t,n;if(!e||!e.options)throw S("App Configuration");if(!e.name)throw S("App Name");var r=["projectId","apiKey","appId"];try{for(var i=Object(a["__values"])(r),o=i.next();!o.done;o=i.next()){var s=o.value;if(!e.options[s])throw S(s)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function S(e){return w.create("missing-app-config-values",{valueName:e})}function E(e){var t=e.projectId;return p+"/projects/"+t+"/installations"}function C(e){return{token:e.token,requestStatus:2,expiresIn:D(e.expiresIn),creationTime:Date.now()}}function O(e,t){return Object(a["__awaiter"])(this,void 0,void 0,function(){var n,r;return Object(a["__generator"])(this,function(i){switch(i.label){case 0:return[4,t.json()];case 1:return n=i.sent(),r=n.error,[2,w.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}})})}function _(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function I(e,t){var n=t.refreshToken,r=_(e);return r.append("Authorization",A(n)),r}function k(e){return Object(a["__awaiter"])(this,void 0,void 0,function(){var t;return Object(a["__generator"])(this,function(n){switch(n.label){case 0:return[4,e()];case 1:return t=n.sent(),t.status>=500&&t.status<600?[2,e()]:[2,t]}})})}function D(e){return Number(e.replace("s","000"))}function A(e){return f+" "+e}function F(e,t){var n=t.fid;return Object(a["__awaiter"])(this,void 0,void 0,function(){var t,r,i,o,s,u,c;return Object(a["__generator"])(this,function(a){switch(a.label){case 0:return t=E(e),r=_(e),i={fid:n,authVersion:f,appId:e.appId,sdkVersion:h},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,k(function(){return fetch(t,o)})];case 1:return s=a.sent(),s.ok?[4,s.json()]:[3,3];case 2:return u=a.sent(),c={fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:C(u.authToken)},[2,c];case 3:return[4,O("Create Installation",s)];case 4:throw a.sent()}})})}function M(e){return new Promise(function(t){setTimeout(t,e)})}function N(e){var t=btoa(String.fromCharCode.apply(String,Object(a["__spread"])(e)));return t.replace(/\+/g,"-").replace(/\//g,"_")}var R=/^[cdef][\w-]{21}$/,L="";function P(){try{var e=new Uint8Array(17),t=self.crypto||self.msCrypto;t.getRandomValues(e),e[0]=112+e[0]%16;var n=x(e);return R.test(n)?n:L}catch(e){return L}}function x(e){var t=N(e);return t.substr(0,22)}var B="firebase-installations-database",q=1,U="firebase-installations-store",V=null;function j(){return V||(V=Object(u["openDb"])(B,q,function(e){switch(e.oldVersion){case 0:e.createObjectStore(U)}})),V}function W(e,t){return Object(a["__awaiter"])(this,void 0,void 0,function(){var n,r,i;return Object(a["__generator"])(this,function(o){switch(o.label){case 0:return n=z(e),[4,j()];case 1:return r=o.sent(),i=r.transaction(U,"readwrite"),[4,i.objectStore(U).put(t,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,t]}})})}function K(e){return Object(a["__awaiter"])(this,void 0,void 0,function(){var t,n,r;return Object(a["__generator"])(this,function(i){switch(i.label){case 0:return t=z(e),[4,j()];case 1:return n=i.sent(),r=n.transaction(U,"readwrite"),[4,r.objectStore(U).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function G(e,t){return Object(a["__awaiter"])(this,void 0,void 0,function(){var n,r,i,o,s,u;return Object(a["__generator"])(this,function(a){switch(a.label){case 0:return n=z(e),[4,j()];case 1:return r=a.sent(),i=r.transaction(U,"readwrite"),o=i.objectStore(U),[4,o.get(n)];case 2:return s=a.sent(),u=t(s),void 0!==u?[3,4]:[4,o.delete(n)];case 3:return a.sent(),[3,6];case 4:return[4,o.put(u,n)];case 5:a.sent(),a.label=6;case 6:return[4,i.complete];case 7:return a.sent(),[2,u]}})})}function z(e){return e.appName+"!"+e.appId}function Q(e){return Object(a["__awaiter"])(this,void 0,void 0,function(){var t,n,r;return Object(a["__generator"])(this,function(i){switch(i.label){case 0:return[4,G(e,function(n){var r=H(n),i=Y(e,r);return t=i.registrationPromise,i.installationEntry})];case 1:return n=i.sent(),n.fid!==L?[3,3]:(r={},[4,t]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}})})}function H(e){var t=e||{fid:P(),registrationStatus:0};return Z(t)}function Y(e,t){if(0===t.registrationStatus){if(!navigator.onLine){var n=Promise.reject(w.create("app-offline"));return{installationEntry:t,registrationPromise:n}}var r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=J(e,r);return{installationEntry:r,registrationPromise:i}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:X(e)}:{installationEntry:t}}function J(e,t){return Object(a["__awaiter"])(this,void 0,void 0,function(){var n,r;return Object(a["__generator"])(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,F(e,t)];case 1:return n=i.sent(),[2,W(e,n)];case 2:return r=i.sent(),b(r)&&409===r.serverCode?[4,K(e)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,W(e,{fid:t.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}})})}function X(e){return Object(a["__awaiter"])(this,void 0,void 0,function(){var t,n,r,i;return Object(a["__generator"])(this,function(o){switch(o.label){case 0:return[4,$(e)];case 1:t=o.sent(),o.label=2;case 2:return 1!==t.registrationStatus?[3,5]:[4,M(100)];case 3:return o.sent(),[4,$(e)];case 4:return t=o.sent(),[3,2];case 5:return 0!==t.registrationStatus?[3,7]:[4,Q(e)];case 6:return n=o.sent(),r=n.installationEntry,i=n.registrationPromise,i?[2,i]:[2,r];case 7:return[2,t]}})})}function $(e){return G(e,function(e){if(!e)throw w.create("installation-not-found");return Z(e)})}function Z(e){return ee(e)?{fid:e.fid,registrationStatus:0}:e}function ee(e){return 1===e.registrationStatus&&e.registrationTime+d<Date.now()}function te(e,t){return Object(a["__awaiter"])(this,void 0,void 0,function(){var n,r,i,o,s,u,c;return Object(a["__generator"])(this,function(a){switch(a.label){case 0:return n=ne(e,t),r=I(e,t),i={installation:{sdkVersion:h}},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,k(function(){return fetch(n,o)})];case 1:return s=a.sent(),s.ok?[4,s.json()]:[3,3];case 2:return u=a.sent(),c=C(u),[2,c];case 3:return[4,O("Generate Auth Token",s)];case 4:throw a.sent()}})})}function ne(e,t){var n=t.fid;return E(e)+"/"+n+"/authTokens:generate"}function re(e,t){return void 0===t&&(t=!1),Object(a["__awaiter"])(this,void 0,void 0,function(){var n,r,i,o;return Object(a["__generator"])(this,function(a){switch(a.label){case 0:return[4,G(e,function(r){if(!se(r))throw w.create("not-registered");var i=r.authToken;if(!t&&ue(i))return r;if(1===i.requestStatus)return n=ie(e,t),r;if(!navigator.onLine)throw w.create("app-offline");var o=le(r);return n=ae(e,o),o})];case 1:return r=a.sent(),n?[4,n]:[3,3];case 2:return o=a.sent(),[3,4];case 3:o=r.authToken,a.label=4;case 4:return i=o,[2,i]}})})}function ie(e,t){return Object(a["__awaiter"])(this,void 0,void 0,function(){var n,r;return Object(a["__generator"])(this,function(i){switch(i.label){case 0:return[4,oe(e)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,M(100)];case 3:return i.sent(),[4,oe(e)];case 4:return n=i.sent(),[3,2];case 5:return r=n.authToken,0===r.requestStatus?[2,re(e,t)]:[2,r]}})})}function oe(e){return G(e,function(e){if(!se(e))throw w.create("not-registered");var t=e.authToken;return de(t)?Object(a["__assign"])(Object(a["__assign"])({},e),{authToken:{requestStatus:0}}):e})}function ae(e,t){return Object(a["__awaiter"])(this,void 0,void 0,function(){var n,r,i;return Object(a["__generator"])(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,te(e,t)];case 1:return n=o.sent(),i=Object(a["__assign"])(Object(a["__assign"])({},t),{authToken:n}),[4,W(e,i)];case 2:return o.sent(),[2,n];case 3:return r=o.sent(),!b(r)||401!==r.serverCode&&404!==r.serverCode?[3,5]:[4,K(e)];case 4:return o.sent(),[3,7];case 5:return i=Object(a["__assign"])(Object(a["__assign"])({},t),{authToken:{requestStatus:0}}),[4,W(e,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}})})}function se(e){return void 0!==e&&2===e.registrationStatus}function ue(e){return 2===e.requestStatus&&!ce(e)}function ce(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+m}function le(e){var t={requestStatus:1,requestTime:Date.now()};return Object(a["__assign"])(Object(a["__assign"])({},e),{authToken:t})}function de(e){return 1===e.requestStatus&&e.requestTime+d<Date.now()}function he(e){return Object(a["__awaiter"])(this,void 0,void 0,function(){var t,n,r,i;return Object(a["__generator"])(this,function(o){switch(o.label){case 0:return t=T(e),[4,Q(t)];case 1:return n=o.sent(),r=n.installationEntry,i=n.registrationPromise,i?i.catch(console.error):re(t).catch(console.error),[2,r.fid]}})})}function fe(e,t){return void 0===t&&(t=!1),Object(a["__awaiter"])(this,void 0,void 0,function(){var n,r;return Object(a["__generator"])(this,function(i){switch(i.label){case 0:return n=T(e),[4,pe(n)];case 1:return i.sent(),[4,re(n,t)];case 2:return r=i.sent(),[2,r.token]}})})}function pe(e){return Object(a["__awaiter"])(this,void 0,void 0,function(){var t;return Object(a["__generator"])(this,function(n){switch(n.label){case 0:return[4,Q(e)];case 1:return t=n.sent().registrationPromise,t?[4,t]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})}function me(e,t){return Object(a["__awaiter"])(this,void 0,void 0,function(){var n,r,i,o;return Object(a["__generator"])(this,function(a){switch(a.label){case 0:return n=ge(e,t),r=I(e,t),i={method:"DELETE",headers:r},[4,k(function(){return fetch(n,i)})];case 1:return o=a.sent(),o.ok?[3,3]:[4,O("Delete Installation",o)];case 2:throw a.sent();case 3:return[2]}})})}function ge(e,t){var n=t.fid;return E(e)+"/"+n}function ye(e){return Object(a["__awaiter"])(this,void 0,void 0,function(){var t,n;return Object(a["__generator"])(this,function(r){switch(r.label){case 0:return t=T(e),[4,G(t,function(e){if(!e||0!==e.registrationStatus)return e})];case 1:if(n=r.sent(),!n)return[3,6];if(1!==n.registrationStatus)return[3,2];throw w.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw w.create("app-offline");case 3:return[4,me(t,n)];case 4:return r.sent(),[4,K(t)];case 5:r.sent(),r.label=6;case 6:return[2]}})})}function ve(e){var t="installations";e.INTERNAL.registerComponent(new c["Component"](t,function(e){var t=e.getProvider("app").getImmediate();return T(t),{app:t,getId:function(){return he(t)},getToken:function(e){return fe(t,e)},delete:function(){return ye(t)}}},"PUBLIC"))}ve(o.a)},gHGA:function(e,t,n){"use strict";n.r(t),n.d(t,"isSupported",function(){return Y}),n.d(t,"registerMessaging",function(){return H});var r,i,o=n("wj3C"),a=n.n(o),s=(n("fSjL"),n("mrSG")),u=n("zVF4"),c=n("S+S0"),l=(r={},r["only-available-in-window"]="This method is available in a Window context.",r["only-available-in-sw"]="This method is available in a service worker context.",r["should-be-overriden"]="This method should be overriden by extended classes.",r["bad-sender-id"]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",r["permission-default"]="The required permissions were not granted and dismissed instead.",r["permission-blocked"]="The required permissions were not granted and blocked instead.",r["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",r["notifications-blocked"]="Notifications have been blocked.",r["failed-serviceworker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",r["sw-registration-expected"]="A service worker registration was the expected input.",r["get-subscription-failed"]="There was an error when trying to get any existing Push Subscriptions.",r["invalid-saved-token"]="Unable to access details of the saved token.",r["sw-reg-redundant"]="The service worker being used for push was made redundant.",r["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$errorInfo}",r["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",r["token-unsubscribe-failed"]="A problem occured while unsubscribing the user from FCM: {$errorInfo}",r["token-update-failed"]="A problem occured while updating the user from FCM: {$errorInfo}",r["token-update-no-token"]="FCM returned no token when updating the user to push.",r["use-sw-before-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",r["invalid-delete-token"]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",r["delete-token-not-found"]="The deletion attempt for token could not be performed as the token was not found.",r["delete-scope-not-found"]="The deletion attempt for service worker scope could not be performed as the scope was not found.",r["bg-handler-function-expected"]="The input to setBackgroundMessageHandler() must be a function.",r["no-window-client-to-msg"]="An attempt was made to message a non-existant window client.",r["unable-to-resubscribe"]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$errorInfo}",r["no-fcm-token-for-resubscribe"]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",r["failed-to-delete-token"]="Unable to delete the currently saved token.",r["no-sw-in-reg"]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",r["bad-scope"]="The service worker scope must be a string with at least one character.",r["bad-vapid-key"]="The public VAPID key is not a Uint8Array with 65 bytes.",r["bad-subscription"]="The subscription must be a valid PushSubscription.",r["bad-token"]="The FCM Token used for storage / lookup was not a valid token string.",r["failed-delete-vapid-key"]="The VAPID key could not be deleted.",r["invalid-public-vapid-key"]="The public VAPID key must be a string.",r["use-public-key-before-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",r["public-vapid-key-decryption-failed"]="The public VAPID key did not equal 65 bytes when decrypted.",r),d=new u["ErrorFactory"]("messaging","Messaging",l),h=new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110]),f="https://fcmregistrations.googleapis.com/v1",p="google.c.a.c_id",m="google.c.a.c_l",g="google.c.a.ts",y="google.c.a.e";function v(e,t){if(null==e||null==t)return!1;if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var n=new DataView(e),r=new DataView(t),i=0;i<e.byteLength;i++)if(n.getUint8(i)!==r.getUint8(i))return!1;return!0}function w(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,Object(s["__spread"])(t)))}function b(e){var t=w(e);return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(function(e){e["PUSH_MSG_RECEIVED"]="push-msg-received",e["NOTIFICATION_CLICKED"]="notification-clicked"})(i||(i={}));var T=function(){function e(){}return e.prototype.getToken=function(e,t,n){return Object(s["__awaiter"])(this,void 0,void 0,function(){var r,i,o,a,u,c,l;return Object(s["__generator"])(this,function(s){switch(s.label){case 0:return[4,E(e)];case 1:r=s.sent(),i=C(t,n),o={method:"POST",headers:r,body:JSON.stringify(i)},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(S(e.app),o)];case 3:return u=s.sent(),[4,u.json()];case 4:return a=s.sent(),[3,6];case 5:throw c=s.sent(),d.create("token-subscribe-failed",{errorInfo:c});case 6:if(a.error)throw l=a.error.message,d.create("token-subscribe-failed",{errorInfo:l});if(!a.token)throw d.create("token-subscribe-no-token");return[2,a.token]}})})},e.prototype.updateToken=function(e,t,n,r){return Object(s["__awaiter"])(this,void 0,void 0,function(){var i,o,a,u,c,l,h;return Object(s["__generator"])(this,function(s){switch(s.label){case 0:return[4,E(t)];case 1:i=s.sent(),o=C(n,r),a={method:"PATCH",headers:i,body:JSON.stringify(o)},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(S(t.app)+"/"+e.fcmToken,a)];case 3:return c=s.sent(),[4,c.json()];case 4:return u=s.sent(),[3,6];case 5:throw l=s.sent(),d.create("token-update-failed",{errorInfo:l});case 6:if(u.error)throw h=u.error.message,d.create("token-update-failed",{errorInfo:h});if(!u.token)throw d.create("token-update-no-token");return[2,u.token]}})})},e.prototype.deleteToken=function(e,t){return Object(s["__awaiter"])(this,void 0,void 0,function(){var n,r,i,o,a,u;return Object(s["__generator"])(this,function(s){switch(s.label){case 0:return[4,E(e)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(S(e.app)+"/"+t.fcmToken,r)];case 3:return i=s.sent(),[4,i.json()];case 4:if(o=s.sent(),o.error)throw a=o.error.message,d.create("token-unsubscribe-failed",{errorInfo:a});return[3,6];case 5:throw u=s.sent(),d.create("token-unsubscribe-failed",{errorInfo:u});case 6:return[2]}})})},e}();function S(e){return f+"/projects/"+e.options.projectId+"/registrations"}function E(e){var t=e.app,n=e.installations;return Object(s["__awaiter"])(this,void 0,void 0,function(){var e;return Object(s["__generator"])(this,function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return e=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.options.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}})})}function C(e,t){var n=b(e.getKey("p256dh")),r=b(e.getKey("auth")),i={web:{endpoint:e.endpoint,p256dh:n,auth:r}};return v(t.buffer,h.buffer)||(i.web.applicationPubKey=b(t)),i}function O(e){for(var t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length),o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}var _="undefined",I="fcm_token_object_Store";function k(e,t){if(e.objectStoreNames.contains(I)){var n=e.transaction(I),r=n.objectStore(I),i=new T,o=r.openCursor();o.onerror=function(e){console.warn("Unable to cleanup old IDB.",e)},o.onsuccess=function(){var n=o.result;if(n){var r=n.value;i.deleteToken(t,r),n.continue()}else e.close(),indexedDB.deleteDatabase(_)}}}function D(e){var t=indexedDB.open(_);t.onerror=function(e){},t.onsuccess=function(n){var r=t.result;k(r,e)}}var A=function(){function e(){this.dbPromise=null}return e.prototype.get=function(e){return this.createTransaction(function(t){return t.get(e)})},e.prototype.getIndex=function(e,t){function n(n){var r=n.index(e);return r.get(t)}return this.createTransaction(n)},e.prototype.put=function(e){return this.createTransaction(function(t){return t.put(e)},"readwrite")},e.prototype.delete=function(e){return this.createTransaction(function(t){return t.delete(e)},"readwrite")},e.prototype.closeDatabase=function(){return Object(s["__awaiter"])(this,void 0,void 0,function(){var e;return Object(s["__generator"])(this,function(t){switch(t.label){case 0:return this.dbPromise?[4,this.dbPromise]:[3,2];case 1:e=t.sent(),e.close(),this.dbPromise=null,t.label=2;case 2:return[2]}})})},e.prototype.createTransaction=function(e,t){return void 0===t&&(t="readonly"),Object(s["__awaiter"])(this,void 0,void 0,function(){var n,r,i,o;return Object(s["__generator"])(this,function(a){switch(a.label){case 0:return[4,this.getDb()];case 1:return n=a.sent(),r=n.transaction(this.objectStoreName,t),i=r.objectStore(this.objectStoreName),[4,F(e(i))];case 2:return o=a.sent(),[2,new Promise(function(e,t){r.oncomplete=function(){e(o)},r.onerror=function(){t(r.error)}})]}})})},e.prototype.getDb=function(){var e=this;return this.dbPromise||(this.dbPromise=new Promise(function(t,n){var r=indexedDB.open(e.dbName,e.dbVersion);r.onsuccess=function(){t(r.result)},r.onerror=function(){e.dbPromise=null,n(r.error)},r.onupgradeneeded=function(t){return e.onDbUpgrade(r,t)}})),this.dbPromise},e}();function F(e){return new Promise(function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}})}var M=function(e){function t(t){var n=e.call(this)||this;return n.services=t,n.dbName="fcm_token_details_db",n.dbVersion=4,n.objectStoreName="fcm_token_object_Store",n}return Object(s["__extends"])(t,e),t.prototype.onDbUpgrade=function(e,t){var n=e.result;switch(t.oldVersion){case 0:var r=n.createObjectStore(this.objectStoreName,{keyPath:"swScope"});r.createIndex("fcmSenderId","fcmSenderId",{unique:!1}),r.createIndex("fcmToken","fcmToken",{unique:!0});case 1:D(this.services);case 2:r=e.transaction.objectStore(this.objectStoreName);var i=r.openCursor();i.onsuccess=function(){var e=i.result;if(e){var t=e.value,n=Object(s["__assign"])({},t);t.createTime||(n.createTime=Date.now()),"string"===typeof t.vapidKey&&(n.vapidKey=O(t.vapidKey)),"string"===typeof t.auth&&(n.auth=O(t.auth).buffer),"string"===typeof t.auth&&(n.p256dh=O(t.p256dh).buffer),"string"===typeof t.fcmPushSet&&delete n.fcmPushSet,e.update(n),e.continue()}};break;case 3:r=e.transaction.objectStore(this.objectStoreName);var o=r.openCursor();o.onsuccess=function(){var e=o.result;if(e){var t=e.value,n=Object(s["__assign"])({},t);"string"===typeof t.fcmPushSet&&delete n.fcmPushSet,e.update(n),e.continue()}}}},t.prototype.getTokenDetailsFromToken=function(e){return Object(s["__awaiter"])(this,void 0,void 0,function(){return Object(s["__generator"])(this,function(t){if(!e)throw d.create("bad-token");return N({fcmToken:e}),[2,this.getIndex("fcmToken",e)]})})},t.prototype.getTokenDetailsFromSWScope=function(e){return Object(s["__awaiter"])(this,void 0,void 0,function(){return Object(s["__generator"])(this,function(t){if(!e)throw d.create("bad-scope");return N({swScope:e}),[2,this.get(e)]})})},t.prototype.saveTokenDetails=function(e){return Object(s["__awaiter"])(this,void 0,void 0,function(){return Object(s["__generator"])(this,function(t){if(!e.swScope)throw d.create("bad-scope");if(!e.vapidKey)throw d.create("bad-vapid-key");if(!e.endpoint||!e.auth||!e.p256dh)throw d.create("bad-subscription");if(!e.fcmSenderId)throw d.create("bad-sender-id");if(!e.fcmToken)throw d.create("bad-token");return N(e),[2,this.put(e)]})})},t.prototype.deleteToken=function(e){return Object(s["__awaiter"])(this,void 0,void 0,function(){var t;return Object(s["__generator"])(this,function(n){switch(n.label){case 0:return"string"!==typeof e||0===e.length?[2,Promise.reject(d.create("invalid-delete-token"))]:[4,this.getTokenDetailsFromToken(e)];case 1:if(t=n.sent(),!t)throw d.create("delete-token-not-found");return[4,this.delete(t.swScope)];case 2:return n.sent(),[2,t]}})})},t}(A);function N(e){if(e.fcmToken&&("string"!==typeof e.fcmToken||0===e.fcmToken.length))throw d.create("bad-token");if(e.swScope&&("string"!==typeof e.swScope||0===e.swScope.length))throw d.create("bad-scope");if(e.vapidKey&&(!(e.vapidKey instanceof Uint8Array)||65!==e.vapidKey.length))throw d.create("bad-vapid-key");if(e.endpoint&&("string"!==typeof e.endpoint||0===e.endpoint.length))throw d.create("bad-subscription");if(e.auth&&!(e.auth instanceof ArrayBuffer))throw d.create("bad-subscription");if(e.p256dh&&!(e.p256dh instanceof ArrayBuffer))throw d.create("bad-subscription");if(e.fcmSenderId&&("string"!==typeof e.fcmSenderId||0===e.fcmSenderId.length))throw d.create("bad-sender-id")}var R=65,L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dbName="fcm_vapid_details_db",t.dbVersion=1,t.objectStoreName="fcm_vapid_object_Store",t}return Object(s["__extends"])(t,e),t.prototype.onDbUpgrade=function(e){var t=e.result;t.createObjectStore(this.objectStoreName,{keyPath:"swScope"})},t.prototype.getVapidFromSWScope=function(e){return Object(s["__awaiter"])(this,void 0,void 0,function(){var t;return Object(s["__generator"])(this,function(n){switch(n.label){case 0:if("string"!==typeof e||0===e.length)throw d.create("bad-scope");return[4,this.get(e)];case 1:return t=n.sent(),[2,t?t.vapidKey:void 0]}})})},t.prototype.saveVapidDetails=function(e,t){return Object(s["__awaiter"])(this,void 0,void 0,function(){var n;return Object(s["__generator"])(this,function(r){if("string"!==typeof e||0===e.length)throw d.create("bad-scope");if(null===t||t.length!==R)throw d.create("bad-vapid-key");return n={swScope:e,vapidKey:t},[2,this.put(n)]})})},t.prototype.deleteVapidDetails=function(e){return Object(s["__awaiter"])(this,void 0,void 0,function(){var t;return Object(s["__generator"])(this,function(n){switch(n.label){case 0:return[4,this.getVapidFromSWScope(e)];case 1:if(t=n.sent(),!t)throw d.create("delete-scope-not-found");return[4,this.delete(e)];case 2:return n.sent(),[2,t]}})})},t}(A),P=6048e5,x=function(){function e(e){var t=this;this.services=e,this.vapidDetailsModel=new L,this.subscriptionManager=new T;var n=e.app;if(this.app=n,!n.options.messagingSenderId||"string"!==typeof n.options.messagingSenderId)throw d.create("bad-sender-id");this.INTERNAL={delete:function(){return t.delete()}},this.tokenDetailsModel=new M(e)}return e.prototype.getToken=function(){return Object(s["__awaiter"])(this,void 0,void 0,function(){var e,t,n,r,i;return Object(s["__generator"])(this,function(o){switch(o.label){case 0:if(e=this.getNotificationPermission_(),"denied"===e)throw d.create("notifications-blocked");return"granted"!==e?[2,null]:[4,this.getSWRegistration_()];case 1:return t=o.sent(),[4,this.getPublicVapidKey_()];case 2:return n=o.sent(),[4,this.getPushSubscription(t,n)];case 3:return r=o.sent(),[4,this.tokenDetailsModel.getTokenDetailsFromSWScope(t.scope)];case 4:return i=o.sent(),i?[2,this.manageExistingToken(t,r,n,i)]:[2,this.getNewToken(t,r,n)]}})})},e.prototype.manageExistingToken=function(e,t,n,r){return Object(s["__awaiter"])(this,void 0,void 0,function(){var i,o;return Object(s["__generator"])(this,function(a){switch(a.label){case 0:return i=B(t,n,r),i?(o=Date.now(),o<r.createTime+P?[2,r.fcmToken]:[2,this.updateToken(e,t,n,r)]):[3,1];case 1:return[4,this.deleteTokenFromDB(r.fcmToken)];case 2:return a.sent(),[2,this.getNewToken(e,t,n)];case 3:return[2]}})})},e.prototype.updateToken=function(e,t,n,r){return Object(s["__awaiter"])(this,void 0,void 0,function(){var i,o,a;return Object(s["__generator"])(this,function(s){switch(s.label){case 0:return s.trys.push([0,4,,6]),[4,this.subscriptionManager.updateToken(r,this.services,t,n)];case 1:return i=s.sent(),o={swScope:e.scope,vapidKey:n,fcmSenderId:this.services.app.options.messagingSenderId,fcmToken:i,createTime:Date.now(),endpoint:t.endpoint,auth:t.getKey("auth"),p256dh:t.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(o)];case 2:return s.sent(),[4,this.vapidDetailsModel.saveVapidDetails(e.scope,n)];case 3:return s.sent(),[2,i];case 4:return a=s.sent(),[4,this.deleteToken(r.fcmToken)];case 5:throw s.sent(),a;case 6:return[2]}})})},e.prototype.getNewToken=function(e,t,n){return Object(s["__awaiter"])(this,void 0,void 0,function(){var r,i;return Object(s["__generator"])(this,function(o){switch(o.label){case 0:return[4,this.subscriptionManager.getToken(this.services,t,n)];case 1:return r=o.sent(),i={swScope:e.scope,vapidKey:n,fcmSenderId:this.app.options.messagingSenderId,fcmToken:r,createTime:Date.now(),endpoint:t.endpoint,auth:t.getKey("auth"),p256dh:t.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(i)];case 2:return o.sent(),[4,this.vapidDetailsModel.saveVapidDetails(e.scope,n)];case 3:return o.sent(),[2,r]}})})},e.prototype.deleteToken=function(e){return Object(s["__awaiter"])(this,void 0,void 0,function(){var t,n;return Object(s["__generator"])(this,function(r){switch(r.label){case 0:return[4,this.deleteTokenFromDB(e)];case 1:return r.sent(),[4,this.getSWRegistration_()];case 2:return t=r.sent(),t?[4,t.pushManager.getSubscription()]:[3,4];case 3:if(n=r.sent(),n)return[2,n.unsubscribe()];r.label=4;case 4:return[2,!0]}})})},e.prototype.deleteTokenFromDB=function(e){return Object(s["__awaiter"])(this,void 0,void 0,function(){var t;return Object(s["__generator"])(this,function(n){switch(n.label){case 0:return[4,this.tokenDetailsModel.deleteToken(e)];case 1:return t=n.sent(),[4,this.subscriptionManager.deleteToken(this.services,t)];case 2:return n.sent(),[2]}})})},e.prototype.getPushSubscription=function(e,t){return Object(s["__awaiter"])(this,void 0,void 0,function(){var n;return Object(s["__generator"])(this,function(r){switch(r.label){case 0:return[4,e.pushManager.getSubscription()];case 1:return n=r.sent(),n?[2,n]:[2,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t})]}})})},e.prototype.requestPermission=function(){throw d.create("only-available-in-window")},e.prototype.useServiceWorker=function(e){throw d.create("only-available-in-window")},e.prototype.usePublicVapidKey=function(e){throw d.create("only-available-in-window")},e.prototype.onMessage=function(e,t,n){throw d.create("only-available-in-window")},e.prototype.onTokenRefresh=function(e,t,n){throw d.create("only-available-in-window")},e.prototype.setBackgroundMessageHandler=function(e){throw d.create("only-available-in-sw")},e.prototype.delete=function(){return Object(s["__awaiter"])(this,void 0,void 0,function(){return Object(s["__generator"])(this,function(e){switch(e.label){case 0:return[4,Promise.all([this.tokenDetailsModel.closeDatabase(),this.vapidDetailsModel.closeDatabase()])];case 1:return e.sent(),[2]}})})},e.prototype.getNotificationPermission_=function(){return Notification.permission},e.prototype.getTokenDetailsModel=function(){return this.tokenDetailsModel},e.prototype.getVapidDetailsModel=function(){return this.vapidDetailsModel},e.prototype.getSubscriptionManager=function(){return this.subscriptionManager},e}();function B(e,t,n){if(!n.vapidKey||!v(t.buffer,n.vapidKey.buffer))return!1;var r=e.endpoint===n.endpoint,i=v(e.getKey("auth"),n.auth),o=v(e.getKey("p256dh"),n.p256dh);return r&&i&&o}var q="FCM_MSG",U=function(e){function t(t){var n=e.call(this,t)||this;return n.bgMessageHandler=null,self.addEventListener("push",function(e){n.onPush(e)}),self.addEventListener("pushsubscriptionchange",function(e){n.onSubChange(e)}),self.addEventListener("notificationclick",function(e){n.onNotificationClick(e)}),n}return Object(s["__extends"])(t,e),t.prototype.onPush=function(e){e.waitUntil(this.onPush_(e))},t.prototype.onSubChange=function(e){e.waitUntil(this.onSubChange_(e))},t.prototype.onNotificationClick=function(e){e.waitUntil(this.onNotificationClick_(e))},t.prototype.onPush_=function(e){return Object(s["__awaiter"])(this,void 0,void 0,function(){var t,n,r,i,o,a,u;return Object(s["__generator"])(this,function(s){switch(s.label){case 0:if(!e.data)return[2];try{t=e.data.json()}catch(e){return[2]}return[4,this.hasVisibleClients_()];case 1:return n=s.sent(),n?[2,this.sendMessageToWindowClients_(t)]:(r=this.getNotificationData_(t),r?(i=r.title||"",[4,this.getSWRegistration_()]):[3,3]);case 2:return o=s.sent(),a=r.actions,u=Notification.maxActions,a&&u&&a.length>u&&console.warn("This browser only supports "+u+" actions.The remaining actions will not be displayed."),[2,o.showNotification(i,r)];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(t)]:[3,5];case 4:return s.sent(),[2];case 5:return[2]}})})},t.prototype.onSubChange_=function(e){return Object(s["__awaiter"])(this,void 0,void 0,function(){var e,t,n,r,i;return Object(s["__generator"])(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.getSWRegistration_()];case 1:return e=o.sent(),[3,3];case 2:throw t=o.sent(),d.create("unable-to-resubscribe",{errorInfo:t});case 3:return o.trys.push([3,5,,8]),[4,e.pushManager.getSubscription()];case 4:return o.sent(),[3,8];case 5:return n=o.sent(),r=this.getTokenDetailsModel(),[4,r.getTokenDetailsFromSWScope(e.scope)];case 6:if(i=o.sent(),!i)throw n;return[4,this.deleteToken(i.fcmToken)];case 7:throw o.sent(),n;case 8:return[2]}})})},t.prototype.onNotificationClick_=function(e){return Object(s["__awaiter"])(this,void 0,void 0,function(){var t,n,r,o;return Object(s["__generator"])(this,function(a){switch(a.label){case 0:if(!(e.notification&&e.notification.data&&e.notification.data[q]))return[2];if(e.action)return[2];if(e.stopImmediatePropagation(),e.notification.close(),t=e.notification.data[q],!t.notification)return[2];if(n=t.fcmOptions&&t.fcmOptions.link||t.notification.click_action,!n){if(!(t.data&&p in t.data))return[2];n=self.location.origin}return[4,this.getWindowClient_(n)];case 1:return r=a.sent(),r?[3,4]:[4,self.clients.openWindow(n)];case 2:return r=a.sent(),[4,W(3e3)];case 3:return a.sent(),[3,6];case 4:return[4,r.focus()];case 5:r=a.sent(),a.label=6;case 6:return r?(delete t.notification,delete t.fcmOptions,o=j(i.NOTIFICATION_CLICKED,t),[2,this.attemptToMessageClient_(r,o)]):[2]}})})},t.prototype.getNotificationData_=function(e){var t;if(e&&"object"===typeof e.notification){var n=Object(s["__assign"])({},e.notification);return n.data=Object(s["__assign"])(Object(s["__assign"])({},e.notification.data),(t={},t[q]=e,t)),n}},t.prototype.setBackgroundMessageHandler=function(e){if(!e||"function"!==typeof e)throw d.create("bg-handler-function-expected");this.bgMessageHandler=e},t.prototype.getWindowClient_=function(e){return Object(s["__awaiter"])(this,void 0,void 0,function(){var t,n,r,i,o;return Object(s["__generator"])(this,function(a){switch(a.label){case 0:return t=new URL(e,self.location.href).href,[4,V()];case 1:for(n=a.sent(),r=null,i=0;i<n.length;i++)if(o=new URL(n[i].url,self.location.href).href,o===t){r=n[i];break}return[2,r]}})})},t.prototype.attemptToMessageClient_=function(e,t){return Object(s["__awaiter"])(this,void 0,void 0,function(){return Object(s["__generator"])(this,function(n){if(!e)throw d.create("no-window-client-to-msg");return e.postMessage(t),[2]})})},t.prototype.hasVisibleClients_=function(){return Object(s["__awaiter"])(this,void 0,void 0,function(){var e;return Object(s["__generator"])(this,function(t){switch(t.label){case 0:return[4,V()];case 1:return e=t.sent(),[2,e.some(function(e){return"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")})]}})})},t.prototype.sendMessageToWindowClients_=function(e){return Object(s["__awaiter"])(this,void 0,void 0,function(){var t,n,r=this;return Object(s["__generator"])(this,function(o){switch(o.label){case 0:return[4,V()];case 1:return t=o.sent(),n=j(i.PUSH_MSG_RECEIVED,e),[4,Promise.all(t.map(function(e){return r.attemptToMessageClient_(e,n)}))];case 2:return o.sent(),[2]}})})},t.prototype.getSWRegistration_=function(){return Object(s["__awaiter"])(this,void 0,void 0,function(){return Object(s["__generator"])(this,function(e){return[2,self.registration]})})},t.prototype.getPublicVapidKey_=function(){return Object(s["__awaiter"])(this,void 0,void 0,function(){var e,t;return Object(s["__generator"])(this,function(n){switch(n.label){case 0:return[4,this.getSWRegistration_()];case 1:if(e=n.sent(),!e)throw d.create("sw-registration-expected");return[4,this.getVapidDetailsModel().getVapidFromSWScope(e.scope)];case 2:return t=n.sent(),null==t?[2,h]:[2,t]}})})},t}(x);function V(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function j(e,t){return{firebaseMessagingType:e,firebaseMessagingData:t}}function W(e){return new Promise(function(t){setTimeout(t,e)})}var K="/firebase-messaging-sw.js",G="/firebase-cloud-messaging-push-scope",z=function(e){function t(t){var n=e.call(this,t)||this;return n.registrationToUse=null,n.publicVapidKeyToUse=null,n.messageObserver=null,n.tokenRefreshObserver=null,n.onMessageInternal=Object(u["createSubscribe"])(function(e){n.messageObserver=e}),n.onTokenRefreshInternal=Object(u["createSubscribe"])(function(e){n.tokenRefreshObserver=e}),n.setupSWMessageListener_(),n}return Object(s["__extends"])(t,e),t.prototype.requestPermission=function(){return Object(s["__awaiter"])(this,void 0,void 0,function(){var e;return Object(s["__generator"])(this,function(t){switch(t.label){case 0:return"granted"===this.getNotificationPermission_()?[2]:[4,Notification.requestPermission()];case 1:if(e=t.sent(),"granted"===e)return[2];throw"denied"===e?d.create("permission-blocked"):d.create("permission-default")}})})},t.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw d.create("sw-registration-expected");if(null!=this.registrationToUse)throw d.create("use-sw-before-get-token");this.registrationToUse=e},t.prototype.usePublicVapidKey=function(e){if("string"!==typeof e)throw d.create("invalid-public-vapid-key");if(null!=this.publicVapidKeyToUse)throw d.create("use-public-key-before-get-token");var t=O(e);if(65!==t.length)throw d.create("public-vapid-key-decryption-failed");this.publicVapidKeyToUse=t},t.prototype.onMessage=function(e,t,n){return"function"===typeof e?this.onMessageInternal(e,t,n):this.onMessageInternal(e)},t.prototype.onTokenRefresh=function(e,t,n){return"function"===typeof e?this.onTokenRefreshInternal(e,t,n):this.onTokenRefreshInternal(e)},t.prototype.waitForRegistrationToActivate_=function(e){var t=e.installing||e.waiting||e.active;return new Promise(function(n,r){if(t)if("activated"!==t.state)if("redundant"!==t.state){var i=function(){if("activated"===t.state)n(e);else{if("redundant"!==t.state)return;r(d.create("sw-reg-redundant"))}t.removeEventListener("statechange",i)};t.addEventListener("statechange",i)}else r(d.create("sw-reg-redundant"));else n(e);else r(d.create("no-sw-in-reg"))})},t.prototype.getSWRegistration_=function(){var e=this;return this.registrationToUse?this.waitForRegistrationToActivate_(this.registrationToUse):(this.registrationToUse=null,navigator.serviceWorker.register(K,{scope:G}).catch(function(e){throw d.create("failed-serviceworker-registration",{browserErrorMessage:e.message})}).then(function(t){return e.waitForRegistrationToActivate_(t).then(function(){return e.registrationToUse=t,t.update(),t})}))},t.prototype.getPublicVapidKey_=function(){return Object(s["__awaiter"])(this,void 0,void 0,function(){return Object(s["__generator"])(this,function(e){return this.publicVapidKeyToUse?[2,this.publicVapidKeyToUse]:[2,h]})})},t.prototype.setupSWMessageListener_=function(){var e=this;navigator.serviceWorker.addEventListener("message",function(t){return Object(s["__awaiter"])(e,void 0,void 0,function(){var e,n,r,i,o,a;return Object(s["__generator"])(this,function(s){switch(s.label){case 0:return t.data&&t.data.firebaseMessagingType&&t.data.firebaseMessagingData?(e=t.data,n=e.firebaseMessagingType,r=e.firebaseMessagingData,this.messageObserver&&this.messageObserver.next(r),i=r.data,i&&p in i&&"1"===i[y]?(o=Q(n),[4,this.services.analyticsProvider.get()]):[3,2]):[2];case 1:a=s.sent(),a.logEvent(o,{message_name:i[m],message_id:i[p],message_time:i[g],message_device_time:Math.floor(Date.now()/1e3)}),s.label=2;case 2:return[2]}})})},!1)},t}(x);function Q(e){switch(e){case i.NOTIFICATION_CLICKED:return"notification_open";case i.PUSH_MSG_RECEIVED:return"notification_foreground";default:throw new Error}}function H(e){var t="messaging",n=function(e){var t=e.getProvider("app").getImmediate(),n=e.getProvider("installations").getImmediate(),r=e.getProvider("analytics-internal"),i={app:t,installations:n,analyticsProvider:r};if(!Y())throw d.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new U(i):new z(i)},r={isSupported:Y};e.INTERNAL.registerComponent(new c["Component"](t,n,"PUBLIC").setServiceProps(r))}function Y(){return self&&"ServiceWorkerGlobalScope"in self?X():J()}function J(){return navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function X(){return"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}H(a.a)},hgVy:function(e,t,n){e.exports={"ant-result":"ant-result","ant-result-success":"ant-result-success","ant-result-icon":"ant-result-icon",anticon:"anticon","ant-result-error":"ant-result-error","ant-result-info":"ant-result-info","ant-result-warning":"ant-result-warning","ant-result-rtl":"ant-result-rtl","ant-result-image":"ant-result-image","ant-result-title":"ant-result-title","ant-result-subtitle":"ant-result-subtitle","ant-result-extra":"ant-result-extra","ant-result-content":"ant-result-content"}},"i6+/":function(e,t,n){"use strict";var r=n("mMB1");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("+L6B");var i=r(n("2/Rp"));n("J+/v");var o=r(n("MoRW")),a=r(n("q1tI")),s=n("ArA+"),u=function(){return a.default.createElement(o.default,{status:404,title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:a.default.createElement(i.default,{type:"primary",onClick:function(){return s.router.push("/")}},"Back Home")})},c=u;t.default=c},iqUP:function(e,t,n){"use strict";function r(e){return e&&"object"===typeof e&&"default"in e?e["default"]:e}var i=r(n("wj3C"));n("t6oF"),n("NSPt"),n("6Joi"),n("ABqa"),n("gHGA"),n("LmZi"),n("bQlE"),n("3Kre"),n("O1kn"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport * as firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),e.exports=i},"jsC+":function(e,t,n){"use strict";n.r(t);var r=n("XBQK"),i=n("q1tI"),o=n("TSYQ"),a=n.n(o),s=n("GZ0F"),u=n("2/Rp"),c=n("H84U");function l(e){"@babel/helpers - typeof";return l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function d(){return d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(this,arguments)}function h(e,t){return m(e)||p(e,t)||f()}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function p(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)if(n.push(a.value),t&&n.length===t)break}catch(e){i=!0,o=e}finally{try{r||null==s["return"]||s["return"]()}finally{if(i)throw o}}return n}}function m(e){if(Array.isArray(e))return e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),e}function w(e,t){return!t||"object"!==l(t)&&"function"!==typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}function S(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}function E(e,t){return E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},E(e,t)}var C=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},O=u["default"].Group,_=function(e){function t(){var e;return g(this,t),e=w(this,T(t).apply(this,arguments)),e.renderButton=function(t){var n=t.getPopupContainer,o=t.getPrefixCls,c=e.props,l=c.prefixCls,f=c.type,p=c.disabled,m=c.onClick,g=c.htmlType,y=c.children,v=c.className,w=c.overlay,b=c.trigger,T=c.align,S=c.visible,E=c.onVisibleChange,_=c.placement,I=c.getPopupContainer,k=c.href,D=c.icon,A=void 0===D?i["createElement"](s["a"],null):D,F=c.title,M=c.buttonsRender,N=C(c,["prefixCls","type","disabled","onClick","htmlType","children","className","overlay","trigger","align","visible","onVisibleChange","placement","getPopupContainer","href","icon","title","buttonsRender"]),R=o("dropdown-button",l),L={align:T,overlay:w,disabled:p,trigger:p?[]:b,onVisibleChange:E,placement:_,getPopupContainer:I||n};"visible"in e.props&&(L.visible=S);var P=i["createElement"](u["default"],{type:f,disabled:p,onClick:m,htmlType:g,href:k,title:F},y),x=i["createElement"](u["default"],{type:f},A),B=M([P,x]),q=h(B,2),U=q[0],V=q[1];return i["createElement"](O,d({},N,{className:a()(R,v)}),U,i["createElement"](r["a"],L,V))},e}return S(t,e),v(t,[{key:"render",value:function(){return i["createElement"](c["a"],null,this.renderButton)}}]),t}(i["Component"]);_.__ANT_BUTTON=!0,_.defaultProps={placement:"bottomRight",type:"default",buttonsRender:function(e){return e}},r["a"].Button=_;t["default"]=r["a"]},kd2E:function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var a={};if("string"!==typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var u=1e3;o&&"number"===typeof o.maxKeys&&(u=o.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var d,h,f,p,m=e[l].replace(s,"%20"),g=m.indexOf(n);g>=0?(d=m.substr(0,g),h=m.substr(g+1)):(d=m,h=""),f=decodeURIComponent(d),p=decodeURIComponent(h),r(a,f)?i(a[f])?a[f].push(p):a[f]=[a[f],p]:a[f]=p}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},mxmt:function(e,t,n){e.exports=n.p+"static/logo.eb110c0d.svg"},nbvr:function(e,t,n){(function(e,n){n(t)})(0,function(e){"use strict";function t(e){return Array.prototype.slice.call(e)}function n(e){return new Promise(function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function r(e,t,r){var i,o=new Promise(function(o,a){i=e[t].apply(e,r),n(i).then(o,a)});return o.request=i,o}function i(e,t,n){var i=r(e,t,n);return i.then(function(e){if(e)return new l(e,i.request)})}function o(e,t,n){n.forEach(function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})})}function a(e,t,n,i){i.forEach(function(i){i in n.prototype&&(e.prototype[i]=function(){return r(this[t],i,arguments)})})}function s(e,t,n,r){r.forEach(function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})})}function u(e,t,n,r){r.forEach(function(r){r in n.prototype&&(e.prototype[r]=function(){return i(this[t],r,arguments)})})}function c(e){this._index=e}function l(e,t){this._cursor=e,this._request=t}function d(e){this._store=e}function h(e){this._tx=e,this.complete=new Promise(function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}})}function f(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new h(n)}function p(e){this._db=e}function m(e,t,n){var i=r(indexedDB,"open",[e,t]),o=i.request;return o&&(o.onupgradeneeded=function(e){n&&n(new f(o.result,e.oldVersion,o.transaction))}),i.then(function(e){return new p(e)})}function g(e){return r(indexedDB,"deleteDatabase",[e])}o(c,"_index",["name","keyPath","multiEntry","unique"]),a(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),a(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(e){e in IDBCursor.prototype&&(l.prototype[e]=function(){var t=this,r=arguments;return Promise.resolve().then(function(){return t._cursor[e].apply(t._cursor,r),n(t._request).then(function(e){if(e)return new l(e,t._request)})})})}),d.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},d.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(d,"_store",["name","keyPath","indexNames","autoIncrement"]),a(d,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(d,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(d,"_store",IDBObjectStore,["deleteIndex"]),h.prototype.objectStore=function(){return new d(this._tx.objectStore.apply(this._tx,arguments))},o(h,"_tx",["objectStoreNames","mode"]),s(h,"_tx",IDBTransaction,["abort"]),f.prototype.createObjectStore=function(){return new d(this._db.createObjectStore.apply(this._db,arguments))},o(f,"_db",["name","version","objectStoreNames"]),s(f,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new h(this._db.transaction.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),s(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(e){[d,c].forEach(function(n){e in n.prototype&&(n.prototype[e.replace("open","iterate")]=function(){var n=t(arguments),r=n[n.length-1],i=this._store||this._index,o=i[e].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})})}),[c,d].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise(function(i){n.iterateCursor(e,function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)})})})}),e.openDb=m,e.deleteDb=g,Object.defineProperty(e,"__esModule",{value:!0})})},o2JA:function(e,t,n){"use strict"},s4NR:function(e,t,n){"use strict";t.decode=t.parse=n("kd2E"),t.encode=t.stringify=n("4JlD")},trCS:function(e,t,n){"use strict";var r=n("mMB1");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("lUTK");var i=r(n("BvKs")),o=n("RBnf"),a=n("Y2fQ"),s=r(n("q1tI")),u=r(n("TSYQ")),c=r(n("uZXw")),l=r(n("Kkfi")),d=function(e){var t=e.className,n=(0,a.getLocale)(),r=function(e){var t=e.key;return(0,a.setLocale)(t)},d=["zh-CN","zh-TW","en-US","pt-BR"],h={"zh-CN":"\u7b80\u4f53\u4e2d\u6587","zh-TW":"\u7e41\u4f53\u4e2d\u6587","en-US":"English","pt-BR":"Portugu\xeas"},f={"zh-CN":"\ud83c\udde8\ud83c\uddf3","zh-TW":"\ud83c\udded\ud83c\uddf0","en-US":"\ud83c\uddfa\ud83c\uddf8","pt-BR":"\ud83c\udde7\ud83c\uddf7"},p=s.default.createElement(i.default,{className:l.default.menu,selectedKeys:[n],onClick:r},d.map(function(e){return s.default.createElement(i.default.Item,{key:e},s.default.createElement("span",{role:"img","aria-label":h[e]},f[e])," ",h[e])}));return s.default.createElement(c.default,{overlay:p,placement:"bottomRight"},s.default.createElement("span",{className:(0,u.default)(l.default.dropDown,t)},s.default.createElement(o.GlobalOutlined,{title:(0,a.formatMessage)({id:"navBar.lang",defaultMessage:"Languages"})})))},h=d;t.default=h},uZXw:function(e,t,n){"use strict";var r=n("mMB1");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("qVdP");var i=r(n("jsC+")),o=r(n("J+O/")),a=r(n("q1tI")),s=r(n("TSYQ")),u=r(n("QyDn")),c=function(e){var t=e.overlayClassName,n=(0,o.default)(e,["overlayClassName"]);return a.default.createElement(i.default,Object.assign({overlayClassName:(0,s.default)(u.default.container,t)},n))},l=c;t.default=l},x7I3:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"ErrorCode",function(){return kr}),n.d(t,"EventType",function(){return Dr}),n.d(t,"WebChannel",function(){return Ar}),n.d(t,"XhrIo",function(){return Fr}),n.d(t,"createWebChannelTransport",function(){return Ir});var r,i="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{},o=o||{},a=i;function s(e){return"string"==typeof e}function u(e){return"number"==typeof e}function c(e,t){e=e.split("."),t=t||a;for(var n=0;n<e.length;n++)if(t=t[e[n]],null==t)return null;return t}function l(){}function d(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&"undefined"==typeof e.call)return"object";return t}function h(e){return"array"==d(e)}function f(e){var t=d(e);return"array"==t||"object"==t&&"number"==typeof e.length}function p(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var m="closure_uid_"+(1e9*Math.random()>>>0),g=0;function y(e,t,n){return e.call.apply(e.bind,arguments)}function v(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function w(e,t,n){return w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:v,w.apply(null,arguments)}function b(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var T=Date.now||function(){return+new Date};function S(e,t){function n(){}n.prototype=t.prototype,e.N=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.yb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function E(){this.j=this.j,this.i=this.i}var C=0;E.prototype.j=!1,E.prototype.la=function(){if(!this.j&&(this.j=!0,this.G(),0!=C))this[m]||(this[m]=++g)},E.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var O=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(s(e))return s(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},_=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=s(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function I(e){e:{for(var t=Gn,n=e.length,r=s(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:s(e)?e.charAt(t):e[t]}function k(e){return Array.prototype.concat.apply([],arguments)}function D(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function A(e){return/^[\s\xa0]*$/.test(e)}var F,M=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function N(e,t){return-1!=e.indexOf(t)}function R(e,t){return e<t?-1:e>t?1:0}e:{var L=a.navigator;if(L){var P=L.userAgent;if(P){F=P;break e}}F=""}function x(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function B(e){var t,n={};for(t in e)n[t]=e[t];return n}var q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(var o=0;o<q.length;o++)n=q[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function V(e){return V[" "](e),e}function j(e,t){var n=te;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}V[" "]=l;var W,K=N(F,"Opera"),G=N(F,"Trident")||N(F,"MSIE"),z=N(F,"Edge"),Q=z||G,H=N(F,"Gecko")&&!(N(F.toLowerCase(),"webkit")&&!N(F,"Edge"))&&!(N(F,"Trident")||N(F,"MSIE"))&&!N(F,"Edge"),Y=N(F.toLowerCase(),"webkit")&&!N(F,"Edge");function J(){var e=a.document;return e?e.documentMode:void 0}e:{var X="",$=function(){var e=F;return H?/rv:([^\);]+)(\)|;)/.exec(e):z?/Edge\/([\d\.]+)/.exec(e):G?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Y?/WebKit\/(\S+)/.exec(e):K?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if($&&(X=$?$[1]:""),G){var Z=J();if(null!=Z&&Z>parseFloat(X)){W=String(Z);break e}}W=X}var ee,te={};function ne(e){return j(e,function(){for(var t=0,n=M(String(W)).split("."),r=M(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=R(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||R(0==a[2].length,0==s[2].length)||R(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t})}var re=a.document;ee=re&&G?J()||("CSS1Compat"==re.compatMode?parseInt(W,10):5):void 0;var ie=!G||9<=Number(ee),oe=G&&!ne("9"),ae=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{a.addEventListener("test",l,t),a.removeEventListener("test",l,t)}catch(e){}return e}();function se(e,t){this.type=e,this.a=this.target=t,this.Ja=!0}function ue(e,t){if(se.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(H){e:{try{V(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=s(e.pointerType)?e.pointerType:ce[e.pointerType]||"",this.c=e,e.defaultPrevented&&this.b()}}se.prototype.b=function(){this.Ja=!1},S(ue,se);var ce={2:"touch",3:"pen",4:"mouse"};ue.prototype.b=function(){ue.N.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,oe)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(e){}};var le="closure_listenable_"+(1e6*Math.random()|0),de=0;function he(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.da=i,this.key=++de,this.X=this.Z=!1}function fe(e){e.X=!0,e.listener=null,e.proxy=null,e.src=null,e.da=null}function pe(e){this.src=e,this.a={},this.b=0}function me(e,t){var n=t.type;if(n in e.a){var r,i=e.a[n],o=O(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(fe(t),0==e.a[n].length&&(delete e.a[n],e.b--))}}function ge(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.X&&o.listener==t&&o.capture==!!n&&o.da==r)return i}return-1}pe.prototype.add=function(e,t,n,r,i){var o=e.toString();e=this.a[o],e||(e=this.a[o]=[],this.b++);var a=ge(e,t,r,i);return-1<a?(t=e[a],n||(t.Z=!1)):(t=new he(t,this.src,o,!!r,i),t.Z=n,e.push(t)),t};var ye="closure_lm_"+(1e6*Math.random()|0),ve={};function we(e,t,n,r,i){if(r&&r.once)return Se(e,t,n,r,i);if(h(t)){for(var o=0;o<t.length;o++)we(e,t[o],n,r,i);return null}return n=Ae(n),e&&e[le]?e.Aa(t,n,p(r)?!!r.capture:!!r,i):be(e,t,n,!1,r,i)}function be(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=p(i)?!!i.capture:!!i;if(a&&!ie)return null;var s=ke(e);if(s||(e[ye]=s=new pe(e)),n=s.add(t,n,r,a,o),n.proxy)return n;if(r=Te(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ae||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Oe(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Te(){var e=Ie,t=ie?function(n){return e.call(t.src,t.listener,n)}:function(n){if(n=e.call(t.src,t.listener,n),!n)return n};return t}function Se(e,t,n,r,i){if(h(t)){for(var o=0;o<t.length;o++)Se(e,t[o],n,r,i);return null}return n=Ae(n),e&&e[le]?e.Ba(t,n,p(r)?!!r.capture:!!r,i):be(e,t,n,!0,r,i)}function Ee(e,t,n,r,i){if(h(t))for(var o=0;o<t.length;o++)Ee(e,t[o],n,r,i);else r=p(r)?!!r.capture:!!r,n=Ae(n),e&&e[le]?(e=e.c,t=String(t).toString(),t in e.a&&(o=e.a[t],n=ge(o,n,r,i),-1<n&&(fe(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--)))):e&&(e=ke(e))&&(t=e.a[t.toString()],e=-1,t&&(e=ge(t,n,r,i)),(n=-1<e?t[e]:null)&&Ce(n))}function Ce(e){if(!u(e)&&e&&!e.X){var t=e.src;if(t&&t[le])me(t.c,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Oe(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ke(t))?(me(n,e),0==n.b&&(n.src=null,t[ye]=null)):fe(e)}}}function Oe(e){return e in ve?ve[e]:ve[e]="on"+e}function _e(e,t){var n=e.listener,r=e.da||e.src;return e.Z&&Ce(e),n.call(r,t)}function Ie(e,t){return!!e.X||(ie?_e(e,new ue(t,this)):(t=new ue(t||c("window.event"),this),_e(e,t)))}function ke(e){return e=e[ye],e instanceof pe?e:null}var De="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ae(e){return"function"==d(e)?e:(e[De]||(e[De]=function(t){return e.handleEvent(t)}),e[De])}function Fe(){E.call(this),this.c=new pe(this),this.J=this,this.B=null}function Me(e,t,n,r){if(t=e.c.a[String(t)],!t)return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.X&&a.capture==n){var s=a.listener,u=a.da||a.src;a.Z&&me(e.c,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Ja}S(Fe,E),Fe.prototype[le]=!0,r=Fe.prototype,r.addEventListener=function(e,t,n,r){we(this,e,t,n,r)},r.removeEventListener=function(e,t,n,r){Ee(this,e,t,n,r)},r.dispatchEvent=function(e){var t,n=this.B;if(n)for(t=[];n;n=n.B)t.push(n);n=this.J;var r=e.type||e;if(s(e))e=new se(e,n);else if(e instanceof se)e.target=e.target||n;else{var i=e;e=new se(r,n),U(e,i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.a=t[o];i=Me(a,r,!0,e)&&i}if(a=e.a=n,i=Me(a,r,!0,e)&&i,i=Me(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)a=e.a=t[o],i=Me(a,r,!1,e)&&i;return i},r.G=function(){if(Fe.N.G.call(this),this.c){var e,t=this.c;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)fe(n[r]);delete t.a[e],t.b--}}this.B=null},r.Aa=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)},r.Ba=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)};var Ne=a.JSON.stringify;function Re(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function Le(){this.b=this.a=null}Re.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var Pe,xe=new Re(function(){return new qe},function(e){e.reset()});function Be(){var e=Ke,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function qe(){this.next=this.b=this.a=null}function Ue(e){a.setTimeout(function(){throw e},0)}function Ve(e,t){Pe||je(),We||(Pe(),We=!0),Ke.add(e,t)}function je(){var e=a.Promise.resolve(void 0);Pe=function(){e.then(Ge)}}Le.prototype.add=function(e,t){var n=xe.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},qe.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},qe.prototype.reset=function(){this.next=this.b=this.a=null};var We=!1,Ke=new Le;function Ge(){for(var e;e=Be();){try{e.a.call(e.b)}catch(e){Ue(e)}var t=xe;t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}We=!1}function ze(e,t){Fe.call(this),this.b=e||1,this.a=t||a,this.f=w(this.gb,this),this.g=T()}function Qe(e){e.ba=!1,e.L&&(e.a.clearTimeout(e.L),e.L=null)}function He(e,t,n){if("function"==d(e))n&&(e=w(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=w(e.handleEvent,e)}return 2147483647<Number(t)?-1:a.setTimeout(e,t||0)}function Ye(e,t,n){E.call(this),this.f=null!=n?w(e,n):e,this.c=t,this.b=w(this.ab,this),this.a=[]}function Je(e){e.U=He(e.b,e.c),e.f.apply(null,e.a)}function Xe(e){E.call(this),this.b=e,this.a={}}S(ze,Fe),r=ze.prototype,r.ba=!1,r.L=null,r.gb=function(){if(this.ba){var e=T()-this.g;0<e&&e<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-e):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(Qe(this),this.start()))}},r.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=T())},r.G=function(){ze.N.G.call(this),Qe(this),delete this.a},S(Ye,E),r=Ye.prototype,r.ea=!1,r.U=null,r.Ua=function(e){this.a=arguments,this.U?this.ea=!0:Je(this)},r.G=function(){Ye.N.G.call(this),this.U&&(a.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},r.ab=function(){this.U=null,this.ea&&(this.ea=!1,Je(this))},S(Xe,E);var $e=[];function Ze(e,t,n,r){h(n)||(n&&($e[0]=n.toString()),n=$e);for(var i=0;i<n.length;i++){var o=we(t,n[i],r||e.handleEvent,!1,e.b||e);if(!o)break;e.a[o.key]=o}}function et(e){x(e.a,function(e,t){this.a.hasOwnProperty(t)&&Ce(e)},e),e.a={}}function tt(){}Xe.prototype.G=function(){Xe.N.G.call(this),et(this)},Xe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var nt=new Fe;function rt(e){se.call(this,"serverreachability",e)}function it(e){nt.dispatchEvent(new rt(nt,e))}function ot(e){se.call(this,"statevent",e)}function at(e){nt.dispatchEvent(new ot(nt,e))}function st(e){se.call(this,"timingevent",e)}function ut(e,t){if("function"!=d(e))throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){e()},t)}S(rt,se),S(ot,se),S(st,se);var ct={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,Ma:7,TIMEOUT:8,sb:9},lt={jb:"complete",wb:"success",Na:"error",Ma:"abort",ub:"ready",vb:"readystatechange",TIMEOUT:"timeout",qb:"incrementaldata",tb:"progress",lb:"downloadprogress",xb:"uploadprogress"};function dt(){}function ht(e){var t;return(t=e.a)||(t=e.a={}),t}function ft(){}dt.prototype.a=null;var pt,mt={OPEN:"a",ib:"b",Na:"c",rb:"d"};function gt(){se.call(this,"d")}function yt(){se.call(this,"c")}function vt(){}function wt(e,t,n){this.g=e,this.W=t,this.V=n||1,this.I=new Xe(this),this.O=bt,e=Q?125:void 0,this.P=new ze(e),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}S(gt,se),S(yt,se),S(vt,dt),pt=new vt;var bt=45e3,Tt={},St={};function Et(e,t,n){e.F=1,e.f=Xt(Kt(t)),e.l=n,e.H=!0,Ot(e,null)}function Ct(e,t,n,r){e.F=1,e.f=Xt(Kt(t)),e.l=null,e.H=n,Ot(e,r)}function Ot(e,t){e.v=T(),kt(e),e.D=Kt(e.f),Jt(e.D,"t",e.V),e.A=0,e.a=e.g.$(e.g.Y()?t:null),0<e.J&&(e.B=new Ye(w(e.Ka,e,e.a),e.J)),Ze(e.I,e.a,"readystatechange",e.eb),t=e.h?B(e.h):{},e.l?(e.w||(e.w="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.a.ca(e.D,e.w,e.l,t)):(e.w="GET",e.a.ca(e.D,e.w,null,t)),it(1)}function _t(e,t,n){for(var r=!0;!e.m&&e.A<n.length;){var i=It(e,n);if(i==St){4==t&&(e.c=4,at(14),r=!1);break}if(i==Tt){e.c=4,at(15),r=!1;break}Nt(e,i)}4==t&&0==n.length&&(e.c=1,at(16),r=!1),e.b=e.b&&r,r||(Mt(e),Ft(e))}function It(e,t){var n=e.A,r=t.indexOf("\n",n);return-1==r?St:(n=Number(t.substring(n,r)),isNaN(n)?Tt:(r+=1,r+n>t.length?St:(t=t.substr(r,n),e.A=r+n,t)))}function kt(e){e.R=T()+e.O,Dt(e,e.O)}function Dt(e,t){if(null!=e.i)throw Error("WatchDog timer not null");e.i=ut(w(e.bb,e),t)}function At(e){e.i&&(a.clearTimeout(e.i),e.i=null)}function Ft(e){e.g.Da()||e.m||e.g.na(e)}function Mt(e){At(e);var t=e.B;t&&"function"==typeof t.la&&t.la(),e.B=null,Qe(e.P),et(e.I),e.a&&(t=e.a,e.a=null,t.abort(),t.la())}function Nt(e,t){try{e.g.Ga(e,t),it(4)}catch(e){}}function Rt(e){if(e.C&&"function"==typeof e.C)return e.C();if(s(e))return e.split("");if(f(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}function Lt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(f(e)||s(e))_(e,t,void 0);else{if(e.K&&"function"==typeof e.K)var n=e.K();else if(e.C&&"function"==typeof e.C)n=void 0;else if(f(e)||s(e)){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=Rt(e),i=r.length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function Pt(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Pt)for(n=e.K(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function xt(e){e.b={},e.a.length=0,e.c=0}function Bt(e,t){Ut(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&qt(e))}function qt(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Ut(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)r=e.a[t],Ut(i,r)||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function Ut(e,t){return Object.prototype.hasOwnProperty.call(e,t)}r=wt.prototype,r.setTimeout=function(e){this.O=e},r.eb=function(e){e=e.target;var t=this.B;t&&3==Xn(e)?t.Ua():this.Ka(e)},r.Ka=function(e){try{if(e==this.a)e:{var t=Xn(this.a),n=this.a.ya(),r=this.a.T();if(!(3>t||3==t&&!Q&&!this.a.aa())){this.m||4!=t||7==n||it(8==n||0>=r?3:2),At(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){t:{if(this.a){var a=$n(this.a,"X-HTTP-Initial-Response");if(a&&!A(a)){var s=a;break t}}s=null}if(!s){this.b=!1,this.c=3,at(12),Mt(this),Ft(this);break e}this.s=!0,Nt(this,s)}this.H?(_t(this,t,o),Q&&this.b&&3==t&&(Ze(this.I,this.P,"tick",this.cb),this.P.start())):Nt(this,o),4==t&&Mt(this),this.b&&!this.m&&(4==t?this.g.na(this):(this.b=!1,kt(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,at(12)):(this.c=0,at(13)),Mt(this),Ft(this)}}}catch(e){}},r.cb=function(){if(this.a){var e=Xn(this.a),t=this.a.aa();this.A<t.length&&(At(this),_t(this,e,t),this.b&&4!=e&&kt(this))}},r.cancel=function(){this.m=!0,Mt(this)},r.bb=function(){this.i=null;var e=T();0<=e-this.R?(2!=this.F&&(it(3),at(17)),Mt(this),this.c=2,Ft(this)):Dt(this,this.R-e)},r=Pt.prototype,r.C=function(){qt(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},r.K=function(){return qt(this),this.a.concat()},r.get=function(e,t){return Ut(this.b,e)?this.b[e]:t},r.set=function(e,t){Ut(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},r.forEach=function(e,t){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Vt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function jt(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Wt(e,t){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,e instanceof Wt?(this.h=void 0!==t?t:e.h,Gt(this,e.f),this.j=e.j,zt(this,e.b),Qt(this,e.i),this.a=e.a,Ht(this,pn(e.c)),this.g=e.g):e&&(n=String(e).match(Vt))?(this.h=!!t,Gt(this,n[1]||"",!0),this.j=en(n[2]||""),zt(this,n[3]||"",!0),Qt(this,n[4]),this.a=en(n[5]||"",!0),Ht(this,n[6]||"",!0),this.g=en(n[7]||"")):(this.h=!!t,this.c=new cn(null,this.h))}function Kt(e){return new Wt(e)}function Gt(e,t,n){e.f=n?en(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function zt(e,t,n){e.b=n?en(t,!0):t}function Qt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.i=t}else e.i=null}function Ht(e,t,n){t instanceof cn?(e.c=t,gn(e.c,e.h)):(n||(t=tn(t,sn)),e.c=new cn(t,e.h))}function Yt(e,t,n){e.c.set(t,n)}function Jt(e,t,n){h(n)||(n=[String(n)]),fn(e.c,t,n)}function Xt(e){return Yt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^T()).toString(36)),e}function $t(e){return e instanceof Wt?Kt(e):new Wt(e,void 0)}function Zt(e,t,n,r){var i=new Wt(null,void 0);return e&&Gt(i,e),t&&zt(i,t),n&&Qt(i,n),r&&(i.a=r),i}function en(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function tn(e,t,n){return s(e)?(e=encodeURI(e).replace(t,nn),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function nn(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(15&e).toString(16)}Wt.prototype.toString=function(){var e=[],t=this.f;t&&e.push(tn(t,rn,!0),":");var n=this.b;return(n||"file"==t)&&(e.push("//"),(t=this.j)&&e.push(tn(t,rn,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.i,null!=n&&e.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(tn(n,"/"==n.charAt(0)?an:on,!0))),(n=this.c.toString())&&e.push("?",n),(n=this.g)&&e.push("#",tn(n,un)),e.join("")},Wt.prototype.resolve=function(e){var t=Kt(this),n=!!e.f;n?Gt(t,e.f):n=!!e.j,n?t.j=e.j:n=!!e.b,n?zt(t,e.b):n=null!=e.i;var r=e.a;if(n)Qt(t,e.i);else if(n=!!e.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=t.a.lastIndexOf("/");-1!=i&&(r=t.a.substr(0,i+1)+r)}if(i=r,".."==i||"."==i)r="";else if(N(i,"./")||N(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.a=r:n=""!==e.c.toString(),n?Ht(t,pn(e.c)):n=!!e.g,n&&(t.g=e.g),t};var rn=/[#\/\?@]/g,on=/[#\?:]/g,an=/[#\?]/g,sn=/[#\?@]/g,un=/#/g;function cn(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function ln(e){e.a||(e.a=new Pt,e.b=0,e.c&&jt(e.c,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function dn(e,t){ln(e),t=mn(e,t),Ut(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,Bt(e.a,t))}function hn(e,t){return ln(e),t=mn(e,t),Ut(e.a.b,t)}function fn(e,t,n){dn(e,t),0<n.length&&(e.c=null,e.a.set(mn(e,t),D(n)),e.b+=n.length)}function pn(e){var t=new cn;return t.c=e.c,e.a&&(t.a=new Pt(e.a),t.b=e.b),t}function mn(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function gn(e,t){t&&!e.f&&(ln(e),e.c=null,e.a.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(dn(this,t),fn(this,n,e))},e)),e.f=t}function yn(){}function vn(){}function wn(e){this.a=e,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function bn(e){var t=e.a.F.a;if(null!=t)at(4),t?(at(10),hr(e.a,e,!1)):(at(11),hr(e.a,e,!0));else{e.b=new wt(e,void 0,void 0),e.b.h=e.h,t=e.a,t=yr(t,t.Y()?e.f:null,e.i),at(4),Jt(t,"TYPE","xmlhttp");var n=e.a.j,r=e.a.I;n&&r&&Yt(t,n,r),Ct(e.b,t,!1,e.f)}}function Tn(){this.a=this.b=null}function Sn(){this.a=new Pt}function En(e){var t=typeof e;return"object"==t&&e||"function"==t?"o"+(e[m]||(e[m]=++g)):t.charAt(0)+e}function Cn(e,t){this.b=e,this.a=t}function On(e){this.g=e||_n,a.PerformanceNavigationTiming?(e=a.performance.getEntriesByType("navigation"),e=0<e.length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol)):e=!!(a.ka&&a.ka.Ea&&a.ka.Ea()&&a.ka.Ea().zb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new Sn),this.b=null,this.c=[]}r=cn.prototype,r.add=function(e,t){ln(this),this.c=null,e=mn(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},r.forEach=function(e,t){ln(this),this.a.forEach(function(n,r){_(n,function(n){e.call(t,n,r,this)},this)},this)},r.K=function(){ln(this);for(var e=this.a.C(),t=this.a.K(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},r.C=function(e){ln(this);var t=[];if(s(e))hn(this,e)&&(t=k(t,this.a.get(mn(this,e))));else{e=this.a.C();for(var n=0;n<e.length;n++)t=k(t,e[n])}return t},r.set=function(e,t){return ln(this),this.c=null,e=mn(this,e),hn(this,e)&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},r.get=function(e,t){return e?(e=this.C(e),0<e.length?String(e[0]):t):t},r.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.K(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")},S(vn,yn),r=wn.prototype,r.M=null,r.$=function(e){return this.a.$(e)},r.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},r.Da=function(){return!1},r.Ga=function(e,t){if(this.c=e.o,0==this.M){if(!this.a.o&&(e=e.a)){var n=$n(e,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(e=$n(e,"X-HTTP-Session-Id"))&&(this.a.I=e)}if(t){try{var r=this.a.ja.a.parse(t)}catch(e){return t=this.a,t.m=this.c,void mr(t,2)}this.f=r[0]}else t=this.a,t.m=this.c,mr(t,2)}else 1==this.M&&(this.g?at(6):"11111"==t?(at(5),this.g=!0,(!G||10<=Number(ee))&&(this.c=200,this.b.cancel(),at(11),hr(this.a,this,!0))):(at(7),this.g=!1))},r.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,bn(this)):1==this.M&&(this.g?(at(11),hr(this.a,this,!0)):(at(10),hr(this.a,this,!1)));else{0==this.M?at(8):1==this.M&&at(9);var e=this.a;e.m=this.c,mr(e,2)}},r.Y=function(){return this.a.Y()},r.ma=function(){return this.a.ma()},Sn.prototype.add=function(e){this.a.set(En(e),e)},Sn.prototype.C=function(){return this.a.C()};var _n=10;function In(e,t){!e.a&&(N(t,"spdy")||N(t,"quic")||N(t,"h2"))&&(e.f=e.g,e.a=new Sn,e.b&&(Fn(e,e.b),e.b=null))}function kn(e){return!!e.b||!!e.a&&e.a.a.c>=e.f}function Dn(e){return e.b?1:e.a?e.a.a.c:0}function An(e,t){return e.b?e=e.b==t:e.a?(t=En(t),e=Ut(e.a.a.b,t)):e=!1,e}function Fn(e,t){e.a?e.a.add(t):e.b=t}function Mn(e,t){var n;e.b&&e.b==t?e.b=null:((n=e.a)&&(n=En(t),n=Ut(e.a.a.b,n)),n&&Bt(e.a.a,En(t)))}function Nn(e){if(null!=e.b)return e.c.concat(e.b.j);if(null!=e.a&&0!=e.a.a.c){var t=e.c;return _(e.a.C(),function(e){t=t.concat(e.j)}),t}return D(e.c)}function Rn(){}function Ln(){this.a=new Rn}function Pn(e,t,n){var r=n||"";try{Lt(e,function(e,n){var i=e;p(e)&&(i=Ne(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function xn(e,t){var n=new tt;if(a.Image){var r=new Image;r.onload=b(Bn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=b(Bn,n,r,"TestLoadImage: error",!1,t),r.onabort=b(Bn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=b(Bn,n,r,"TestLoadImage: timeout",!1,t),a.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function Bn(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}On.prototype.cancel=function(){this.c=Nn(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(_(this.a.C(),function(e){e.cancel()}),xt(this.a.a))},Rn.prototype.stringify=function(e){return a.JSON.stringify(e,void 0)},Rn.prototype.parse=function(e){return a.JSON.parse(e,void 0)};var qn=a.JSON.parse;function Un(e){Fe.call(this),this.headers=new Pt,this.H=e||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=Vn,this.D=this.F=!1}S(Un,Fe);var Vn="",jn=/^https?$/i,Wn=["POST","PUT"];function Kn(e){return G&&ne(9)&&u(e.timeout)&&void 0!==e.ontimeout}function Gn(e){return"content-type"==e.toLowerCase()}function zn(e,t){e.b=!1,e.a&&(e.g=!0,e.a.abort(),e.g=!1),e.f=t,e.h=5,Qn(e),Yn(e)}function Qn(e){e.v||(e.v=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function Hn(e){if(e.b&&"undefined"!=typeof o&&(!e.s[1]||4!=Xn(e)||2!=e.T()))if(e.l&&4==Xn(e))He(e.Fa,0,e);else if(e.dispatchEvent("readystatechange"),4==Xn(e)){e.b=!1;try{var t,n=e.T();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var s=String(e.A).match(Vt)[1]||null;if(!s&&a.self&&a.self.location){var u=a.self.location.protocol;s=u.substr(0,u.length-1)}i=!jn.test(s?s.toLowerCase():"")}t=i}t?(e.dispatchEvent("complete"),e.dispatchEvent("success")):(e.h=6,e.f=e.za()+" ["+e.T()+"]",Qn(e))}finally{Yn(e)}}}function Yn(e,t){if(e.a){Jn(e);var n=e.a,r=e.s[0]?l:null;e.a=null,e.s=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){}}}function Jn(e){e.a&&e.D&&(e.a.ontimeout=null),e.m&&(a.clearTimeout(e.m),e.m=null)}function Xn(e){return e.a?e.a.readyState:0}function $n(e,t){return e.a?e.a.getResponseHeader(t):null}function Zn(e){var t="";return x(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function er(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}if(r)return e;if(n=Zn(n),s(e)){if(t=encodeURIComponent(String(t)),n=null!=n?"="+encodeURIComponent(String(n)):"",t+=n){if(n=e.indexOf("#"),0>n&&(n=e.length),r=e.indexOf("?"),0>r||r>n){r=n;var i=""}else i=e.substring(r+1,n);e=[e.substr(0,r),i,e.substr(n)],n=e[1],e[1]=t?n?n+"&"+t:t:n,e=e[0]+(e[1]?"?"+e[1]:"")+e[2]}return e}return Yt(e,t,n),e}function tr(e){this.f=[],this.F=new Tn,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Ra=this.P=0,this.Pa=!!c("internalChannelParams.failFast",e),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Oa=c("internalChannelParams.baseRetryDelayMs",e)||5e3,this.Sa=c("internalChannelParams.retryDelaySeedMs",e)||1e4,this.Qa=c("internalChannelParams.forwardChannelMaxRetries",e)||2,this.qa=c("internalChannelParams.forwardChannelRequestTimeoutMs",e)||2e4,this.La=e&&e.Ab||void 0,this.D=void 0,this.R=e&&e.supportsCrossDomainXhr||!1,this.H="",this.b=new On(e&&e.concurrentRequestLimit),this.ja=new Ln,this.o=!e||void 0===e.backgroundChannelTest||e.backgroundChannelTest,(this.W=e&&e.fastHandshake||!1)&&!this.o&&(this.o=!0),e&&e.forceLongPolling&&(this.oa=!1),this.fa=void 0}function nr(e){if(rr(e),3==e.u){var t=e.P++,n=Kt(e.B);Yt(n,"SID",e.H),Yt(n,"RID",t),Yt(n,"TYPE","terminate"),ur(e,n),t=new wt(e,t,void 0),t.F=2,t.f=Xt(Kt(n)),n=!1,a.navigator&&a.navigator.sendBeacon&&(n=a.navigator.sendBeacon(t.f.toString(),"")),!n&&a.Image&&((new Image).src=t.f,n=!0),n||(t.a=t.g.$(null),t.a.ca(t.f)),t.v=T(),kt(t)}gr(e)}function rr(e){e.w&&(e.w.abort(),e.w=null),e.a&&(e.a.cancel(),e.a=null),e.l&&(a.clearTimeout(e.l),e.l=null),fr(e),e.b.cancel(),e.h&&(u(e.h)&&a.clearTimeout(e.h),e.h=null)}function ir(e,t){e.f.push(new Cn(e.Ra++,t)),3==e.u&&or(e)}function or(e){kn(e.b)||e.h||(e.h=!0,Ve(e.Ia,e),e.A=0)}function ar(e,t){return!(Dn(e.b)>=e.b.f-(e.h?1:0))&&(e.h?(e.f=t.j.concat(e.f),!0):!(1==e.u||2==e.u||e.A>=(e.Pa?0:e.Qa))&&(e.h=ut(w(e.Ia,e,t),pr(e,e.A)),e.A++,!0))}function sr(e,t){var n;n=t?t.W:e.P++;var r=Kt(e.B);Yt(r,"SID",e.H),Yt(r,"RID",n),Yt(r,"AID",e.O),ur(e,r),e.g&&e.i&&er(r,e.g,e.i),n=new wt(e,n,e.A+1),null===e.g&&(n.h=e.i),t&&(e.f=t.j.concat(e.f)),t=cr(e,n,1e3),n.setTimeout(Math.round(.5*e.qa)+Math.round(.5*e.qa*Math.random())),Fn(e.b,n),Et(n,r,t)}function ur(e,t){e.c&&Lt({},function(e,n){Yt(t,n,e)})}function cr(e,t,n){n=Math.min(e.f.length,n);var r=e.c?w(e.c.Ta,e.c,e):null;e:for(var i=e.f,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(c-=o,0>c)o=Math.max(0,i[u].b-100),s=!1;else try{Pn(l,a,"req"+c+"_")}catch(e){r&&r(l)}}if(s){r=a.join("&");break e}}return e=e.f.splice(0,n),t.j=e,r}function lr(e){e.a||e.l||(e.S=1,Ve(e.Ha,e),e.v=0)}function dr(e){return!(e.a||e.l||3<=e.v)&&(e.S++,e.l=ut(w(e.Ha,e),pr(e,e.v)),e.v++,!0)}function hr(e,t,n){var r=t.l;r&&In(e.b,r),e.ia=e.oa&&n,e.m=t.c,e.B=yr(e,null,e.ha),or(e)}function fr(e){null!=e.s&&(a.clearTimeout(e.s),e.s=null)}function pr(e,t){var n=e.Oa+Math.floor(Math.random()*e.Sa);return e.ma()||(n*=2),n*t}function mr(e,t){if(2==t){var n=null;e.c&&(n=null);var r=w(e.fb,e);n||(n=new Wt("//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||Gt(n,"https"),Xt(n)),xn(n.toString(),r)}else at(2);e.u=0,e.c&&e.c.ta(t),gr(e),rr(e)}function gr(e){e.u=0,e.m=-1,e.c&&(0==Nn(e.b).length&&0==e.f.length||(e.b.c.length=0,D(e.f),e.f.length=0),e.c.sa())}function yr(e,t,n){var r=$t(n);if(""!=r.b)t&&zt(r,t+"."+r.b),Qt(r,r.i);else{var i,o=a.location;i=t?t+"."+o.hostname:o.hostname,r=Zt(o.protocol,i,+o.port,n)}return e.V&&x(e.V,function(e,t){Yt(r,t,e)}),t=e.j,n=e.I,t&&n&&Yt(r,t,n),Yt(r,"VER",e.wa),ur(e,r),r}function vr(){}function wr(e){for(var t=arguments[0],n=1;n<arguments.length;n++){var r,i=arguments[n];if(0==i.lastIndexOf("/",0))t=i;else(r=""==t)||(r=t.length-1,r=0<=r&&t.indexOf("/",r)==r),t+=r?i:"/"+i}return t}function br(){if(G&&!(10<=Number(ee)))throw Error("Environmental error: no available transport.")}function Tr(e,t){Fe.call(this),this.a=new tr(t),this.g=e,this.m=t&&t.testUrl?t.testUrl:wr(this.g,"test"),this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.i=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.xa&&(e?e["X-WebChannel-Client-Profile"]=t.xa:e={"X-WebChannel-Client-Profile":t.xa}),this.a.J=e,(e=t&&t.httpHeadersOverwriteParam)&&!A(e)&&(this.a.g=e),this.l=t&&t.supportsCrossDomainXhr||!1,this.h=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!A(t)&&(this.a.j=t,e=this.b,null!==e&&t in e&&(e=this.b,t in e&&delete e[t])),this.f=new Cr(this)}function Sr(e){gt.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.c=e)?(e=this.c,this.data=null!==t&&e in t?t[e]:void 0):this.data=t}else this.data=e}function Er(){yt.call(this),this.status=1}function Cr(e){this.a=e}r=Un.prototype,r.ca=function(e,t,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+e);t=t?t.toUpperCase():"GET",this.A=e,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?ht(this.H):ht(pt),this.a.onreadystatechange=w(this.Fa,this);try{this.w=!0,this.a.open(t,String(e),!0),this.w=!1}catch(e){return void zn(this,e)}e=n||"";var i=new Pt(this.headers);r&&Lt(r,function(e,t){i.set(t,e)}),r=I(i.K()),n=a.FormData&&e instanceof a.FormData,!(0<=O(Wn,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(e,t){this.a.setRequestHeader(t,e)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Jn(this),0<this.o&&((this.D=Kn(this.a))?(this.a.timeout=this.o,this.a.ontimeout=w(this.Ca,this)):this.m=He(this.Ca,this.o,this)),this.l=!0,this.a.send(e),this.l=!1}catch(e){zn(this,e)}},r.Ca=function(){"undefined"!=typeof o&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},r.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Yn(this))},r.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Yn(this,!0)),Un.N.G.call(this)},r.Fa=function(){this.j||(this.w||this.l||this.g?Hn(this):this.$a())},r.$a=function(){Hn(this)},r.T=function(){try{return 2<Xn(this)?this.a.status:-1}catch(e){return-1}},r.za=function(){try{return 2<Xn(this)?this.a.statusText:""}catch(e){return""}},r.aa=function(){try{return this.a?this.a.responseText:""}catch(e){return""}},r.Va=function(e){if(this.a){var t=this.a.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),qn(t)}},r.ya=function(){return this.h},r.Ya=function(){return s(this.f)?this.f:String(this.f)},r=tr.prototype,r.wa=8,r.u=1,r.Da=function(){return 0==this.u},r.Ia=function(e){if(this.h)if(this.h=null,1==this.u){if(!e){this.P=Math.floor(1e5*Math.random()),e=this.P++;var t,n=new wt(this,e,void 0),r=this.i;if(this.J&&(r?(r=B(r),U(r,this.J)):r=this.J),null===this.g&&(n.h=r),this.W)e:{for(var i=t=0;i<this.f.length;i++){var o=this.f[i];if(o="__data__"in o.a&&(o=o.a.__data__,s(o))?o.length:void 0,void 0===o)break;if(t+=o,4096<t){t=i;break e}if(4096===t||i===this.f.length-1){t=i+1;break e}}t=1e3}else t=1e3;t=cr(this,n,t),i=Kt(this.B),Yt(i,"RID",e),Yt(i,"CVER",22),this.o&&this.j&&Yt(i,"X-HTTP-Session-Id",this.j),ur(this,i),this.g&&r&&er(i,this.g,r),Fn(this.b,n),this.W?(Yt(i,"$req",t),Yt(i,"SID","null"),n.S=!0,Et(n,i,null)):Et(n,i,t),this.u=2}}else 3==this.u&&(e?sr(this,e):0==this.f.length||kn(this.b)||sr(this))},r.Ha=function(){this.l=null,this.a=new wt(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var e=Kt(this.pa);Yt(e,"RID","rpc"),Yt(e,"SID",this.H),Yt(e,"CI",this.ia?"0":"1"),Yt(e,"AID",this.O),ur(this,e),Yt(e,"TYPE","xmlhttp"),this.g&&this.i&&er(e,this.g,this.i),this.D&&this.a.setTimeout(this.D),Ct(this.a,e,!0,this.ga)},r.Ga=function(e,t){if(0!=this.u&&(this.a==e||An(this.b,e)))if(this.m=e.o,!e.s&&An(this.b,e)&&3==this.u){try{var n=this.ja.a.parse(t)}catch(e){n=null}if(h(n)&&3==n.length){if(t=n,0==t[0]){e:if(!this.l){if(this.a){if(!(this.a.v+3e3<e.v))break e;fr(this),this.a.cancel(),this.a=null}dr(this),at(18)}}else this.ra=t[1],0<this.ra-this.O&&37500>t[2]&&this.ia&&0==this.v&&!this.s&&(this.s=ut(w(this.Za,this),6e3));if(1>=Dn(this.b)&&this.fa){try{this.fa()}catch(e){}this.fa=void 0}}else mr(this,11)}else if((e.s||this.a==e)&&fr(this),!A(t))for(t=n=this.ja.a.parse(t),n=0;n<t.length;n++){var r=t[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),r=r[5],null!=r&&u(r)&&0<r&&(this.D=1.5*r),this.o&&(r=e.a)&&((i=$n(r,"X-Client-Wire-Protocol"))&&In(this.b,i),this.j&&(r=$n(r,"X-HTTP-Session-Id")))&&(this.I=r,Yt(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=e,this.pa=yr(this,this.Y()?this.ga:null,this.ha),r.s?(Mn(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(At(r),kt(r)),this.a=r):lr(this),0<this.f.length&&or(this)}else"stop"!=r[0]&&"close"!=r[0]||mr(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?mr(this,7):nr(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},r.Za=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,dr(this),at(19))},r.na=function(e){var t=null;if(this.a==e){fr(this),this.a=null;var n=2}else{if(!An(this.b,e))return;t=e.j,Mn(this.b,e),n=1}if(this.m=e.o,0!=this.u)if(e.b)1==n?(t=T()-e.v,nt.dispatchEvent(new st(nt,e.l?e.l.length:0,t,this.A)),or(this)):lr(this);else{var r=e.c;if(3==r||0==r&&0<this.m||!(1==n&&ar(this,e)||2==n&&dr(this)))switch(t&&0<t.length&&(e=this.b,e.c=e.c.concat(t)),r){case 1:mr(this,5);break;case 4:mr(this,10);break;case 3:mr(this,6);break;default:mr(this,2)}}},r.fb=function(e){at(e?2:1)},r.$=function(e){if(e&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return e=new Un(this.La),e.F=this.R,e},r.ma=function(){return!!this.c&&!0},r.Y=function(){return this.R},r=vr.prototype,r.va=function(){},r.ua=function(){},r.ta=function(){},r.sa=function(){},r.Ta=function(){},br.prototype.a=function(e,t){return new Tr(e,t)},S(Tr,Fe),r=Tr.prototype,r.addEventListener=function(e,t,n,r){Tr.N.addEventListener.call(this,e,t,n,r)},r.removeEventListener=function(e,t,n,r){Tr.N.removeEventListener.call(this,e,t,n,r)},r.Wa=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var e=this.a,t=this.m,n=this.g,r=this.b||void 0;at(0),e.ha=n,e.V=r||{},e.o&&(e.F.b=[],e.F.a=!1),e.w=new wn(e),null===e.g&&(e.w.h=e.i),n=t,e.g&&e.i&&(n=er(t,e.g,e.i)),e=e.w,e.i=n,t=yr(e.a,null,e.i),at(3),n=e.a.F.b,null!=n?(e.f=n[0],e.M=1,bn(e)):(Jt(t,"MODE","init"),!e.a.o&&e.a.j&&Jt(t,"X-HTTP-Session-Id",e.a.j),e.b=new wt(e,void 0,void 0),e.b.h=e.h,Ct(e.b,t,!1,null),e.M=0)},r.close=function(){nr(this.a)},r.Xa=function(e){if(s(e)){var t={};t.__data__=e,ir(this.a,t)}else this.h?(t={},t.__data__=Ne(e),ir(this.a,t)):ir(this.a,e)},r.G=function(){this.a.c=null,delete this.f,nr(this.a),delete this.a,Tr.N.G.call(this)},S(Sr,gt),S(Er,yt),S(Cr,vr),Cr.prototype.va=function(){this.a.dispatchEvent("a")},Cr.prototype.ua=function(e){this.a.dispatchEvent(new Sr(e))},Cr.prototype.ta=function(e){this.a.dispatchEvent(new Er(e))},Cr.prototype.sa=function(){this.a.dispatchEvent("b")};var Or=b(function(e,t){function n(){}n.prototype=e.prototype;var r=new n;return e.apply(r,Array.prototype.slice.call(arguments,1)),r},br);br.prototype.createWebChannel=br.prototype.a,Tr.prototype.send=Tr.prototype.Xa,Tr.prototype.open=Tr.prototype.Wa,Tr.prototype.close=Tr.prototype.close,ct.NO_ERROR=0,ct.TIMEOUT=8,ct.HTTP_ERROR=6,lt.COMPLETE="complete",ft.EventType=mt,mt.OPEN="a",mt.CLOSE="b",mt.ERROR="c",mt.MESSAGE="d",Fe.prototype.listen=Fe.prototype.Aa,Un.prototype.listenOnce=Un.prototype.Ba,Un.prototype.getLastError=Un.prototype.Ya,Un.prototype.getLastErrorCode=Un.prototype.ya,Un.prototype.getStatus=Un.prototype.T,Un.prototype.getStatusText=Un.prototype.za,Un.prototype.getResponseJson=Un.prototype.Va,Un.prototype.getResponseText=Un.prototype.aa,Un.prototype.send=Un.prototype.ca;var _r={createWebChannelTransport:Or,ErrorCode:ct,EventType:lt,WebChannel:ft,XhrIo:Un},Ir=_r.createWebChannelTransport,kr=_r.ErrorCode,Dr=_r.EventType,Ar=_r.WebChannel,Fr=_r.XhrIo;t["default"]=_r}.call(this,n("yLpj"))}}]);