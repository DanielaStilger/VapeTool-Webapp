(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{"7zBA":function(e,t,a){"use strict";a.r(t);a("14J3");var n=a("BMrR"),r=(a("Znn+"),a("ZTPi")),i=(a("jCWc"),a("kPKH")),o=a("q1tI"),l=a.n(o),c=a("9kvl"),s=(a("IzEo"),a("bx4M")),u=(a("+L6B"),a("2/Rp")),p=(a("5NDa"),a("5rEg")),m=a("ODXe"),h=a("v83y"),d=a("qo5n"),g=a("71ry"),f=function(e){var t=e.dispatch,a=e.type,n=l.a.useState(h["EditorState"].createEmpty()),r=Object(m["a"])(n,2),i=r[0],o=r[1],f=function(e){return Object(d["dispatchSetTitle"])(t,e.target.value)},b=function(e){return Object(d["dispatchSetText"])(t,e.target.value)},E=function(){return Object(d["dispatchSubmit"])(t,"post"===a?d["SUBMIT_POST"]:d["SUBMIT_LINK"])};return l.a.createElement(s["a"],{style:{textAlign:"center"}},l.a.createElement(p["a"],{placeholder:Object(c["ic"])().formatMessage({id:"post"===a?"misc.title":"misc.url"}),onChange:f,style:{marginBottom:24}}),l.a.createElement(p["a"].TextArea,{allowClear:!0,placeholder:Object(c["ic"])().formatMessage({id:"misc.optionalText",defaultMessage:"Text (Optional)"}),onChange:b}),l.a.createElement(h["Editor"],{editorState:i,onChange:o}),l.a.createElement(u["default"],{type:"primary",onClick:E},l.a.createElement(c["q"],{id:"user.actions.publishPost",defaultMessage:"Publish post"}),l.a.createElement(g["ShareAltOutlined"],null)))},b=Object(c["tb"])((function(e){var t=e.user;return{user:t.currentUser}}))(f),E=a("yihf"),v=a("sqCN"),w=a("mpQp"),y=a("Fvcw"),x=a("Uw7j"),C=function(e){var t=e.dispatch,a=e.currentTab,o=Object(v["changeTab"])(t);return l.a.createElement(n["a"],null,l.a.createElement(i["a"],{xs:0,md:4,lg:6,xl:8}),l.a.createElement(i["a"],{xs:24,md:16,lg:14,xl:10},l.a.createElement(r["a"],{onChange:o,type:"card",activeKey:a},l.a.createElement(r["a"].TabPane,{tab:l.a.createElement("span",null,l.a.createElement(w["a"],null),l.a.createElement(c["q"],{id:"user.photo",defaultMessage:"Photo"})),key:v["a"].PHOTO},l.a.createElement(E["default"],null)),l.a.createElement(r["a"].TabPane,{tab:l.a.createElement("span",null,l.a.createElement(y["a"],null),l.a.createElement(c["q"],{id:"user.post",defaultMessage:"Post"})),key:v["a"].POST},l.a.createElement(b,{type:"post"})),l.a.createElement(r["a"].TabPane,{tab:l.a.createElement("span",null,l.a.createElement(x["a"],null),l.a.createElement(c["q"],{id:"user.link",defaultMessage:"Link"})),key:v["a"].LINK},l.a.createElement(b,{type:"link"})))),l.a.createElement(i["a"],{xs:0,md:4,lg:6,xl:8}))};t["default"]=Object(c["tb"])((function(e){var t=e.upload;return{currentTab:t.currentTab}}))(C)},oVF2:function(e,t,a){"use strict";a("IzEo");var n=a("bx4M"),r=(a("+L6B"),a("2/Rp")),i=(a("tU7J"),a("wFql")),o=a("o0o1"),l=a.n(o),c=a("HaE+"),s=a("1OyB"),u=a("vuIU"),p=a("Ji7U"),m=a("LK+K"),h=(a("miYZ"),a("tsqr")),d=(a("DZo9"),a("8z0m")),g=a("q1tI"),f=a.n(g),b=a("qQNu"),E=a.n(b),v=a("LtfV"),w=a("ycIM"),y=a("X72a"),x=(a("hzVQ"),a("9kvl")),C=d["a"].Dragger;function O(e){var t="image/jpeg"===e.type||"image/png"===e.type;t||h["a"].error("You can only upload JPG/PNG file!");var a=e.size/1024/1024<20;return a||h["a"].error("Image must smaller than 20MB!"),t&&a}function j(e){return new Promise((function(t,a){if(!e.originFileObj)return a(new Error("Origin file object undefined"));var n=new FileReader;return n.readAsDataURL(e.originFileObj),n.onload=function(){"string"===typeof n.result?t(n.result):a(new Error("Can not process ArrayBuffer"))},n.onerror=function(e){return a(e)},n}))}var S="image/jpeg",k=.92,I=function(e){Object(p["a"])(a,e);var t=Object(m["a"])(a);function a(){var e;Object(s["a"])(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),e.state={sourceImage:void 0,crop:void 0},e.imageRef=void 0,e.croppedFileUrl=void 0,e.onUploadChange=function(){var t=Object(c["a"])(l.a.mark((function t(a){var n,r;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=a.file.status,"uploading"!==n&&console.log(a.file,a.fileList),"done"!==n){t.next=10;break}return h["a"].success("".concat(a.file.name," file uploaded successfully.")),t.next=6,j(a.file);case 6:r=t.sent,e.setState({sourceImage:r}),t.next=11;break;case 10:"error"===n&&h["a"].error("".concat(a.file.name," file upload failed."));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onImageLoaded=function(t){e.imageRef=t;var a=t.width>t.height?t.height:t.width,n=t.height>t.width?t.width:t.height,r=a===t.width?0:(t.width-a)/2,i=n===t.height?0:(t.height-n)/2,o={unit:"px",aspect:1,width:a,height:n,x:r,y:i};return e.onCropChange(o),e.makeClientCrop(o),!1},e.onCropChange=function(t){return e.setState({crop:t})},e.getCroppedImgUrl=function(t){var a=e.imageRef,n=document.createElement("canvas"),r=a.naturalWidth/a.width,i=a.naturalHeight/a.height;if(!t.width||!t.height)throw new Error("crop width ".concat(t.width," and crop height ").concat(t.height," must be positive number"));n.width=Math.ceil(t.width*r),n.height=Math.ceil(t.height*i),e.props.maxSize&&(n.width=Math.min(e.props.maxSize,n.width),n.height=Math.min(e.props.maxSize,n.height));var o=n.getContext("2d");if(!o)throw new Error("Could not retrieve context");if(void 0===t.x||void 0===t.y)throw new Error("crop x: ".concat(t.x," and crop height ").concat(t.y," must be positive number"));return o.drawImage(a,t.x*r,t.y*i,t.width*r,t.height*i,0,0,e.props.maxSize?Math.min(e.props.maxSize,t.width*r):t.width*r,e.props.maxSize?Math.min(e.props.maxSize,t.height*r):t.height*r),new Promise((function(a){n.toBlob((function(n){if(n){e.croppedFileUrl&&window.URL.revokeObjectURL(e.croppedFileUrl),e.croppedFileUrl=window.URL.createObjectURL(n);var o=t.width*r,l=t.height*i;a(Object.create({blob:n,width:o,height:l}))}else console.error("Canvas is empty")}),S,k)}))},e.makeClientCrop=function(){var t=Object(c["a"])(l.a.mark((function t(a){var n,r,i,o;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.imageRef&&a.width&&a.height)){t.next=8;break}return t.next=3,e.getCroppedImgUrl(a);case 3:n=t.sent,r=n.blob,i=n.width,o=n.height,e.props.onResizeImage&&e.props.onResizeImage(e.croppedFileUrl,r,i,o);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onResetSourceImage=function(){return e.setState({sourceImage:void 0})},e}return Object(u["a"])(a,[{key:"render",value:function(){var e=this.state,t=e.sourceImage,a=e.crop,o=this.props,l=o.uploadHintText,c=o.onConfirm;return f.a.createElement(f.a.Fragment,null,!t&&f.a.createElement(C,{name:"file",multiple:!1,onChange:this.onUploadChange,beforeUpload:O},f.a.createElement("p",{className:"ant-upload-drag-icon"},f.a.createElement(v["a"],null)),f.a.createElement("p",{className:"ant-upload-text"},f.a.createElement(x["q"],{id:"user.uploadPhoto.clickOrDrag",defaultMessage:"Click or drag file to this area to upload"})),f.a.createElement("p",{className:"ant-upload-hint"},l||f.a.createElement(i["default"],null,"Please upload only vape related photos. Breaking those rules will result in account suspension."))),t&&f.a.createElement(n["a"],{style:{textAlign:"center"}},f.a.createElement(E.a,{imageStyle:{maxHeight:"80vh"},src:t,crop:a,minHeight:100,minWidth:100,keepSelection:!0,onImageLoaded:this.onImageLoaded,onComplete:this.makeClientCrop,onChange:this.onCropChange}),f.a.createElement("div",{style:{marginTop:24}},f.a.createElement(r["default"],{type:"default",onClick:this.onResetSourceImage,style:{marginRight:12}},f.a.createElement(w["a"],null),f.a.createElement(x["q"],{id:"user.uploadPhoto.uploadAgain",defaultMessage:"Upload again"})),c&&f.a.createElement(r["default"],{type:"primary",onClick:c},f.a.createElement(x["q"],{id:"misc.actions.continue",defaultMessage:"Continue"}),f.a.createElement(y["a"],null)))))}}]),a}(f.a.PureComponent);t["a"]=I},yihf:function(e,t,a){"use strict";a.r(t);a("IzEo");var n=a("bx4M"),r=(a("+L6B"),a("2/Rp")),i=(a("5NDa"),a("5rEg")),o=a("ODXe"),l=a("q1tI"),c=a.n(l),s=a("9kvl"),u=a("JHTa"),p=a("oVF2"),m=a("ycIM"),h=a("aK7X"),d=function(e){var t=e.dispatch,a=Object(l["useState"])(!0),d=Object(o["a"])(a,2),g=d[0],f=d[1],b=Object(l["useState"])({}),E=Object(o["a"])(b,2),v=E[0],w=E[1],y=Object(l["useState"])(""),x=Object(o["a"])(y,2),C=x[0],O=x[1],j=function(e,t,a,n){w({imageUrl:e,imageBlob:t,width:a,height:n})},S=function(){Object(u["dispatchSetCroppedImage"])(t,v),Object(u["dispatchSetDescription"])(t,C),Object(u["submitPhoto"])(t)},k=function(e){O(e.target.value)},I=c.a.createElement(n["a"],{style:{textAlign:"center"}},c.a.createElement(i["a"],{style:{display:"block",outline:0,wordWrap:"break-word",boxSizing:"inherit",cursor:"text",minHeight:50,lineHeight:"37px",fontSize:28,fontFamily:"Proxima Nova Bold,Helvetica Neue,Helvetica,Arial,sans-serif",border:0},placeholder:Object(s["ic"])().formatMessage({id:"user.uploadPhoto.saySomething",defaultMessage:"Say something about this photo"}),onChange:k,value:C}),c.a.createElement("img",{alt:"Crop",width:"100%",style:{maxWidth:"100%"},src:v.imageUrl,onClick:function(){return f(!0)}}),c.a.createElement("div",{style:{marginTop:24}},c.a.createElement(r["default"],{type:"default",onClick:function(){return f(!0)},style:{marginRight:12}},c.a.createElement(m["a"],null),c.a.createElement(s["q"],{id:"user.uploadPhoto.cropAgain",defaultMessage:"Crop again"})),c.a.createElement(r["default"],{type:"primary",onClick:S},c.a.createElement(s["q"],{id:"user.actions.publishPost",defaultMessage:"Publish post"}),c.a.createElement(h["a"],null))));return c.a.createElement("div",{className:"App"},c.a.createElement("div",{style:{display:g?"block":"none"}},c.a.createElement(p["a"],{onResizeImage:j,onConfirm:function(){return f(!1)},maxSize:800})),!g&&I)};t["default"]=Object(s["tb"])((function(e){var t=e.uploadPhoto,a=e.loading;return{uploadPhoto:t,submitting:a.effects["".concat(u["UPLOAD_PHOTO"],"/").concat(u["SUBMIT"])]}}))(d)}}]);