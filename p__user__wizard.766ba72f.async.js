(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[29],{"9vRS":function(e,t,a){e.exports={itemsAndControl:"itemsAndControl___3uuHf",itemsPanel:"itemsPanel___3pbzC",controlContainer:"controlContainer___3zJcF",controlPanel:"controlPanel___2bkfo",label:"label___2oqcn",icon:"icon___T2rYS",active:"active___2n47z"}},a2e2:function(e,t,a){"use strict";a.r(t);a("14J3");var n=a("BMrR"),r=(a("IzEo"),a("bx4M")),i=(a("+L6B"),a("2/Rp")),o=(a("5NDa"),a("5rEg")),l=(a("jCWc"),a("kPKH")),c=(a("T2oS"),a("W9HT")),s=a("q1tI"),u=a.n(s),m=a("9kvl"),d=a("yiO6"),h=a("9vRS"),p=a.n(h),g=a("dPZp"),f=(a("2qtc"),a("kLXV")),v=(a("/xke"),a("TeRw")),w=a("ODXe"),b=a("oVF2"),E=function(e){var t=Object(s["useState"])(),a=Object(w["a"])(t,2),n=a[0],r=a[1],i=function(e,t,a,n){r({imageUrl:e,imageBlob:t,width:a,height:n})},o=function(){if(n){var t=n.imageUrl,a=n.imageBlob,r=n.width,i=n.height;if(!t||!a||!r||!i)return void v["a"].error({message:"You didn't choose any image"});e.onImageChoose(t,a,r,i)}else v["a"].error({message:"You didn't choose any image"})},l=function(){r({imageUrl:void 0,imageBlob:void 0,width:void 0,height:void 0}),e.onCancel()},c=e.visible,m=e.maxSize,d=e.uploadHintText;return u.a.createElement(f["a"],{onOk:o,onCancel:l,visible:c,closable:!1},u.a.createElement(b["a"],{uploadHintText:d,onResizeImage:i,maxSize:m}))},x=E,C=a("UFF1"),y=a("ga3A"),k=function(){var e=Object(m["bb"])("userWizard"),t=e.displayName,a=e.newAvatarUrl,s=e.showAvatarChooser,h=e.setDisplayName,f=e.setNewAvatarBlob,v=e.setNewAvatarUrl,w=e.setShowAvatarChooser,b=e.redirectBack,E=e.updateUser,k=Object(m["bb"])("@@initialState"),S=k.initialState,z=S||{},U=z.currentUser,I=function(e){return h(e.target.value)},R=function(e,t){f(t),v(e),w(!1)};return U?u.a.createElement("div",null,u.a.createElement(n["a"],null,u.a.createElement(l["a"],{xs:0,md:4,lg:6,xl:8}),u.a.createElement(l["a"],{xs:24,md:16,lg:14,xl:10},u.a.createElement(r["a"],{style:{maxWidth:500},title:u.a.createElement(m["i"],{id:"user.setupUser",defaultMessage:"Setup user"})},u.a.createElement("div",{className:p.a.avatarHolder},u.a.createElement("div",{onClick:function(){return w(!0)}},u.a.createElement("div",{style:{textAlign:"center"}},a&&u.a.createElement("img",{alt:"avatar",src:a,width:200}),!a&&u.a.createElement(g["a"],{type:C["a"].USER,id:U.uid,size:200,shape:"square"}))),u.a.createElement("br",null),u.a.createElement("div",{className:p.a.name},u.a.createElement(o["a"],{style:{textAlign:"center",display:"block",outline:0,wordWrap:"break-word",boxSizing:"inherit",cursor:"text",minHeight:50,lineHeight:"37px",fontSize:28,fontFamily:"Proxima Nova Bold,Helvetica Neue,Helvetica,Arial,sans-serif"},placeholder:U.name,onChange:I,value:t}))),u.a.createElement("div",{style:{textAlign:"right"}},u.a.createElement(d["a"],null,u.a.createElement(i["default"],{onClick:function(){return b()}},u.a.createElement(m["i"],{id:"misc.actions.cancel",defaultMessage:"Cancel"})),u.a.createElement(i["default"],{icon:u.a.createElement(y["a"],null),type:"primary",onClick:function(){return E(U)}},u.a.createElement(m["i"],{id:"misc.actions.save",defaultMessage:"Save"})))))),u.a.createElement(l["a"],{xs:0,md:4,lg:6,xl:8})),u.a.createElement(x,{uploadHintText:"Upload avatar photo. Make sure that the photo doesn't brake the rules.",visible:s||!1,onCancel:function(){return w(!1)},onImageChoose:R,maxSize:256})):u.a.createElement(c["default"],null)};t["default"]=k},ga3A:function(e,t,a){"use strict";var n=a("q1tI"),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},i=r,o=a("6VBw"),l=function(e,t){return n["createElement"](o["a"],Object.assign({},e,{ref:t,icon:i}))};l.displayName="SaveOutlined";t["a"]=n["forwardRef"](l)},oVF2:function(e,t,a){"use strict";a("IzEo");var n=a("bx4M"),r=(a("+L6B"),a("2/Rp")),i=(a("tU7J"),a("wFql")),o=a("o0o1"),l=a.n(o),c=a("HaE+"),s=a("1OyB"),u=a("vuIU"),m=a("Ji7U"),d=a("LK+K"),h=(a("miYZ"),a("tsqr")),p=(a("DZo9"),a("8z0m")),g=a("q1tI"),f=a.n(g),v=a("qQNu"),w=a.n(v),b=a("LtfV"),E=a("ycIM"),x=a("X72a"),C=(a("hzVQ"),a("9kvl")),y=p["a"].Dragger;function k(e){var t="image/jpeg"===e.type||"image/png"===e.type;t||h["a"].error("You can only upload JPG/PNG file!");var a=e.size/1024/1024<20;return a||h["a"].error("Image must smaller than 20MB!"),t&&a}function S(e){return new Promise((function(t,a){if(!e.originFileObj)return a(new Error("Origin file object undefined"));var n=new FileReader;return n.readAsDataURL(e.originFileObj),n.onload=function(){"string"===typeof n.result?t(n.result):a(new Error("Can not process ArrayBuffer"))},n.onerror=function(e){return a(e)},n}))}var z="image/jpeg",U=.92,I=function(e){Object(m["a"])(a,e);var t=Object(d["a"])(a);function a(){var e;Object(s["a"])(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),e.state={sourceImage:void 0,crop:void 0},e.imageRef=void 0,e.croppedFileUrl=void 0,e.onUploadChange=function(){var t=Object(c["a"])(l.a.mark((function t(a){var n,r;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=a.file.status,"uploading"!==n&&console.log(a.file,a.fileList),"done"!==n){t.next=10;break}return h["a"].success("".concat(a.file.name," file uploaded successfully.")),t.next=6,S(a.file);case 6:r=t.sent,e.setState({sourceImage:r}),t.next=11;break;case 10:"error"===n&&h["a"].error("".concat(a.file.name," file upload failed."));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onImageLoaded=function(t){e.imageRef=t;var a=t.width>t.height?t.height:t.width,n=t.height>t.width?t.width:t.height,r=a===t.width?0:(t.width-a)/2,i=n===t.height?0:(t.height-n)/2,o={unit:"px",aspect:1,width:a,height:n,x:r,y:i};return e.onCropChange(o),e.makeClientCrop(o),!1},e.onCropChange=function(t){return e.setState({crop:t})},e.getCroppedImgUrl=function(t){var a=e.imageRef,n=document.createElement("canvas"),r=a.naturalWidth/a.width,i=a.naturalHeight/a.height;if(!t.width||!t.height)throw new Error("crop width ".concat(t.width," and crop height ").concat(t.height," must be positive number"));n.width=Math.ceil(t.width*r),n.height=Math.ceil(t.height*i),e.props.maxSize&&(n.width=Math.min(e.props.maxSize,n.width),n.height=Math.min(e.props.maxSize,n.height));var o=n.getContext("2d");if(!o)throw new Error("Could not retrieve context");if(void 0===t.x||void 0===t.y)throw new Error("crop x: ".concat(t.x," and crop height ").concat(t.y," must be positive number"));return o.drawImage(a,t.x*r,t.y*i,t.width*r,t.height*i,0,0,e.props.maxSize?Math.min(e.props.maxSize,t.width*r):t.width*r,e.props.maxSize?Math.min(e.props.maxSize,t.height*r):t.height*r),new Promise((function(a){n.toBlob((function(n){if(n){e.croppedFileUrl&&window.URL.revokeObjectURL(e.croppedFileUrl),e.croppedFileUrl=window.URL.createObjectURL(n);var o=t.width*r,l=t.height*i;a(Object.create({blob:n,width:o,height:l}))}else console.error("Canvas is empty")}),z,U)}))},e.makeClientCrop=function(){var t=Object(c["a"])(l.a.mark((function t(a){var n,r,i,o;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.imageRef&&a.width&&a.height)){t.next=8;break}return t.next=3,e.getCroppedImgUrl(a);case 3:n=t.sent,r=n.blob,i=n.width,o=n.height,e.props.onResizeImage&&e.props.onResizeImage(e.croppedFileUrl,r,i,o);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onResetSourceImage=function(){return e.setState({sourceImage:void 0})},e}return Object(u["a"])(a,[{key:"render",value:function(){var e=this.state,t=e.sourceImage,a=e.crop,o=this.props,l=o.uploadHintText,c=o.onConfirm;return f.a.createElement(f.a.Fragment,null,!t&&f.a.createElement(y,{name:"file",multiple:!1,onChange:this.onUploadChange,beforeUpload:k},f.a.createElement("p",{className:"ant-upload-drag-icon"},f.a.createElement(b["a"],null)),f.a.createElement("p",{className:"ant-upload-text"},f.a.createElement(C["i"],{id:"user.uploadPhoto.clickOrDrag",defaultMessage:"Click or drag file to this area to upload"})),f.a.createElement("p",{className:"ant-upload-hint"},l||f.a.createElement(i["default"],null,"Please upload only vape related photos. Breaking those rules will result in account suspension."))),t&&f.a.createElement(n["a"],{style:{textAlign:"center"}},f.a.createElement(w.a,{imageStyle:{maxHeight:"80vh"},src:t,crop:a,minHeight:100,minWidth:100,keepSelection:!0,onImageLoaded:this.onImageLoaded,onComplete:this.makeClientCrop,onChange:this.onCropChange}),f.a.createElement("div",{style:{marginTop:24}},f.a.createElement(r["default"],{type:"default",onClick:this.onResetSourceImage,style:{marginRight:12}},f.a.createElement(E["a"],null),f.a.createElement(C["i"],{id:"user.uploadPhoto.uploadAgain",defaultMessage:"Upload again"})),c&&f.a.createElement(r["default"],{type:"primary",onClick:c},f.a.createElement(C["i"],{id:"misc.actions.continue",defaultMessage:"Continue"}),f.a.createElement(x["a"],null)))))}}]),a}(f.a.PureComponent);t["a"]=I}}]);